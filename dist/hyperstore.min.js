/* Hyperyun Hyperstore 1.3.54 */
!function a(a,b,c){function d(e,j){if(!b[e]){if(!a[e]){var h="function"==typeof require&&require;if(!j&&h)return h(e,!0);if(f)return f(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var g=b[e]={exports:{}};a[e][0].call(g.exports,function(b){var c=a[e][1][b];return d(c?c:b)},g,g.exports,a,a,b,c)}return b[e].exports}for(var f="function"==typeof require&&require,e=0;e<c.length;e++)d(c[e]);return d}({1:[function(c,b){var a=function(){function g(){return this instanceof a?void("object"==typeof arguments[0]?(this.timestamp=arguments[0].timestamp,this.machine=arguments[0].machine,this.pid=arguments[0].pid,this.increment=arguments[0].increment):"string"==typeof arguments[0]&&24==arguments[0].length?(this.timestamp=Number("0x"+arguments[0].substr(0,8)),this.machine=Number("0x"+arguments[0].substr(8,6)),this.pid=Number("0x"+arguments[0].substr(14,4)),this.increment=Number("0x"+arguments[0].substr(18,6))):4==arguments.length&&null!=arguments[0]?(this.timestamp=arguments[0],this.machine=arguments[1],this.pid=arguments[2],this.increment=arguments[3]):(this.timestamp=Math.floor((new Date).valueOf()/1e3),this.machine=b,this.pid=h,this.increment=d++,d>16777215&&(d=0))):new a(arguments[0],arguments[1],arguments[2],arguments[3]).toString()}var d=0,h=Math.floor(32767*Math.random()),b=Math.floor(16777216*Math.random());if("undefined"!=typeof localStorage){if(null!=localStorage){var e=parseInt(localStorage.mongoMachineId);e>=0&&16777215>=e&&(b=Math.floor(localStorage.mongoMachineId)),localStorage.mongoMachineId=b,"undefined"!=typeof document&&(document.cookie="mongoMachineId="+b+";expires=Tue, 19 Jan 2038 05:00:00 GMT")}}else if("undefined"!=typeof document){var f=document.cookie.split("; ");for(var i in f){var c=f[i].split("=");if("mongoMachineId"==c[0]&&c[1]>=0&&c[1]<=16777215){b=c[1];break}}document.cookie="mongoMachineId="+b+";expires=Tue, 19 Jan 2038 05:00:00 GMT"}return g}();a.prototype.getDate=function(){return new Date(1e3*this.timestamp)},a.prototype.toArray=function(){var a,c=this.toString(),b=[];for(a=0;12>a;a++)b[a]=parseInt(c.slice(2*a,2*a+2),16);return b},a.prototype.toString=function(){var a=this.timestamp.toString(16),b=this.machine.toString(16),c=this.pid.toString(16),d=this.increment.toString(16);return"00000000".substr(0,8-a.length)+a+"000000".substr(0,6-b.length)+b+"0000".substr(0,4-c.length)+c+"000000".substr(0,6-d.length)+d},a.prototype.equals=function(b){var c=this;return c.valueOf()===b.valueOf()&&b instanceof a},a.prototype.clone=function(){var b=this;return new a(b)},a.prototype.typeName=function(){return"oid"},a.prototype.getTimestamp=function(){var a=this;return a.timeStamp},a.prototype.valueOf=a.prototype.toJSONValue=a.prototype.toHexString=function(){var a=this;return a.toString()},a.prototype.selectorIsId=function(b){return"string"==typeof b||"number"==typeof b||b instanceof a},a.prototype.selectorIsIdPerhapsAsObject=function(a){var b=this;return b._selectorIsId(a)||a&&"object"==typeof a&&a._id&&b._selectorIsId(a._id)&&1===_.size(a)},a.prototype.idsMatchedBySelector=function(a){var b=this;if(b._selectorIsId(a))return[a];if(!a)return null;if(_.has(a,"_id"))return b._selectorIsId(a._id)?[a._id]:a._id&&a._id.$in&&_.isArray(a._id.$in)&&!_.isEmpty(a._id.$in)&&_.all(a._id.$in,b._selectorIsId)?a._id.$in:null;if(a.$and&&_.isArray(a.$and))for(var c=0;c<a.$and.length;++c){var d=b._idsMatchedBySelector(a.$and[c]);if(d)return d}return null},b.exports=a},{}],2:[function(d,c){var a=function(){return a.get.apply(a,arguments)},b=a.utils={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isPlainObject:function(a){return!!a&&"[object Object]"===Object.prototype.toString.call(a)},toArray:function(a){return Array.prototype.slice.call(a)},getKeys:Object.keys||function(b){var c=[],a="";for(a in b)b.hasOwnProperty(a)&&c.push(a);return c},escape:function(a){return String(a).replace(/[,;"\\=\s%]/g,function(a){return encodeURIComponent(a)})},retrieve:function(a,b){return null==a?b:a}};a.defaults={},a.expiresMultiplier=86400,a.set=function(d,h,c){if(b.isPlainObject(d))for(var g in d)d.hasOwnProperty(g)&&this.set(g,d[g],h);else{c=b.isPlainObject(c)?c:{expires:c};var a=void 0!==c.expires?c.expires:this.defaults.expires||"",i=typeof a;"string"===i&&""!==a?a=new Date(a):"number"===i&&(a=new Date(+new Date+1e3*this.expiresMultiplier*a)),""!==a&&"toGMTString"in a&&(a=";expires="+a.toGMTString());var e=c.path||this.defaults.path;e=e?";path="+e:"";var f=c.domain||this.defaults.domain;f=f?";domain="+f:"";var j=c.secure||this.defaults.secure?";secure":"";document.cookie=b.escape(d)+"="+b.escape(h)+a+e+f+j}return this},a.remove=function(a){a=b.isArray(a)?a:b.toArray(arguments);for(var c=0,d=a.length;d>c;c++)this.set(a[c],"",-1);return this},a.empty=function(){return this.remove(b.getKeys(this.all()))},a.get=function(a,c){c=c||void 0;var e=this.all();if(b.isArray(a)){for(var f={},d=0,h=a.length;h>d;d++){var g=a[d];f[g]=b.retrieve(e[g],c)}return f}return b.retrieve(e[a],c)},a.all=function(){if(""===document.cookie)return{};for(var b=document.cookie.split("; "),c={},a=0,e=b.length;e>a;a++){var d=b[a].split("=");c[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return c},a.enabled=function(){if(navigator.cookieEnabled)return!0;var b="_"===a.set("_","_").get("_");return a.remove("_"),b},c.exports=a},{}],3:[function(j,n){var m=j("JSON2"),a=j("lodash");EJSON={};var d={};EJSON.addType=function(b,c){if(a.has(d,b))throw new Error("Type "+b+" already present");d[b]=c};var c=[{matchJSONValue:function(b){return a.has(b,"$date")&&1===a.size(b)},matchObject:function(a){return a instanceof Date},toJSONValue:function(a){return{$date:a.getTime()}},fromJSONValue:function(a){return new Date(a.$date)}},{matchJSONValue:function(b){return a.has(b,"$binary")&&1===a.size(b)},matchObject:function(b){return"undefined"!=typeof Uint8Array&&b instanceof Uint8Array||b&&a.has(b,"$Uint8ArrayPolyfill")},toJSONValue:function(a){return{$binary:EJSON._base64Encode(a)}},fromJSONValue:function(a){return EJSON._base64Decode(a.$binary)}},{matchJSONValue:function(b){return a.has(b,"$escape")&&1===a.size(b)},matchObject:function(b){return a.isEmpty(b)||a.size(b)>2?!1:a.any(c,function(a){return a.matchJSONValue(b)})},toJSONValue:function(c){var b={};return a.each(c,function(a,c){b[c]=EJSON.toJSONValue(a)}),{$escape:b}},fromJSONValue:function(c){var b={};return a.each(c.$escape,function(a,c){b[c]=EJSON.fromJSONValue(a)}),b}},{matchJSONValue:function(b){return a.has(b,"$type")&&a.has(b,"$value")&&2===a.size(b)},matchObject:function(a){return EJSON._isCustomType(a)},toJSONValue:function(a){return{$type:a.typeName(),$value:a.toJSONValue()}},fromJSONValue:function(a){var b=a.$type,c=d[b];return c(a.$value)}}];EJSON._isCustomType=function(b){return b&&"function"==typeof b.toJSONValue&&"function"==typeof b.typeName&&a.has(d,b.typeName())};var k=EJSON._adjustTypesToJSONValue=function(b){if(null===b)return null;var c=f(b);return void 0!==c?c:(a.each(b,function(a,d){if("object"==typeof a||void 0===a){var c=f(a);return c?void(b[d]=c):void k(a)}}),b)},f=function(b){for(var a=0;a<c.length;a++){var d=c[a];if(d.matchObject(b))return d.toJSONValue(b)}return void 0};EJSON.toJSONValue=function(a){var b=f(a);return void 0!==b?b:("object"==typeof a&&(a=EJSON.clone(a),k(a)),a)};var i=EJSON._adjustTypesFromJSONValue=function(b){if(null===b)return null;var c=g(b);return c!==b?c:(a.each(b,function(a,d){if("object"==typeof a){var c=g(a);if(a!==c)return void(b[d]=c);i(a)}}),b)},g=function(b){if("object"==typeof b&&null!==b&&a.size(b)<=2&&a.all(b,function(b,a){return"string"==typeof a&&"$"===a.substr(0,1)}))for(var d=0;d<c.length;d++){var e=c[d];if(e.matchJSONValue(b))return e.fromJSONValue(b)}return b};EJSON.fromJSONValue=function(a){var b=g(a);return b===a&&"object"==typeof a?(a=EJSON.clone(a),i(a),a):b},EJSON.stringify=function(a){return m.stringify(EJSON.toJSONValue(a))},EJSON.parse=function(a){return EJSON.fromJSONValue(m.parse(a))},EJSON.isBinary=function(a){return"undefined"!=typeof Uint8Array&&a instanceof Uint8Array||a&&a.$Uint8ArrayPolyfill},EJSON.equals=function(c,d,e){var b,h=!(!e||!e.keyOrderSensitive);if(c===d)return!0;if(!c||!d)return!1;if("object"!=typeof c||"object"!=typeof d)return!1;if(c instanceof Date&&d instanceof Date)return c.valueOf()===d.valueOf();if(EJSON.isBinary(c)&&EJSON.isBinary(d)){if(c.length!==d.length)return!1;for(b=0;b<c.length;b++)if(c[b]!==d[b])return!1;return!0}if("function"==typeof c.equals)return c.equals(d,e);if(c instanceof Array){if(!(d instanceof Array))return!1;if(c.length!==d.length)return!1;for(b=0;b<c.length;b++)if(!EJSON.equals(c[b],d[b],e))return!1;return!0}var g;if(h){var f=[];return a.each(d,function(b,a){f.push(a)}),b=0,g=a.all(c,function(a,c){return b>=f.length?!1:c!==f[b]?!1:EJSON.equals(a,d[f[b]],e)?(b++,!0):!1}),g&&b===f.length}return b=0,g=a.all(c,function(f,c){return a.has(d,c)&&EJSON.equals(f,d[c],e)?(b++,!0):!1}),g&&a.size(d)===b},EJSON.clone=function(b){var c;if("object"!=typeof b)return b;if(null===b)return null;if(b instanceof Date)return new Date(b.getTime());if(EJSON.isBinary(b)){c=EJSON.newBinary(b.length);for(var d=0;d<b.length;d++)c[d]=b[d];return c}if(a.isArray(b)||a.isArguments(b)){for(c=[],d=0;d<b.length;d++)c[d]=EJSON.clone(b[d]);return c}return"function"==typeof b.clone?b.clone():(c={},a.each(b,function(a,b){c[b]=EJSON.clone(a)}),c)};for(var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l={},e=0;e<h.length;e++)l[h.charAt(e)]=e;EJSON._base64Encode=function(d){for(var a=[],f=null,g=null,e=null,h=null,c=0;c<d.length;c++)switch(c%3){case 0:f=d[c]>>2&63,g=(3&d[c])<<4;break;case 1:g|=d[c]>>4&15,e=(15&d[c])<<2;break;case 2:e|=d[c]>>6&3,h=63&d[c],a.push(b(f)),a.push(b(g)),a.push(b(e)),a.push(b(h)),f=null,g=null,e=null,h=null}return null!=f&&(a.push(b(f)),a.push(b(g)),a.push(null==e?"=":b(e)),null==h&&a.push("=")),a.join("")};var b=function(a){return h.charAt(a)},o=function(a){return"="===a?-1:l[a]};EJSON.newBinary=function(b){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var a=[],c=0;b>c;c++)a.push(0);return a.$Uint8ArrayPolyfill=!0,a}return new Uint8Array(new ArrayBuffer(b))},EJSON._base64Decode=function(b){var e=Math.floor(3*b.length/4);"="==b.charAt(b.length-1)&&(e--,"="==b.charAt(b.length-2)&&e--);for(var c=EJSON.newBinary(e),f=null,g=null,i=null,h=0,d=0;d<b.length;d++){var j=b.charAt(d),a=o(j);switch(d%4){case 0:if(0>a)throw new Error("invalid base64 string");f=a<<2;break;case 1:if(0>a)throw new Error("invalid base64 string");f|=a>>4,c[h++]=f,g=(15&a)<<4;break;case 2:a>=0&&(g|=a>>2,c[h++]=g,i=(3&a)<<6);break;case 3:a>=0&&(c[h++]=i|a)}}return c},n.exports=EJSON},{JSON2:10,lodash:37}],4:[function(c,d){var a=c("lodash"),e=["find","render","cache"],b={breakServerURLIntoObject:function(a){a=a.trim();var b={port:80,protocol:"",application:"",host:"",collection:"",toString:function(){return this.protocol+"://"+this.application+"."+this.host+"/"+this.collection}};if(!a)return b;if(a.indexOf("://")>=0){var f=a.split("://");b.protocol=f[0],a=f[1]}else b.protocol="http";if(!a)return b;var e=a.indexOf(".");e>=0&&(b.application=a.substring(0,e));var c=a.indexOf("/"),d=a.indexOf(":");return b.host=c>=0?d>=0&&c>d?a.substring(e+1,d):a.substring(e+1,c):a.substring(e+1,a.length),d>=0&&c>d&&(b.port=a.substring(d+1,c)),b.collection=c>=0?a.substring(c+1,a.length):void 0,b},isMongoOperator:function(b){return a.contains(["$inc","$rename","$setOnInsert","$set","$unset","$in","$gt","$gte","$lt","$lte","$ne","$nin","$mul","$min","$max","$currentDate","$","$addToSet","$pop","$pullAll","$pull","$push","$pushAll","$each","$slice","$sort","$position","$bit","$isolated"],b)},toggleLog:function(c,b){b||(b=""),a.contains(e,b)},supportsLocalStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},utf8_encode:function(h){if(null===h||"undefined"==typeof h)return"";var c,d,e=h+"",g="",i=0;c=d=0,i=e.length;for(var b=0;i>b;b++){var a=e.charCodeAt(b),f=null;if(128>a)d++;else if(a>127&&2048>a)f=String.fromCharCode(a>>6|192,63&a|128);else if(55296!=(63488&a))f=String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128);else{if(55296!=(64512&a))throw new RangeError("Unmatched trail surrogate at "+b);var j=e.charCodeAt(++b);if(56320!=(64512&j))throw new RangeError("Unmatched lead surrogate at "+(b-1));a=((1023&a)<<10)+(1023&j)+65536,f=String.fromCharCode(a>>18|240,a>>12&63|128,a>>6&63|128,63&a|128)}null!==f&&(d>c&&(g+=e.slice(c,d)),g+=f,c=d=b+1)}return d>c&&(g+=e.slice(c,i)),g},md5:function(D){var E,e,I,H,G,F,d,a,b,c,w=function(a,b){return a<<b|a>>>32-b},g=function(d,e){var f,g,b,c,a;return b=2147483648&d,c=2147483648&e,f=1073741824&d,g=1073741824&e,a=(1073741823&d)+(1073741823&e),f&g?2147483648^a^b^c:f|g?1073741824&a?3221225472^a^b^c:1073741824^a^b^c:a^b^c},J=function(a,b,c){return a&b|~a&c},M=function(b,c,a){return b&a|c&~a},L=function(a,b,c){return a^b^c},K=function(a,b,c){return b^(a|~c)},h=function(a,b,c,d,e,f,h){return a=g(a,g(g(J(b,c,d),e),h)),g(w(a,f),b)},i=function(a,b,c,d,e,f,h){return a=g(a,g(g(M(b,c,d),e),h)),g(w(a,f),b)},j=function(a,b,c,d,e,f,h){return a=g(a,g(g(L(b,c,d),e),h)),g(w(a,f),b)},k=function(a,b,c,d,e,f,h){return a=g(a,g(g(K(b,c,d),e),h)),g(w(a,f),b)},N=function(g){for(var c,d=g.length,h=d+8,i=(h-h%64)/64,f=16*(i+1),b=new Array(f-1),e=0,a=0;d>a;)c=(a-a%4)/4,e=a%4*8,b[c]=b[c]|g.charCodeAt(a)<<e,a++;return c=(a-a%4)/4,e=a%4*8,b[c]=b[c]|128<<e,b[f-2]=d<<3,b[f-1]=d>>>29,b},v=function(e){var c,a,d="",b="";for(a=0;3>=a;a++)c=e>>>8*a&255,b="0"+c.toString(16),d+=b.substr(b.length-2,2);return d},f=[],x=7,y=12,z=17,A=22,B=5,o=9,u=14,t=20,p=4,C=11,n=16,m=23,l=6,s=10,r=15,q=21;for(D=this.utf8_encode(D),f=N(D),d=1732584193,a=4023233417,b=2562383102,c=271733878,E=f.length,e=0;E>e;e+=16)I=d,H=a,G=b,F=c,d=h(d,a,b,c,f[e+0],x,3614090360),c=h(c,d,a,b,f[e+1],y,3905402710),b=h(b,c,d,a,f[e+2],z,606105819),a=h(a,b,c,d,f[e+3],A,3250441966),d=h(d,a,b,c,f[e+4],x,4118548399),c=h(c,d,a,b,f[e+5],y,1200080426),b=h(b,c,d,a,f[e+6],z,2821735955),a=h(a,b,c,d,f[e+7],A,4249261313),d=h(d,a,b,c,f[e+8],x,1770035416),c=h(c,d,a,b,f[e+9],y,2336552879),b=h(b,c,d,a,f[e+10],z,4294925233),a=h(a,b,c,d,f[e+11],A,2304563134),d=h(d,a,b,c,f[e+12],x,1804603682),c=h(c,d,a,b,f[e+13],y,4254626195),b=h(b,c,d,a,f[e+14],z,2792965006),a=h(a,b,c,d,f[e+15],A,1236535329),d=i(d,a,b,c,f[e+1],B,4129170786),c=i(c,d,a,b,f[e+6],o,3225465664),b=i(b,c,d,a,f[e+11],u,643717713),a=i(a,b,c,d,f[e+0],t,3921069994),d=i(d,a,b,c,f[e+5],B,3593408605),c=i(c,d,a,b,f[e+10],o,38016083),b=i(b,c,d,a,f[e+15],u,3634488961),a=i(a,b,c,d,f[e+4],t,3889429448),d=i(d,a,b,c,f[e+9],B,568446438),c=i(c,d,a,b,f[e+14],o,3275163606),b=i(b,c,d,a,f[e+3],u,4107603335),a=i(a,b,c,d,f[e+8],t,1163531501),d=i(d,a,b,c,f[e+13],B,2850285829),c=i(c,d,a,b,f[e+2],o,4243563512),b=i(b,c,d,a,f[e+7],u,1735328473),a=i(a,b,c,d,f[e+12],t,2368359562),d=j(d,a,b,c,f[e+5],p,4294588738),c=j(c,d,a,b,f[e+8],C,2272392833),b=j(b,c,d,a,f[e+11],n,1839030562),a=j(a,b,c,d,f[e+14],m,4259657740),d=j(d,a,b,c,f[e+1],p,2763975236),c=j(c,d,a,b,f[e+4],C,1272893353),b=j(b,c,d,a,f[e+7],n,4139469664),a=j(a,b,c,d,f[e+10],m,3200236656),d=j(d,a,b,c,f[e+13],p,681279174),c=j(c,d,a,b,f[e+0],C,3936430074),b=j(b,c,d,a,f[e+3],n,3572445317),a=j(a,b,c,d,f[e+6],m,76029189),d=j(d,a,b,c,f[e+9],p,3654602809),c=j(c,d,a,b,f[e+12],C,3873151461),b=j(b,c,d,a,f[e+15],n,530742520),a=j(a,b,c,d,f[e+2],m,3299628645),d=k(d,a,b,c,f[e+0],l,4096336452),c=k(c,d,a,b,f[e+7],s,1126891415),b=k(b,c,d,a,f[e+14],r,2878612391),a=k(a,b,c,d,f[e+5],q,4237533241),d=k(d,a,b,c,f[e+12],l,1700485571),c=k(c,d,a,b,f[e+3],s,2399980690),b=k(b,c,d,a,f[e+10],r,4293915773),a=k(a,b,c,d,f[e+1],q,2240044497),d=k(d,a,b,c,f[e+8],l,1873313359),c=k(c,d,a,b,f[e+15],s,4264355552),b=k(b,c,d,a,f[e+6],r,2734768916),a=k(a,b,c,d,f[e+13],q,1309151649),d=k(d,a,b,c,f[e+4],l,4149444226),c=k(c,d,a,b,f[e+11],s,3174756917),b=k(b,c,d,a,f[e+2],r,718787259),a=k(a,b,c,d,f[e+9],q,3951481745),d=g(d,I),a=g(a,H),b=g(b,G),c=g(c,F);var O=v(d)+v(a)+v(b)+v(c);return O.toLowerCase()},generateUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var a=16*Math.random()|0,c="x"==b?a:3&a|8;return c.toString(16)})},deepExtend:function(c){var d=/#{\s*?_\s*?}/,e=Array.prototype.slice,f=Object.prototype.hasOwnProperty;return a.each(e.call(arguments,1),function(g){for(var e in g)if(f.call(g,e))if(a.isUndefined(c[e])||a.isFunction(c[e])||a.isNull(g[e]))c[e]=g[e];else if(a.isString(g[e])&&d.test(g[e]))a.isString(c[e])&&(c[e]=g[e].replace(d,c[e]));else if(a.isArray(c[e])||a.isArray(g[e])){if(!a.isArray(c[e])||!a.isArray(g[e]))throw"Error: Trying to combine an array with a non-array ("+e+")";c[e]=a.reject(b.deepExtend(c[e],g[e]),function(b){return a.isNull(b)})}else a.isObject(c[e])||a.isObject(g[e])?a.isObject(c[e])&&a.isObject(g[e])?c[e]=b.deepExtend(c[e],g[e]):(c[e]instanceof Date||g[e]instanceof Date)&&(c[e]=g[e]):c[e]=g[e]}),c},deepKeys:function(d,e){if(e){var c=new Array;return a(d).each(function(d){c=a.union(c,b.deepKeys(d,!1))}),c}if(d instanceof String)return[];if(!(d instanceof Object))return[];var c=a.keys(d);return a(d).each(function(d){c=a.union(c,b.deepKeys(d))}),c},hasPath:function(c,b){if(!c)return!1;if(-1===b.indexOf("."))return a.has(c,b);var d=b.substring(0,b.indexOf(".")),e=b.substring(b.indexOf(".")+1);return a.has(c,d)?a.hasPath(c[d],e):!1}};d.exports=b},{lodash:37}],5:[function(b,a){!function(b,x){function f(a,b){try{if("function"!=typeof a)return a;if(!a.bugsnag){var d=r();a.bugsnag=function(h){if(b&&b.eventHandler&&(o=h),g=d,!n){var i=a.apply(this,arguments);return g=null,i}try{return a.apply(this,arguments)}catch(f){throw e("autoNotify",!0)&&(c.notifyException(f,null,null,"error"),C()),f}finally{g=null}},a.bugsnag.bugsnag=a.bugsnag}return a.bugsnag}catch(f){return a}}function i(){v=!1}function r(){var a=document.currentScript||g;if(!a&&v){var b=document.scripts||document.getElementsByTagName("script");a=b[b.length-1]}return a}function t(b){var a=r();a&&(b.script={src:a.src,content:e("inlineScript",!0)?a.innerHTML:""})}function s(c){var a=b.console;void 0!==a&&void 0!==a.log&&a.log("[Bugsnag] "+c)}function E(b,a){"undefined"!=typeof Hyperyun&&Hyperyun.Logger&&Hyperyun.Logger.sendLog(a)}function A(f){for(var c={},d=/^data\-([\w\-]+)$/,e=f.attributes,b=0;b<e.length;b++){var a=e[b];if(d.test(a.nodeName)){var g=a.nodeName.match(d)[1];c[g]=a.value||a.nodeValue}}return c}function e(b,d){h=h||A(F);var a=void 0!==c[b]?c[b]:h[b.toLowerCase()];return"false"===a&&(a=!1),void 0!==a?a:d}function j(a,f){p-=1;var i=e("releaseStage"),g=e("notifyReleaseStages");if(g){for(var j=!1,h=0;h<g.length;h++)if(i===g[h]){j=!0;break}if(!j)return}var k=[a.name,a.message,a.stacktrace].join("|");if(k!==u){u=k,o&&(f=f||{},f["Last Event"]=z(o));var d={projectRoot:b.location.protocol+"//"+b.location.host,context:b.location.pathname,releaseStage:i,url:b.location.href,severity:a.severity,name:a.name,message:a.message,stacktrace:a.stacktrace,file:a.file,lineNumber:a.lineNumber,columnNumber:a.columnNumber},l=c.beforeNotify;if("function"==typeof l){var m=l(d,d.metaData);if(m===!1)return}return 0===d.lineNumber&&/Script error\.?/.test(d.message)?s("Ignoring cross-domain script error. See https://bugsnag.com/docs/notifiers/js/cors"):void E(e("endpoint")||D,d)}}function k(){var c,a,f=10,e="[anonymous]";try{throw new Error("")}catch(g){c="<generated>\n",a=l(g)}if(!a){c="<generated-ie>\n";var d=[];try{for(var b=arguments.callee.caller.caller;b&&d.length<f;){var h=B.test(b.toString())?RegExp.$1||e:e;d.push(h),b=b.caller}}catch(i){s(i)}a=d.join("\n")}return c+a}function l(a){return a.stack||a.backtrace||a.stacktrace}function z(a){var b={millisecondsAgo:new Date-a.timeStamp,type:a.type,which:a.which,target:y(a.target)};return b}function y(c){if(c){var a=c.attributes;if(a){for(var d="<"+c.nodeName.toLowerCase(),b=0;b<a.length;b++)a[b].value&&"null"!=a[b].value.toString()&&(d+=" "+a[b].name+'="'+a[b].value+'"');return d+">"}return c.nodeName}}function C(){m+=1,b.setTimeout(function(){m-=1})}function d(a,c,e){var d=a[c],f=e(d);a[c]=f,"undefined"!=typeof BUGSNAG_TESTING&&b.undo&&b.undo.push(function(){a[c]=d})}var o,g,u,c={},n=!0,m=0,p=10;c.noConflict=function(){return b.Bugsnag=x,c},c.refresh=function(){p=10},c.notifyException=function(a,b,c,d){b&&"string"!=typeof b&&(c=b,b=void 0),c||(c={}),t(c),j({name:b||a.name,message:a.message||a.description,stacktrace:l(a)||k(),file:a.fileName||a.sourceURL,lineNumber:a.lineNumber||a.line,columnNumber:a.columnNumber?a.columnNumber+1:void 0,severity:d||"warning"},c)},c.notify=function(a,c,d,e){j({name:a,message:c,stacktrace:k(),file:b.location.toString(),lineNumber:1,severity:e||"warning"},d)};var v="complete"!==document.readyState;document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!0),b.addEventListener("load",i,!0)):b.attachEvent("onload",i);var h,B=/function\s*([\w\-$]+)?\s*\(/i,G="https://notify.bugsnag.com/",D=G+"js",q=document.getElementsByTagName("script"),F=q[q.length-1];if(b.atob){if(b.ErrorEvent)try{0===new b.ErrorEvent("test").colno&&(n=!1)}catch(H){}}else n=!1;if(e("autoNotify",!0)){d(b,"onerror",function(a){return"undefined"!=typeof BUGSNAG_TESTING&&(c._onerror=a),function(h,i,n,f,d){var p=e("autoNotify",!0),o={};!f&&b.event&&(f=b.event.errorCharacter),t(o),g=null,p&&!m&&j({name:d&&d.name||"window.onerror",message:h,file:i,lineNumber:n,columnNumber:f,stacktrace:d&&l(d)||k(),severity:"error"},o),"undefined"!=typeof BUGSNAG_TESTING&&(a=c._onerror),a&&a(h,i,n,f,d)}});var w=function(a){return function(b,c){if("function"==typeof b){b=f(b);var d=Array.prototype.slice.call(arguments,2);return a(function(){b.apply(this,d)},c)}return a(b,c)}};d(b,"setTimeout",w),d(b,"setInterval",w),b.requestAnimationFrame&&d(b,"requestAnimationFrame",function(a){return function(b){return a(f(b))}}),b.setImmediate&&d(b,"setImmediate",function(a){return function(){var b=Array.prototype.slice.call(arguments);return b[0]=f(b[0]),a.apply(this,b)}}),"EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(c){var a=b[c]&&b[c].prototype;a&&a.hasOwnProperty&&a.hasOwnProperty("addEventListener")&&(d(a,"addEventListener",function(a){return function(c,b,d,e){return b&&b.handleEvent&&(b.handleEvent=f(b.handleEvent,{eventHandler:!0})),a.call(this,c,f(b,{eventHandler:!0}),d,e)}}),d(a,"removeEventListener",function(a){return function(b,c,d,e){return a.call(this,b,c,d,e),a.call(this,b,f(c),d,e)}}))})}b.Bugsnag=c,"function"==typeof define&&define.amd?define([],function(){return c}):"object"==typeof a&&"object"==typeof a.exports&&(a.exports=c)}(window,window.Bugsnag)},{}],6:[function(e,H){var a=e("lodash"),J=e("./BetterObjectId.js"),G=e("./random.js"),b=e("./ejson.js"),g=e("JSON2"),c={};c.defer=function(a){a()};var t=function(){var a=this;a._tasks=[],a._running=!1};a.extend(t.prototype,{runTask:function(f){var b=this;if(!b.safeToRunTask())throw new Error("Could not synchronously run a task from a running task");b._tasks.push(f);var d=b._tasks;b._tasks=[],b._running=!0;try{for(;!a.isEmpty(d);){var g=d.shift();try{g()}catch(e){if(a.isEmpty(d))throw e;c._debug("Exception in queued task: "+e.stack)}}}finally{b._running=!1}},queueTask:function(c){var b=this,d=a.isEmpty(b._tasks);b._tasks.push(c),d&&setTimeout(a.bind(b.flush,b),0)},flush:function(){var a=this;a.runTask(function(){})},drain:function(){var b=this;if(b.safeToRunTask())for(;!a.isEmpty(b._tasks);)b.flush()},safeToRunTask:function(){var a=this;return!a._running}}),LocalCollection=function(b){var a=this;a.name=b,a._docs=new LocalCollection._IdMap,a._observeQueue=new t,a.next_qid=1,a.queries={},a._savedOriginals=null,a.paused=!1},Minimongo={},MinimongoTest={},LocalCollection._applyChanges=function(b,c){a.each(c,function(a,c){void 0===a?delete b[c]:b[c]=a})},MinimongoError=function(b){var a=new Error(b);return a.name="MinimongoError",a},LocalCollection.prototype.find=function(a,b){return 0===arguments.length&&(a={}),new LocalCollection.Cursor(this,a,b)},LocalCollection.Cursor=function(d,c,b){var a=this;b||(b={}),this.collection=d,LocalCollection._selectorIsId(c)?(a._selectorId=c,a.matcher=new Minimongo.Matcher(c,a),a.sorter=void 0):(a._selectorId=void 0,a.matcher=new Minimongo.Matcher(c,a),a.sorter=a.matcher.hasGeoQuery()||b.sort?new Sorter(b.sort||[]):null),a.skip=b.skip,a.limit=b.limit,a.fields=b.fields,a.fields&&(a.projectionFn=LocalCollection._compileProjection(a.fields)),a._transform=LocalCollection.wrapTransform(b.transform),a.db_objects=null,a.cursor_pos=0,"undefined"!=typeof Deps&&(a.reactive=void 0===b.reactive?!0:b.reactive)},LocalCollection.Cursor.prototype.rewind=function(){var a=this;a.db_objects=null,a.cursor_pos=0},LocalCollection.prototype.findOne=function(b,a){return 0===arguments.length&&(b={}),a=a||{},a.limit=1,this.find(b,a).fetch()[0]},LocalCollection.Cursor.prototype.forEach=function(d,e){var a=this;for(null===a.db_objects&&(a.db_objects=a._getRawObjects({ordered:!0})),a.reactive&&a._depend({addedBefore:!0,removed:!0,changed:!0,movedBefore:!0});a.cursor_pos<a.db_objects.length;){var c=b.clone(a.db_objects[a.cursor_pos]);a.projectionFn&&(c=a.projectionFn(c)),a._transform&&(c=a._transform(c)),d.call(e,c,a.cursor_pos,a),++a.cursor_pos}},LocalCollection.Cursor.prototype.getTransform=function(){return this._transform},LocalCollection.Cursor.prototype.map=function(c,d){var a=this,b=[];return a.forEach(function(e,f){b.push(c.call(d,e,f,a))}),b},LocalCollection.Cursor.prototype.fetch=function(){var b=this,a=[];return b.forEach(function(b){a.push(b)}),a},LocalCollection.Cursor.prototype.count=function(){var a=this;return a.reactive&&a._depend({added:!0,removed:!0},!0),null===a.db_objects&&(a.db_objects=a._getRawObjects({ordered:!0})),a.db_objects.length},LocalCollection.Cursor.prototype._publishCursor=function(b){var a=this;if(!a.collection.name)throw new Error("Can't publish a cursor from a collection without a name.");var d=a.collection.name;return c.Collection._publishCursor(a,b,d)},LocalCollection.Cursor.prototype._getCollectionName=function(){var a=this;return a.collection.name},LocalCollection._observeChangesCallbacksAreOrdered=function(a){if(a.added&&a.addedBefore)throw new Error("Please specify only one of added() and addedBefore()");return!(!a.addedBefore&&!a.movedBefore)},LocalCollection._observeCallbacksAreOrdered=function(a){if(a.addedAt&&a.added)throw new Error("Please specify only one of added() and addedAt()");if(a.changedAt&&a.changed)throw new Error("Please specify only one of changed() and changedAt()");if(a.removed&&a.removedAt)throw new Error("Please specify only one of removed() and removedAt()");return!!(a.addedAt||a.movedTo||a.changedAt||a.removedAt)},LocalCollection.ObserveHandle=function(){},a.extend(LocalCollection.Cursor.prototype,{observe:function(a){var b=this;return LocalCollection._observeFromObserveChanges(b,a)},observeChanges:function(f){var c=this,e=LocalCollection._observeChangesCallbacksAreOrdered(f);if(!f._allow_unordered&&!e&&(c.skip||c.limit))throw new Error("must use ordered observe with skip or limit");if(c.fields&&(0===c.fields._id||c.fields._id===!1))throw Error("You may not observe a cursor with {fields: {_id: 0}}");var h,d={matcher:c.matcher,sorter:e&&c.sorter,distances:c.matcher.hasGeoQuery()&&e&&new LocalCollection._IdMap,resultsSnapshot:null,ordered:e,cursor:c,projectionFn:c.projectionFn};c.reactive&&(h=c.collection.next_qid++,c.collection.queries[h]=d),d.results=c._getRawObjects({ordered:e,distances:d.distances}),c.collection.paused&&(d.resultsSnapshot=e?[]:new LocalCollection._IdMap);var g=function(d,b,e){return d?function(){var g=this,f=arguments;c.collection.paused||void 0!==b&&c.projectionFn&&(f[b]=c.projectionFn(f[b]),e&&a.isEmpty(f[b]))||c.collection._observeQueue.queueTask(function(){d.apply(g,f)})}:function(){}};if(d.added=g(f.added,1),d.changed=g(f.changed,1,!0),d.removed=g(f.removed),e&&(d.addedBefore=g(f.addedBefore,1),d.movedBefore=g(f.movedBefore)),!f._suppress_initial&&!c.collection.paused){var j=e?a.bind(a.each,null,d.results):a.bind(d.results.forEach,d.results);j(function(a){var c=b.clone(a);delete c._id,e&&d.addedBefore(a._id,c,null),d.added(a._id,c)})}var i=new LocalCollection.ObserveHandle;return a.extend(i,{collection:c.collection,stop:function(){c.reactive&&delete c.collection.queries[h]}}),c.reactive&&Deps.active&&Deps.onInvalidate(function(){i.stop()}),c.collection._observeQueue.drain(),i}}),LocalCollection.Cursor.prototype._getRawObjects=function(c){var a=this;c=c||{};var b=c.ordered?[]:new LocalCollection._IdMap;if(void 0!==a._selectorId){if(a.skip)return b;var e=a.collection._docs.get(a._selectorId);return e&&(c.ordered?b.push(e):b.set(a._selectorId,e)),b}var d;if(a.matcher.hasGeoQuery()&&c.ordered&&(c.distances?(d=c.distances,d.clear()):d=new LocalCollection._IdMap),a.collection._docs.forEach(function(e,g){var f=a.matcher.documentMatches(e);return f.result&&(c.ordered?(b.push(e),d&&void 0!==f.distance&&d.set(g,f.distance)):b.set(g,e)),!a.limit||a.skip||a.sorter||b.length!==a.limit?!0:!1}),!c.ordered)return b;if(a.sorter){var g=a.sorter.getComparator({distances:d});b.sort(g)}var f=a.skip||0,h=a.limit?a.limit+f:b.length;return b.slice(f,h)},LocalCollection.Cursor.prototype._depend=function(d,e){var f=this;if(Deps.active){var b=new Deps.Dependency;b.depend();var g=a.bind(b.changed,b),c={_suppress_initial:!0,_allow_unordered:e};a.each(["added","changed","removed","addedBefore","movedBefore"],function(a){d[a]&&(c[a]=g)}),f.observeChanges(c)}},LocalCollection.prototype.insert=function(d,i){var e=this;d=b.clone(d),a.has(d,"_id")||(d._id=new LocalCollection._ObjectID);var f=d._id;if(e._docs.has(f))throw MinimongoError("Duplicate _id '"+f+"'");e._saveOriginal(f,void 0),e._docs.set(f,d);var j=[];for(var k in e.queries){var g=e.queries[k],h=g.matcher.documentMatches(d);h.result&&(g.distances&&void 0!==h.distance&&g.distances.set(f,h.distance),g.cursor.skip||g.cursor.limit?j.push(k):LocalCollection._insertInResults(g,d))}return a.each(j,function(a){e.queries[a]&&LocalCollection._recomputeResults(e.queries[a])}),e._observeQueue.drain(),i&&c.defer(function(){i(null,f)}),f},LocalCollection.prototype._eachPossiblyMatchingDoc=function(g,c){var d=this,a=LocalCollection._idsMatchedBySelector(g);if(a)for(var b=0;b<a.length;++b){var e=a[b],f=d._docs.get(e);if(f){var h=c(f,e);if(h===!1)break}}else d._docs.forEach(c)},LocalCollection.prototype.remove=function(i,g){var d=this;if(d.paused&&!d._savedOriginals&&b.equals(i,{})){var e=d._docs.size();return d._docs.clear(),a.each(d.queries,function(a){a.ordered?a.results=[]:a.results.clear()}),g&&c.defer(function(){g(null,e)}),e}var n=new Minimongo.Matcher(i,d),f=[];d._eachPossiblyMatchingDoc(i,function(a,b){n.documentMatches(a).result&&f.push(b)});for(var m=[],l=[],j=0;j<f.length;j++){var h=f[j],k=d._docs.get(h);a.each(d.queries,function(a,b){a.matcher.documentMatches(k).result&&(a.cursor.skip||a.cursor.limit?m.push(b):l.push({qid:b,doc:k}))}),d._saveOriginal(h,k),d._docs.remove(h)}return a.each(l,function(b){var a=d.queries[b.qid];a&&(a.distances&&a.distances.remove(b.doc._id),LocalCollection._removeFromResults(a,b.doc))}),a.each(m,function(b){var a=d.queries[b];a&&LocalCollection._recomputeResults(a)}),d._observeQueue.drain(),e=f.length,g&&c.defer(function(){g(null,e)}),e},LocalCollection.prototype.update=function(k,m,d,h){var e=this;!h&&d instanceof Function&&(h=d,d=null),d||(d={});var o=new Minimongo.Matcher(k,e),n={};a.each(e.queries,function(a,c){!a.cursor.skip&&!a.cursor.limit||a.paused||(n[c]=b.clone(a.results))});var l={},g=0;e._eachPossiblyMatchingDoc(k,function(a,c){var b=o.documentMatches(a);return b.result&&(e._saveOriginal(c,a),e._modifyAndNotify(a,m,l,b.arrayIndex),++g,!d.multi)?!1:!0}),a.each(l,function(c,a){var b=e.queries[a];

b&&LocalCollection._recomputeResults(b,n[a])}),e._observeQueue.drain();var j;if(0===g&&d.upsert){var i=LocalCollection._removeDollarOperators(k);LocalCollection._modify(i,m,{isInsert:!0}),!i._id&&d.insertedId&&(i._id=d.insertedId),j=e.insert(i),g=1}var f;return d._returnObject?(f={numberAffected:g},void 0!==j&&(f.insertedId=j)):f=g,h&&c.defer(function(){h(null,f)}),f},LocalCollection.prototype.upsert=function(d,e,b,c){var f=this;return c||"function"!=typeof b||(c=b,b={}),f.update(d,e,a.extend({},b,{upsert:!0,_returnObject:!0}),c)},LocalCollection.prototype._modifyAndNotify=function(c,k,l,j){var f=this,i={};for(var d in f.queries){var a=f.queries[d];i[d]=a.ordered?a.matcher.documentMatches(c).result:a.results.has(c._id)}var m=b.clone(c);LocalCollection._modify(c,k,{arrayIndex:j});for(d in f.queries){a=f.queries[d];var g=i[d],h=a.matcher.documentMatches(c),e=h.result;e&&a.distances&&void 0!==h.distance&&a.distances.set(c._id,h.distance),a.cursor.skip||a.cursor.limit?(g||e)&&(l[d]=!0):g&&!e?LocalCollection._removeFromResults(a,c):!g&&e?LocalCollection._insertInResults(a,c):g&&e&&LocalCollection._updateInResults(a,c,m)}},LocalCollection._insertInResults=function(a,c){var d=b.clone(c);if(delete d._id,a.ordered){if(a.sorter){var f=LocalCollection._insertInSortedList(a.sorter.getComparator({distances:a.distances}),a.results,c),e=a.results[f+1];e=e?e._id:null,a.addedBefore(c._id,d,e)}else a.addedBefore(c._id,d,null),a.results.push(c);a.added(c._id,d)}else a.added(c._id,d),a.results.set(c._id,c)},LocalCollection._removeFromResults=function(a,b){if(a.ordered){var c=LocalCollection._findInOrderedResults(a,b);a.removed(b._id),a.results.splice(c,1)}else{var d=b._id;a.removed(b._id),a.results.remove(d)}},LocalCollection._updateInResults=function(c,d,g){if(!b.equals(d._id,g._id))throw new Error("Can't change a doc's _id while updating");var e=LocalCollection._makeChangedFields(d,g);if(!c.ordered)return void(a.isEmpty(e)||(c.changed(d._id,e),c.results.set(d._id,d)));var h=LocalCollection._findInOrderedResults(c,d);if(a.isEmpty(e)||c.changed(d._id,e),c.sorter){c.results.splice(h,1);var i=LocalCollection._insertInSortedList(c.sorter.getComparator({distances:c.distances}),c.results,d);if(h!==i){var f=c.results[i+1];f=f?f._id:null,c.movedBefore&&c.movedBefore(d._id,f)}}},LocalCollection._recomputeResults=function(a,b){b||(b=a.results),a.distances&&a.distances.clear(),a.results=a.cursor._getRawObjects({ordered:a.ordered,distances:a.distances}),a.paused||LocalCollection._diffQueryChanges(a.ordered,b,a.results,a)},LocalCollection._findInOrderedResults=function(b,c){if(!b.ordered)throw new Error("Can't call _findInOrderedResults on unordered query");for(var a=0;a<b.results.length;a++)if(b.results[a]===c)return a;throw Error("object missing from query")},LocalCollection._binarySearch=function(e,d,f){for(var c=0,a=d.length;a>0;){var b=Math.floor(a/2);e(f,d[c+b])>=0?(c+=b+1,a-=b+1):a=b}return c},LocalCollection._insertInSortedList=function(d,a,b){if(0===a.length)return a.push(b),0;var c=LocalCollection._binarySearch(d,a,b);return a.splice(c,0,b),c},LocalCollection.prototype.saveOriginals=function(){var a=this;if(a._savedOriginals)throw new Error("Called saveOriginals twice without retrieveOriginals");a._savedOriginals=new LocalCollection._IdMap},LocalCollection.prototype.retrieveOriginals=function(){var a=this;if(!a._savedOriginals)throw new Error("Called retrieveOriginals without saveOriginals");var b=a._savedOriginals;return a._savedOriginals=null,b},LocalCollection.prototype._saveOriginal=function(c,d){var a=this;a._savedOriginals&&(a._savedOriginals.has(c)||a._savedOriginals.set(c,b.clone(d)))},LocalCollection.prototype.pauseObservers=function(){if(!this.paused){this.paused=!0;for(var c in this.queries){var a=this.queries[c];a.resultsSnapshot=b.clone(a.results)}}},LocalCollection.prototype.resumeObservers=function(){var b=this;if(this.paused){this.paused=!1;for(var c in this.queries){var a=b.queries[c];LocalCollection._diffQueryChanges(a.ordered,a.resultsSnapshot,a.results,a),a.resultsSnapshot=null}b._observeQueue.drain()}},LocalCollection._idStringify=function(a){if(a instanceof LocalCollection._ObjectID)return a.valueOf();if("string"==typeof a)return""===a?a:"-"===a.substr(0,1)||"~"===a.substr(0,1)||LocalCollection._looksLikeObjectID(a)||"{"===a.substr(0,1)?"-"+a:a;if(void 0===a)return"-";if("object"==typeof a&&null!==a)throw new Error("Meteor does not currently support objects other than ObjectID as ids");return"~"+g.stringify(a)},LocalCollection._idParse=function(a){return""===a?a:"-"===a?void 0:"-"===a.substr(0,1)?a.substr(1):"~"===a.substr(0,1)?g.parse(a.substr(1)):LocalCollection._looksLikeObjectID(a)?new LocalCollection._ObjectID(a):a},LocalCollection._makeChangedFields=function(c,d){var a={};return LocalCollection._diffObjects(d,c,{leftOnly:function(b){a[b]=void 0},rightOnly:function(b,c){a[b]=c},both:function(d,e,c){b.equals(e,c)||(a[d]=c)}}),a},LocalCollection.wrapTransform=function(c){return c?function(e){if(!a.has(e,"_id"))throw new Error("can only transform documents with _id");var f=e._id,d=Deps.nonreactive(function(){return c(e)});if(!isPlainObject(d))throw new Error("transform must return object");if(a.has(d,"_id")){if(!b.equals(d._id,f))throw new Error("transformed document can't have different _id")}else d._id=f;return d}:null},isArray=function(c){return a.isArray(c)&&!b.isBinary(c)},isPlainObject=function(a){return a&&3===LocalCollection._f._type(a)},isIndexable=function(a){return isArray(a)||isPlainObject(a)},isOperatorObject=function(c){if(!isPlainObject(c))return!1;var b=void 0;return a.each(c,function(e,d){var a="$"===d.substr(0,1);if(void 0===b)b=a;else if(b!==a)throw new Error("Inconsistent operator: "+c)}),!!b},isNumericKey=function(a){return/^[0-9]+$/.test(a)},Sorter=function(b){var h=this,d=[];if(b instanceof Array)for(var c=0;c<b.length;c++)d.push("string"==typeof b[c]?{lookup:makeLookupFunction(b[c]),ascending:!0}:{lookup:makeLookupFunction(b[c][0]),ascending:"desc"!==b[c][1]});else{if("object"!=typeof b)throw Error("Bad sort specification: ",g.stringify(b));for(var e in b)d.push({lookup:makeLookupFunction(e),ascending:b[e]>=0})}var f=function(c,d){c=expandArraysInBranches(c,!0);var b=void 0,e=!0;return a.each(c,function(a){if(e)b=a.value,e=!1;else{var c=LocalCollection._f._cmp(b,a.value);(d&&c>0||!d&&0>c)&&(b=a.value)}}),b},i=a.map(d,function(a){return function(c,d){var e=f(a.lookup(c),a.ascending),g=f(a.lookup(d),a.ascending),b=LocalCollection._f._cmp(e,g);return a.ascending?b:-b}});h._baseComparator=u(i)},Sorter.prototype.getComparator=function(b){var c=this;if(!b||!b.distances)return c._baseComparator;var a=b.distances;return u([c._baseComparator,function(b,c){if(!a.has(b._id))throw Error("Missing distance for "+b._id);if(!a.has(c._id))throw Error("Missing distance for "+c._id);return a.get(b._id)-a.get(c._id)}])},MinimongoTest.Sorter=Sorter;var u=function(a){return function(d,e){for(var b=0;b<a.length;++b){var c=a[b](d,e);if(0!==c)return c}return 0}};Minimongo.Matcher=function(b){var a=this;a._paths={},a._hasGeoQuery=!1,a._hasWhere=!1,a._isSimple=!0,a._matchingDocument=void 0,a._selector=null,a._docMatcher=a._compileSelector(b)},a.extend(Minimongo.Matcher.prototype,{documentMatches:function(a){return this._docMatcher(a)},hasGeoQuery:function(){return this._hasGeoQuery},hasWhere:function(){return this._hasWhere},isSimple:function(){return this._isSimple},_compileSelector:function(a){var c=this;if(a instanceof Function)return c._isSimple=!1,c._selector=a,c._recordPathUsed(""),function(b){return{result:!!a.call(b)}};if(LocalCollection._selectorIsId(a))return c._selector={_id:a},c._recordPathUsed("_id"),function(c){return{result:b.equals(c._id,a)}};if(!a||"_id"in a&&!a._id)return c._isSimple=!1,q;if("boolean"==typeof a||isArray(a)||b.isBinary(a))throw new Error("Invalid selector: "+a);return c._selector=b.clone(a),n(a,c,{isRoot:!0})},_recordPathUsed:function(a){this._paths[a]=!0},_getPaths:function(){return a.keys(this._paths)}});var n=function(e,c,b){b=b||{};var d=[];return a.each(e,function(f,e){if("$"===e.substr(0,1)){if(!a.has(r,e))throw new Error("Unrecognized logical operator: "+e);c._isSimple=!1,d.push(r[e](f,c,b.inElemMatch))}else{b.inElemMatch||c._recordPathUsed(e);var g=makeLookupFunction(e),h=i(f,c,b.isRoot);d.push(function(a){var b=g(a);return h(b)})}}),w(d)},i=function(a,b,c){return a instanceof RegExp?(b._isSimple=!1,d(j(a))):isOperatorObject(a)?I(a,b,c):d(k(a))},d=function(c,b){return b=b||{},function(e){var f=e;b.dontExpandLeafArrays||(f=expandArraysInBranches(e,b.dontIncludeLeafArrays));var d={};return d.result=a.any(f,function(a){var b=c(a.value);return"number"==typeof b&&(void 0===a.arrayIndex&&(a.arrayIndex=b),b=!0),b&&void 0!==a.arrayIndex&&(d.arrayIndex=a.arrayIndex),b}),d}},j=function(b){return function(c){return c instanceof RegExp?a.isEqual(c,b):"string"!=typeof c?!1:b.test(c)}},k=function(a){if(isOperatorObject(a))throw Error("Can't create equalityValueSelector for operator object");return null==a?function(a){return null==a}:function(b){return LocalCollection._f._equal(a,b)}},I=function(b,c,f){var e=[];return a.each(b,function(h,g){var j=a.contains(["$lt","$lte","$gt","$gte"],g)&&a.isNumber(h),k="$ne"===g&&!a.isObject(h),l=a.contains(["$in","$nin"],g)&&a.isArray(h)&&!a.any(h,a.isObject);if("$eq"===g||j||l||k||(c._isSimple=!1),a.has(s,g))e.push(s[g](h,b,c,f));else{if(!a.has(o,g))throw new Error("Unrecognized operator: "+g);var i=o[g];"function"==typeof i&&(i={compileElementSelector:i}),e.push(d(i.compileElementSelector(h,b,c),i))}}),x(e)},l=function(b,c,d){if(!isArray(b)||a.isEmpty(b))throw Error("$and/$or/$nor must be nonempty array");return a.map(b,function(a){if(!isPlainObject(a))throw Error("$or/$and/$nor entries need to be full objects");return n(a,c,{inElemMatch:d})})},r={$and:function(a,b,c){var d=l(a,b,c);return w(d)},$or:function(c,d,e){var b=l(c,d,e);return 1===b.length?b[0]:function(c){var d=a.any(b,function(a){return a(c).result});return{result:d}}},$nor:function(b,c,d){var e=l(b,c,d);return function(b){var c=a.all(e,function(a){return!a(b).result});return{result:c}}},$where:function(a,b){return b._recordPathUsed(""),b._hasWhere=!0,a instanceof Function||(a=Function("obj","return "+a)),function(b){return{result:a.call(b,b)}}},$comment:function(){return function(){return{result:!0}}}},h=function(a){return function(b){var c=a(b);return{result:!c.result}}},s={$not:function(a,c,b){return h(i(a,b))},$ne:function(a){return h(d(k(a)))},$nin:function(a){return h(d(o.$in(a)))},$exists:function(b){var a=d(function(a){return void 0!==a});return b?a:h(a)},$options:function(b,a){if(!a.$regex)throw Error("$options needs a $regex");return p},$maxDistance:function(b,a){if(!a.$near)throw Error("$maxDistance needs a $near");return p},$all:function(b,e,d){if(!isArray(b))throw Error("$all requires array");if(a.isEmpty(b))return q;var c=[];return a.each(b,function(a){if(isOperatorObject(a))throw Error("no $ expressions in $all");c.push(i(a,d))}),x(c)},$near:function(b,f,g,h){if(!h)throw Error("$near can't be inside another $ operator");g._hasGeoQuery=!0;var c,d,e;if(isPlainObject(b)&&a.has(b,"$geometry"))c=b.$maxDistance,d=b.$geometry,e=function(a){return a&&a.type?"Point"===a.type?GeoJSON.pointDistance(d,a):GeoJSON.geometryWithinRadius(a,d,c)?0:c+1:null};else{if(c=f.$maxDistance,!isArray(b)&&!isPlainObject(b))throw Error("$near argument must be coordinate pair or GeoJSON");d=m(b),e=function(a){return isArray(a)||isPlainObject(a)?E(d,a):null}}return function(d){d=expandArraysInBranches(d);var b={result:!1};return a.each(d,function(d){var a=e(d.value);null===a||a>c||void 0!==b.distance&&b.distance<=a||(b.result=!0,b.distance=a,void 0===d.arrayIndex?delete b.arrayIndex:b.arrayIndex=d.arrayIndex)}),b}}},E=function(b,c){b=m(b),c=m(c);var d=b[0]-c[0],e=b[1]-c[1];return a.isNaN(d)||a.isNaN(e)?null:Math.sqrt(d*d+e*e)},m=function(b){return a.map(b,a.identity)},f=function(a){return function(b){if(isArray(b))return function(){return!1};void 0===b&&(b=null);var c=LocalCollection._f._type(b);return function(d){return void 0===d&&(d=null),LocalCollection._f._type(d)!==c?!1:a(LocalCollection._f._cmp(d,b))}}},o={$lt:f(function(a){return 0>a}),$gt:f(function(a){return a>0}),$lte:f(function(a){return 0>=a}),$gte:f(function(a){return a>=0}),$mod:function(a){if(!isArray(a)||2!==a.length||"number"!=typeof a[0]||"number"!=typeof a[1])throw Error("argument to $mod must be an array of two numbers");var b=a[0],c=a[1];return function(a){return"number"==typeof a&&a%b===c}},$in:function(c){if(!isArray(c))throw Error("$in needs an array");var b=[];return a.each(c,function(a){if(a instanceof RegExp)b.push(j(a));else{if(isOperatorObject(a))throw Error("cannot nest $ under $in");b.push(k(a))}}),function(c){return void 0===c&&(c=null),a.any(b,function(a){return a(c)})}},$size:{dontExpandLeafArrays:!0,compileElementSelector:function(a){if("string"==typeof a)a=0;else if("number"!=typeof a)throw Error("$size needs a number");return function(b){return isArray(b)&&b.length===a}}},$type:{dontIncludeLeafArrays:!0,compileElementSelector:function(a){if("number"!=typeof a)throw Error("$type needs a number");return function(b){return void 0!==b&&LocalCollection._f._type(b)===a}}},$regex:function(a,b){if(!("string"==typeof a||a instanceof RegExp))throw Error("$regex has to be a string or RegExp");var c;if(void 0!==b.$options){if(/[^gim]/.test(b.$options))throw new Error("Only the i, m, and g regexp options are supported");var d=a instanceof RegExp?a.source:a;c=new RegExp(d,b.$options)}else c=a instanceof RegExp?a:new RegExp(a);return j(c)},$elemMatch:{dontExpandLeafArrays:!0,compileElementSelector:function(a,e,d){if(!isPlainObject(a))throw Error("$elemMatch need an object");var b,c;return isOperatorObject(a)?(b=i(a,d),c=!1):(b=n(a,d,{inElemMatch:!0}),c=!0),function(e){if(!isArray(e))return!1;for(var a=0;a<e.length;++a){var f,d=e[a];if(c){if(!isPlainObject(d)&&!isArray(d))return!1;f=d}else f=[{value:d,dontIterate:!0}];if(b(f).result)return a}return!1}}}};makeLookupFunction=function(f){var b,c=f.split("."),d=c.length?c[0]:"",g=isNumericKey(d);c.length>1&&(b=makeLookupFunction(c.slice(1).join(".")));var e=function(a){return a.dontIterate||delete a.dontIterate,void 0===a.arrayIndex&&delete a.arrayIndex,a};return function(h,c){if(isArray(h)){if(!(g&&d<h.length))return[];void 0===c&&(c=+d)}var f=h[d];if(!b)return[e({value:f,dontIterate:isArray(h)&&isArray(f),arrayIndex:c})];if(!isIndexable(f))return isArray(h)?[]:[e({value:void 0,arrayIndex:c})];var i=[],j=function(a){Array.prototype.push.apply(i,a)};return j(b(f,c)),isArray(f)&&a.each(f,function(a,d){isPlainObject(a)&&j(b(a,void 0===c?d:c))}),i}},MinimongoTest.makeLookupFunction=makeLookupFunction,expandArraysInBranches=function(c,d){var b=[];return a.each(c,function(c){var e=isArray(c.value);d&&e&&!c.dontIterate||b.push({value:c.value,arrayIndex:c.arrayIndex}),e&&!c.dontIterate&&a.each(c.value,function(a,d){b.push({value:a,arrayIndex:void 0===c.arrayIndex?d:c.arrayIndex})})}),b};var q=function(){return{result:!1}},p=function(){return{result:!0}},v=function(b){return 0===b.length?p:1===b.length?b[0]:function(d){var c={};return c.result=a.all(b,function(b){var a=b(d);return a.result&&void 0!==a.distance&&void 0===c.distance&&(c.distance=a.distance),a.result&&void 0!==a.arrayIndex&&(c.arrayIndex=a.arrayIndex),a.result}),c.result||(delete c.distance,delete c.arrayIndex),c}},w=v,x=v;LocalCollection._f={_type:function(a){return"number"==typeof a?1:"string"==typeof a?2:"boolean"==typeof a?8:isArray(a)?4:null===a?10:a instanceof RegExp?11:"function"==typeof a?13:a instanceof Date?9:b.isBinary(a)?5:a instanceof LocalCollection._ObjectID?7:3},_equal:function(a,c){return b.equals(a,c,{keyOrderSensitive:!0})},_typeorder:function(a){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][a]},_cmp:function(b,a){if(void 0===b)return void 0===a?0:-1;if(void 0===a)return 1;var c=LocalCollection._f._type(b),e=LocalCollection._f._type(a),f=LocalCollection._f._typeorder(c),g=LocalCollection._f._typeorder(e);if(f!==g)return g>f?-1:1;if(c!==e)throw Error("Missing type coercion logic in _cmp");if(7===c&&(c=e=2,b=b.toHexString(),a=a.toHexString()),9===c&&(c=e=1,b=b.getTime(),a=a.getTime()),1===c)return b-a;if(2===e)return a>b?-1:b===a?0:1;if(3===c){var h=function(b){var a=[];for(var c in b)a.push(c),a.push(b[c]);return a};return LocalCollection._f._cmp(h(b),h(a))}if(4===c)for(var d=0;;d++){if(d===b.length)return d===a.length?0:-1;if(d===a.length)return 1;var i=LocalCollection._f._cmp(b[d],a[d]);if(0!==i)return i}if(5===c){if(b.length!==a.length)return b.length-a.length;for(d=0;d<b.length;d++){if(b[d]<a[d])return-1;if(b[d]>a[d])return 1}return 0}if(8===c)return b?a?0:1:a?-1:0;if(10===c)return 0;if(11===c)throw Error("Sorting not supported on regular expression");if(13===c)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},LocalCollection._removeDollarOperators=function(b){var c={};for(var a in b)"$"!==a.substr(0,1)&&(c[a]=b[a]);return c},LocalCollection._diffQueryChanges=function(d,a,b,c){d?LocalCollection._diffQueryOrderedChanges(a,b,c):LocalCollection._diffQueryUnorderedChanges(a,b,c)},LocalCollection._diffQueryUnorderedChanges=function(c,d,a){if(a.movedBefore)throw new Error("_diffQueryUnordered called with a movedBefore observer!");d.forEach(function(d,f){var e=c.get(f);if(e)a.changed&&!b.equals(e,d)&&a.changed(f,LocalCollection._makeChangedFields(d,e));else if(a.added){var g=b.clone(d);delete g._id,a.added(d._id,g)}}),a.removed&&c.forEach(function(c,b){d.has(b)||a.removed(b)})},LocalCollection._diffQueryOrderedChanges=function(j,e,d){var o={};a.each(e,function(a){o[a._id]&&c._debug("Duplicate _id in new_results"),o[a._id]=!0});var g={};a.each(j,function(a,b){a._id in g&&c._debug("Duplicate _id in old_results"),g[a._id]=b});for(var k=[],i=0,n=e.length,l=new Array(n),q=new Array(n),p=function(a){return g[e[a]._id]},h=0;n>h;h++)if(void 0!==g[e[h]._id]){for(var f=i;f>0&&!(p(l[f-1])<p(h));)f--;q[h]=0===f?-1:l[f-1],l[f]=h,f+1>i&&(i=f+1)}for(var m=0===i?-1:l[i-1];m>=0;)k.push(m),m=q[m];k.reverse(),k.push(e.length),a.each(j,function(a){o[a._id]||d.removed&&d.removed(a._id)});var r=0;a.each(k,function(h){for(var i,c,f,k=e[h]?e[h]._id:null,l=r;h>l;l++)c=e[l],a.has(g,c._id)?(i=j[g[c._id]],f=LocalCollection._makeChangedFields(c,i),a.isEmpty(f)||d.changed&&d.changed(c._id,f),d.movedBefore&&d.movedBefore(c._id,k)):(f=b.clone(c),delete f._id,d.addedBefore&&d.addedBefore(c._id,f,k),d.added&&d.added(c._id,f));k&&(c=e[h],i=j[g[c._id]],f=LocalCollection._makeChangedFields(c,i),a.isEmpty(f)||d.changed&&d.changed(c._id,f)),r=h+1})},LocalCollection._diffObjects=function(d,c,b){a.each(d,function(e,d){a.has(c,d)?b.both&&b.both(d,e,c[d]):b.leftOnly&&b.leftOnly(d,e)}),b.rightOnly&&a.each(c,function(e,c){a.has(d,c)||b.rightOnly(c,e)})},LocalCollection._modify=function(d,c,e){if(e=e||{},!isPlainObject(c))throw MinimongoError("Modifier must be an object");var f,g=isOperatorObject(c);if(g)f=b.clone(d),a.each(c,function(d,b){var c=A[b];if(e.isInsert&&"$setOnInsert"===b&&(c=A.$set),!c)throw MinimongoError("Invalid modifier specified "+b);a.each(d,function(h,d){if(d.length&&"."===d[d.length-1])throw MinimongoError("Invalid mod field name, may not end in a period");if("_id"===d)throw MinimongoError("Mod on _id not allowed");var g=d.split("."),i=(a.has(z,b),y(f,g,{noCreate:z[b],forbidArray:"$rename"===b,arrayIndex:e.arrayIndex})),j=g.pop();c(i,j,h,d,f)})});else{if(c._id&&!b.equals(d._id,c._id))throw MinimongoError("Cannot change the _id of a document");for(var h in c)if(/\./.test(h))throw MinimongoError("When replacing document, field name may not contain '.'");f=c}a.each(a.keys(d),function(a){("_id"!==a||e.isInsert)&&delete d[a]}),a.each(f,function(a,b){d[b]=a})};var y=function(b,e,c){c=c||{};for(var h=!1,d=0;d<e.length;d++){var f=d===e.length-1,a=e[d],j=isIndexable(b);if(!j){if(c.noCreate)return void 0;var i=MinimongoError("cannot use the part '"+a+"' to traverse "+b);throw i.setPropertyError=!0,i}if(b instanceof Array){if(c.forbidArray)return null;if("$"===a){if(h)throw MinimongoError("Too many positional (i.e. '$') elements");if(void 0===c.arrayIndex)throw MinimongoError("The positional operator did not find the match needed from the query");a=c.arrayIndex,h=!0}else{if(!isNumericKey(a)){if(c.noCreate)return void 0;throw MinimongoError("can't append to array using string field name ["+a+"]")}a=parseInt(a)}if(f&&(e[d]=a),c.noCreate&&a>=b.length)return void 0;for(;b.length<a;)b.push(null);if(!f)if(b.length===a)b.push({});else if("object"!=typeof b[a])throw MinimongoError("can't modify field '"+e[d+1]+"' of list value "+g.stringify(b[a]))}else{if(a.length&&"$"===a.substr(0,1))throw MinimongoError("can't set field named "+a);if(!(a in b)){if(c.noCreate)return void 0;f||(b[a]={})}}if(f)return b;b=b[a]}},z={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},A={$inc:function(a,b,c){if("number"!=typeof c)throw MinimongoError("Modifier $inc allowed for numbers only");if(b in a){if("number"!=typeof a[b])throw MinimongoError("Cannot apply $inc modifier to non-number");a[b]+=c}else a[b]=c},$set:function(d,e,f){if(!a.isObject(d)){var c=MinimongoError("Cannot set property on non-object field");throw c.setPropertyError=!0,c}if(null===d){var c=MinimongoError("Cannot set property on null");throw c.setPropertyError=!0,c}d[e]=b.clone(f)},$setOnInsert:function(){},$unset:function(a,b){void 0!==a&&(a instanceof Array?b in a&&(a[b]=null):delete a[b])},$push:function(c,d,a){if(void 0===c[d]&&(c[d]=[]),!(c[d]instanceof Array))throw MinimongoError("Cannot apply $push modifier to non-array");if(!a||!a.$each)return void c[d].push(b.clone(a));var e=a.$each;if(!(e instanceof Array))throw MinimongoError("$each must be an array");var f=void 0;if("$slice"in a){if("number"!=typeof a.$slice)throw MinimongoError("$slice must be a numeric value");if(a.$slice>0)throw MinimongoError("$slice in $push must be zero or negative");f=a.$slice}var g=void 0;if(a.$sort){if(void 0===f)throw MinimongoError("$sort requires $slice to be present");g=new Sorter(a.$sort).getComparator();for(var h=0;h<e.length;h++)if(3!==LocalCollection._f._type(e[h]))throw MinimongoError("$push like modifiers using $sort require all elements to be objects")}for(var i=0;i<e.length;i++)c[d].push(b.clone(e[i]));g&&c[d].sort(g),void 0!==f&&(c[d]=0===f?[]:c[d].slice(f))},$pushAll:function(d,e,a){if(!("object"==typeof a&&a instanceof Array))throw MinimongoError("Modifier $pushAll/pullAll allowed for arrays only");var b=d[e];if(void 0===b)d[e]=a;else{if(!(b instanceof Array))throw MinimongoError("Cannot apply $pushAll modifier to non-array");for(var c=0;c<a.length;c++)b.push(a[c])}},$addToSet:function(e,f,c){var d=e[f];if(void 0===d)e[f]=[c];else{if(!(d instanceof Array))throw MinimongoError("Cannot apply $addToSet modifier to non-array");var g=!1;if("object"==typeof c)for(var h in c){"$each"===h&&(g=!0);break}var i=g?c.$each:[c];a.each(i,function(c){for(var a=0;a<d.length;a++)if(LocalCollection._f._equal(c,d[a]))return;d.push(b.clone(c))})}},$pop:function(b,d,c){if(void 0!==b){var a=b[d];if(void 0!==a){if(!(a instanceof Array))throw MinimongoError("Cannot apply $pop modifier to non-array");"number"==typeof c&&0>c?a.splice(0,1):a.pop()}}},$pull:function(d,f,c){if(void 0!==d){var a=d[f];if(void 0!==a){if(!(a instanceof Array))throw MinimongoError("Cannot apply $pull/pullAll modifier to non-array");var e=[];if("object"!=typeof c||c instanceof Array)for(var b=0;b<a.length;b++)LocalCollection._f._equal(a[b],c)||e.push(a[b]);else for(var g=new Minimongo.Matcher(c),b=0;b<a.length;b++)g.documentMatches(a[b]).result||e.push(a[b]);d[f]=e}}},$pullAll:function(d,f,b){if(!("object"==typeof b&&b instanceof Array))throw MinimongoError("Modifier $pushAll/pullAll allowed for arrays only");if(void 0!==d){var a=d[f];if(void 0!==a){if(!(a instanceof Array))throw MinimongoError("Cannot apply $pull/pullAll modifier to non-array");for(var g=[],c=0;c<a.length;c++){for(var h=!1,e=0;e<b.length;e++)if(LocalCollection._f._equal(a[c],b[e])){h=!0;break}h||g.push(a[c])}d[f]=g}}},$rename:function(a,c,b,f,g){if(f===b)throw MinimongoError("$rename source must differ from target");if(null===a)throw MinimongoError("$rename source field invalid");if("string"!=typeof b)throw MinimongoError("$rename target must be a string");if(void 0!==a){var h=a[c];delete a[c];var d=b.split("."),e=y(g,d,{forbidArray:!0});if(null===e)throw MinimongoError("$rename target field invalid");var i=d.pop();e[i]=h}},$bit:function(){throw MinimongoError("$bit is not supported")}};LocalCollection._looksLikeObjectID=function(a){return 24===a.length&&a.match(/^[0-9a-f]*$/)},LocalCollection._ObjectID=function(a){var b=this;if(a){if(a=a.toLowerCase(),!LocalCollection._looksLikeObjectID(a))throw new Error("Invalid hexadecimal string for creating an ObjectID");b._str=a}else b._str=G.hexString(24)},LocalCollection._ObjectID.prototype.toString=function(){var a=this;return'ObjectID("'+a._str+'")'},LocalCollection._ObjectID.prototype.equals=function(a){var b=this;return a instanceof LocalCollection._ObjectID&&b.valueOf()===a.valueOf()},LocalCollection._ObjectID.prototype.clone=function(){var a=this;return new LocalCollection._ObjectID(a._str)},LocalCollection._ObjectID.prototype.typeName=function(){return"oid"},LocalCollection._ObjectID.prototype.getTimestamp=function(){var a=this;return parseInt(a._str.substr(0,8),16)},LocalCollection._ObjectID.prototype.valueOf=LocalCollection._ObjectID.prototype.toJSONValue=LocalCollection._ObjectID.prototype.toHexString=function(){return this._str},LocalCollection._selectorIsId=function(a){return"string"==typeof a||"number"==typeof a||a instanceof LocalCollection._ObjectID},LocalCollection._selectorIsIdPerhapsAsObject=function(b){return LocalCollection._selectorIsId(b)||b&&"object"==typeof b&&b._id&&LocalCollection._selectorIsId(b._id)&&1===a.size(b)},LocalCollection._idsMatchedBySelector=function(b){if(LocalCollection._selectorIsId(b))return[b];if(!b)return null;if(a.has(b,"_id"))return LocalCollection._selectorIsId(b._id)?[b._id]:b._id&&b._id.$in&&a.isArray(b._id.$in)&&!a.isEmpty(b._id.$in)&&a.all(b._id.$in,LocalCollection._selectorIsId)?b._id.$in:null;if(b.$and&&a.isArray(b.$and))for(var c=0;c<b.$and.length;++c){var d=LocalCollection._idsMatchedBySelector(b.$and[c]);if(d)return d}return null},b.addType("oid",function(a){return new ObjectID(a)}),LocalCollection._ObjectID=J,LocalCollection._IdMap=function(){var a=this;a._map={}},a.extend(LocalCollection._IdMap.prototype,{get:function(a){var b=this,c=LocalCollection._idStringify(a);return b._map[c]},set:function(a,b){var c=this,d=LocalCollection._idStringify(a);c._map[d]=b},remove:function(a){var b=this,c=LocalCollection._idStringify(a);delete b._map[c]},has:function(b){var c=this,d=LocalCollection._idStringify(b);return a.has(c._map,d)},empty:function(){var b=this;return a.isEmpty(b._map)},clear:function(){var a=this;a._map={}},forEach:function(e){for(var d=this,c=a.keys(d._map),b=0;b<c.length;b++){var f=e.call(null,d._map[c[b]],LocalCollection._idParse(c[b]));if(f===!1)return}},size:function(){var b=this;return a.size(b._map)},setDefault:function(e,d){var b=this,c=LocalCollection._idStringify(e);return a.has(b._map,c)?b._map[c]:(b._map[c]=d,d)},clone:function(){var c=this,a=new LocalCollection._IdMap;return c.forEach(function(c,d){a.set(d,b.clone(c))}),a}}),LocalCollection._compileProjection=function(c){LocalCollection._checkSupportedProjection(c);var f=a.isUndefined(c._id)?!0:c._id,d=projectionDetails(c),e=function(c,g){if(a.isArray(c))return a.map(c,function(a){return e(a,g)});var f=d.including?{}:b.clone(c);return a.each(g,function(h,g){a.has(c,g)&&(a.isObject(h)?a.isObject(c[g])&&(f[g]=e(c[g],h)):d.including?f[g]=b.clone(c[g]):delete f[g])}),f};return function(c){var b=e(c,d.tree);return f&&a.has(c,"_id")&&(b._id=c._id),!f&&a.has(b,"_id")&&delete b._id,b}},projectionDetails=function(d){var b=a.keys(d).sort();b.length>0&&(1!==b.length||"_id"!==b[0])&&(b=a.reject(b,function(a){return"_id"===a}));var c=null;a.each(b,function(b){var a=!!d[b];if(null===c&&(c=a),c!==a)throw MinimongoError("You cannot currently mix including and excluding fields.")});var e=pathsToTree(b,function(){return c},function(e,a,b){var c=b,d=a;throw MinimongoError("both "+c+" and "+d+" found in fields option, using both of them may trigger unexpected behavior. Did you mean to use only one of them?")});return{tree:e,including:c}},pathsToTree=function(d,e,c,b){return b=b||{},a.each(d,function(f){var d=b,g=f.split("."),i=a.all(g.slice(0,-1),function(b,e){if(a.has(d,b)){if(!a.isObject(d[b])&&(d[b]=c(d[b],g.slice(0,e+1).join("."),f),!a.isObject(d[b])))return!1}else d[b]={};return d=d[b],!0});if(i){var h=a.last(g);d[h]=a.has(d,h)?c(d[h],f,f):e(f)}}),b},LocalCollection._checkSupportedProjection=function(b){if(!a.isObject(b)||a.isArray(b))throw MinimongoError("fields option must be an object");a.each(b,function(b,c){if(a.contains(c.split("."),"$"))throw MinimongoError("Minimongo doesn't support $ operator in projections yet.");if(-1===a.indexOf([1,0,!0,!1],b))throw MinimongoError("Projection values should be one of 1, 0, true, or false")})},Minimongo.Matcher.prototype.combineIntoProjection=function(g){var h=this,d=h._getPathsElidingNumericKeys();if(a.contains(d,""))return{};var e=projectionDetails(g),b=e.tree,c={};if(b=pathsToTree(d,function(){return!0},function(){return!0},b),c=B(b),e.including)return c;var f={};return a.each(c,function(a,b){a||(f[b]=!1)}),f},Minimongo.Matcher.prototype._getPathsElidingNumericKeys=function(){var b=this;return a.map(b._getPaths(),function(b){return a.reject(b.split("."),isNumericKey).join(".")})};var B=function(d,b){b=b||"";var c={};return a.each(d,function(d,e){a.isObject(d)?a.extend(c,B(d,b+e+".")):c[b+e]=d}),c};Minimongo.Matcher.prototype.affectedByModifier=function(b){var c=this;b=a.extend({$set:{},$unset:{}},b);var d=a.keys(b.$set).concat(a.keys(b.$unset)),e=c._getPaths();return a.any(d,function(c){var b=c.split(".");return a.any(e,function(e){for(var d=e.split("."),c=0,a=0;c<d.length&&a<b.length;)if(isNumericKey(d[c])&&isNumericKey(b[a])){if(d[c]!==b[a])return!1;c++,a++}else{if(isNumericKey(d[c]))return!1;if(isNumericKey(b[a]))a++;else{if(d[c]!==b[a])return!1;c++,a++}}return!0})})},Minimongo.Matcher.prototype.canBecomeTrueByModifier=function(c){var d=this;if(!this.affectedByModifier(c))return!1;c=a.extend({$set:{},$unset:{}},c);var g=a.keys(c.$set).concat(a.keys(c.$unset));if(!d.isSimple())return!0;if(a.any(d._getPaths(),D)||a.any(g,D))return!0;var h=a.any(d._selector,function(b,c){return isOperatorObject(b)?a.any(g,function(a){return F(a,c+".")}):!1});if(h)return!1;var e=b.clone(d.matchingDocument());if(null===e)return!0;try{LocalCollection._modify(e,c)}catch(f){if("MinimongoError"===f.name&&f.setPropertyError)return!1;throw f}return d.documentMatches(e).result},Minimongo.Matcher.prototype.matchingDocument=function(){var b=this;if(void 0!==b._matchingDocument)return b._matchingDocument;var c=!1;return b._matchingDocument=pathsToTree(b._getPaths(),function(h){var d=b._selector[h];if(isOperatorObject(d)){if(d.$in){var i=new Minimongo.Matcher({placeholder:d});return a.find(d.$in,function(a){return i.documentMatches({placeholder:a}).result})}if(C(d,["$gt","$gte","$lt","$lte"])){var e=-(1/0),f=1/0;a.each(["$lte","$lt"],function(b){a.has(d,b)&&d[b]<f&&(f=d[b])}),a.each(["$gte","$gt"],function(b){a.has(d,b)&&d[b]>e&&(e=d[b])});var g=(e+f)/2,i=new Minimongo.Matcher({placeholder:d});return i.documentMatches({placeholder:g}).result||g!==e&&g!==f||(c=!0),g}if(C(d,["$nin"," $ne"]))return{};c=!0}return b._selector[h]},a.identity),c&&(b._matchingDocument=null),b._matchingDocument};var C=function(b,c){return a.all(b,function(d,b){return a.contains(c,b)})},D=function(b){return a.any(b.split("."),isNumericKey)},F=function(b,a){return b.length>=a.length&&b.substring(0,a.length)===a};H.exports=LocalCollection},{"./BetterObjectId.js":1,"./ejson.js":3,"./random.js":7,JSON2:10,lodash:37}],7:[function(a,b){(function(a){Random={},Random._Alea=function(){
function a(){var a=4022871197,b=function(c){c=c.toString();for(var d=0;d<c.length;d++){a+=c.charCodeAt(d);var b=.02519603282416938*a;a=b>>>0,b-=a,b*=a,a=b>>>0,b-=a,a+=4294967296*b}return 2.3283064365386963e-10*(a>>>0)};return b.version="Mash 0.9",b}return function(c){var e=0,f=0,g=0,i=1;0==c.length&&(c=[+new Date]);var d=a();e=d(" "),f=d(" "),g=d(" ");for(var h=0;h<c.length;h++)e-=d(c[h]),0>e&&(e+=1),f-=d(c[h]),0>f&&(f+=1),g-=d(c[h]),0>g&&(g+=1);d=null;var b=function(){var a=2091639*e+2.3283064365386963e-10*i;return e=f,f=g,g=a-(i=0|a)};return b.uint32=function(){return 4294967296*b()},b.fract53=function(){return b()+1.1102230246251565e-16*(2097152*b()|0)},b.version="Alea 0.9",b.args=c,b}(Array.prototype.slice.call(arguments))};var c="undefined"!=typeof window&&window.innerHeight||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientHeight||"undefined"!=typeof document&&document.body&&document.body.clientHeight||1,d="undefined"!=typeof window&&window.innerWidth||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientWidth||"undefined"!=typeof document&&document.body&&document.body.clientWidth||1,e="undefined"!=typeof navigator&&navigator.userAgent||"",f="undefined"!=typeof a&&a.pid||1;Random.fraction=new Random._Alea([new Date,c,d,e,f,Math.random()]),Random.choice=function(a){var b=Math.floor(Random.fraction()*a.length);return"string"==typeof a?a.substr(b,1):a[b]};var g="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz";Random.id=function(){for(var b=[],a=0;17>a;a++)b[a]=Random.choice(g);return b.join("")};Random.hexString=function(c){for(var a=[],b=0;c>b;++b)a.push(Random.choice("0123456789abcdef"));return a.join("")},b.exports=Random}).call(this,a("_process"))},{_process:20}],8:[function(a,b){(function(e){var c=a("lodash"),i=a("./lib/minimongo.js"),j=a("socket.io-client"),g=a("socket.io-stream"),l=a("murmurhash-js"),h=a("./lib/cookie.js"),d=a("./lib/hyperstore_utils.js"),m=a("hyperyun-mongomatcher"),f=new(a("./permissionCode/permissionCode.js")),n=a("validator"),k=function(){function k(b,a){"totalSilence"!=p&&(a||(a=""),c.contains(p,a))}function q(b,a){"totalSilence"!=p&&(a||(a=""),c.contains(p,a))}function o(b,a){"totalSilence"!=p&&(a||(a=""),c.contains(p,a))}function r(a,d,b){if(c.isPlainObject(a)){if(!a.bw_doc||!d||a.bw_doc&&d(a.bw_doc)){var e=c.transform(a,function(e,f,c){(!b||b&&b(a.bw_doc,c))&&(e[c]=r(f,d,b))});return e}return void 0}return c.isArray(a)?c.map(a,function(a){return r(a,d,b)}):a}function s(a){return r(a,void 0,function(b,a){return"bw_doc"!=a})}if(!b)var b={};b.COMPANY_DOMAIN="hyperyun.com",b._version=a("./package.json").version,b._clientInfo={hyperyun_version:b._version},"undefined"!=typeof window&&(window.screen&&(b._clientInfo.client="browser",b._clientInfo.screen={},window.screen.height&&(b._clientInfo.screen.height=window.screen.height),window.screen.width&&(b._clientInfo.screen.width=window.screen.width)),window.location&&window.location.origin&&(b._clientInfo.location={origin:window.location.origin}),window.navigator&&(b._clientInfo.navigator={},window.navigator.userAgent&&(b._clientInfo.navigator.userAgent=window.navigator.userAgent),window.navigator.language&&(b._clientInfo.navigator.language=window.navigator.language||window.navigator.userLanguage))),"undefined"!=typeof e&&(e.version&&(b._clientInfo.version=e.version,b._clientInfo.client="nodejs"),e.versions&&(b._clientInfo.versions=e.versions),e.platform&&(b._clientInfo.platform=e.platform)),b.Logger={_session_id:null,_unsentLogs:[],_logs:[],config:{track:{Error:!0,EvalError:!0,InternalError:!0,RangeError:!0,ReferenceError:!0,SyntaxError:!0,TypeError:!0,URIError:!0,window:!0,node:!1,console:{log:!1,error:!1,warn:!1,info:!1}},loggerConsole:!0}},b.Logger.handleError=function(a,c,d,e){a||(a=null),c||(c=null),d||(d=null),e||a&&(e=b.Logger.identifyError(a)),b.Logger.sendLog({message:a,file:c,lineNumber:d,severity:e})},b.Logger.sendLog=function(a){b.Logger._logs.push(a),b.Hyperstore&&b.Hyperstore.hyperyunLogs&&b.Logger._session_id?b.Hyperstore.hyperyunLogs.update({_id:b.Logger._session_id},{$push:{logs:a}}):b.Logger._unsentLogs.push(a)},b.Logger.identifyError=function(c){for(var b=["EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError","Error"],a=0;a<b.length;a++)if(c.search(b[a])>=0)return b[a];return"Unknown Error"},"undefined"==typeof window||"undefined"!=typeof disableHyperyunLogger&&disableHyperyunLogger||(b.Logger.Bugsnag=a("./lib/logger.js")),"undefined"==typeof e||!e.on||"undefined"!=typeof disableHyperyunLogger&&disableHyperyunLogger||e.on("uncaughtException",function(a){b.Logger.config.track.process&&b.Logger.handleError(a.stack,null,null,b.Logger.identifyError(a.toString()),function(){throw a})}),b.Analytics={_session_id:null,_events:[],_unsentEvents:[]},b.Analytics.track=function(a,c){b.Analytics._events.push({name:a,data:c}),b.Hyperstore&&b.Hyperstore.hyperyunTracking&&b.Analytics._session_id?b.Hyperstore.hyperyunTracking.update({_id:b.Analytics._session_id},{$push:{events:{name:a,data:c}}}):b.Analytics._unsentEvents.push({name:a,data:c})},b.Hyperstore=function(f,a,g){if(b.Hyperstore){if(a||(a={}),c.isString(f)){var e=d.breakServerURLIntoObject(f),h=e.collection,i=e.application;a.fullserverurl=e.toString(),a.server=a.server?a.server:e.host}else var h=a.collection,i=a.appName;var j=b.Hyperstore.initialize(i,[h],a,void 0,h);return setTimeout(function(){g&&g(b.Hyperstore.wireID)},5),j}},b.Hyperstore.initialize=function(g,e,f,a,j){function d(b){return c.bind(c.partial(b,e[0]),a._hyperstore)}function d(b){return c.bind(c.partial(b,e[0]),a._hyperstore)}var k=b.COMPANY_DOMAIN,h=!1;e||(e=[]),b.Hyperstore.apps||(h=!0,b.Hyperstore.apps={}),a||(a=b.Hyperstore.apps[g]=b.Hyperstore.apps[g]?b.Hyperstore.apps[g]:{}),c.contains(e,"hyperyunLogs")||e.push("hyperyunLogs"),c.contains(e,"hyperyunTracking")||e.push("hyperyunTracking"),c.contains(e,"users")||e.push("users"),c.contains(e,"hyperyunAdmins")||e.push("hyperyunAdmins"),e=c.compact(c.unique(e)),f||(f={}),f.server=f.server?f.server:k;var i=f.fullserverurl?f.fullserverurl:g+"."+f.server;return a._hyperstore||(a._hyperstore=new b._Hyperstore(i,f)),a._hyperstore.application=a,e=c.filter(e,function(b){return!c.find(a.collections,function(a){return a.collName==b&&a.server==i})}),a.collections=c.compact(c.union(a.collections,c.map(e,function(a){return{collName:a,server:i}}))),c.each(c.compact(e),function(d){var e=new b.Hyperstore.SwitchBoard(a,a._hyperstore,d);a[d]=e,h&&(b.Hyperstore[d]=a[d]),a._hyperstore._unstashFromLocalStorage(d,c.bind(a._hyperstore._registerCollectionAfterUnstash,a._hyperstore))}),a._hyperstore._checkLogin(function(b){b&&(a._hyperstore.user=b),a._hyperstore.trigger(void 0,"connect")}),c.size(e)>0&&(a._debug=a._hyperstore._debug,a.on=d(a._hyperstore.on),a.trigger=d(a._hyperstore.trigger),a.getUser=d(a._hyperstore.getUser),a.createUser=d(a._hyperstore.createUser),a.activate=d(a._hyperstore.activate),a.login=d(a._hyperstore.login),a.logout=d(a._hyperstore.logout),a.changePassword=d(a._hyperstore.changePassword),a.forgotPassword=d(a._hyperstore.forgotPassword),a.generateAPIKey=d(a._hyperstore.generateAPIKey),a._getAppOwnerTargets=d(a._hyperstore._getAppOwnerTargets),a._retrieveLoginCredentials=d(a._hyperstore._retrieveLoginCredentials),a.requestApplicationStatistics=d(a._hyperstore.requestApplicationStatistics)),Object.__defineGetter__?a.__defineGetter__("user",function(){return a._hyperstore.user}):(a._hyperstore.bruteUserAliasEnabled||(a._hyperstore.bruteUserAliasEnabled=[]),a._hyperstore.bruteUserAliasEnabled.push(a)),h&&(b.Hyperstore._debug=a._hyperstore._debug,b.Hyperstore.on=d(a._hyperstore.on),b.Hyperstore.trigger=d(a._hyperstore.trigger),b.Hyperstore.getUser=d(a._hyperstore.getUser),b.Hyperstore.createUser=d(a._hyperstore.createUser),b.Hyperstore.activate=d(a._hyperstore.activate),b.Hyperstore.login=d(a._hyperstore.login),b.Hyperstore.logout=d(a._hyperstore.logout),b.Hyperstore.changePassword=d(a._hyperstore.changePassword),b.Hyperstore.forgotPassword=d(a._hyperstore.forgotPassword),b.Hyperstore.generateAPIKey=d(a._hyperstore.generateAPIKey),b.Hyperstore.requestApplicationStatistics=d(a._hyperstore.requestApplicationStatistics),b.Hyperstore._getAppOwnerTargets=d(a._hyperstore._getAppOwnerTargets),b.Hyperstore._retrieveLoginCredentials=d(a._hyperstore._retrieveLoginCredentials),Object.__defineGetter__?b.Hyperstore.__defineGetter__("user",function(){return a._hyperstore.user}):(a._hyperstore.bruteUserAliasEnabled||(a._hyperstore.bruteUserAliasEnabled=[]),a._hyperstore.bruteUserAliasEnabled.push(b.Hyperstore))),j?a[j]:a},b.Hyperstore.SwitchBoard=function(a,b,d){this.collection=d,this.hyperstore=b,Object.__defineGetter__?this.__defineGetter__("user",function(){return a._hyperstore.user}):(a._hyperstore.bruteUserAliasEnabled||(a._hyperstore.bruteUserAliasEnabled=[]),a._hyperstore.bruteUserAliasEnabled.push(a)),this.resetReactivity=c.bind(c.partial(this.hyperstore.resetReactivity,this.collection),this.hyperstore),this.generateAPIKey=c.bind(c.partial(this.hyperstore.generateAPIKey,this.collection),this.hyperstore),this.requestApplicationStatistics=c.bind(c.partial(this.hyperstore.requestApplicationStatistics,this.collection),this.hyperstore),this.findOne=c.bind(c.partial(this.hyperstore.findOne,this.collection),this.hyperstore),this.find=c.bind(c.partial(this.hyperstore.find,this.collection),this.hyperstore),this.insert=c.bind(c.partial(this.hyperstore.insert,this.collection),this.hyperstore),this.update=c.bind(c.partial(this.hyperstore.update,this.collection),this.hyperstore),this.remove=c.bind(c.partial(this.hyperstore.remove,this.collection),this.hyperstore),this.subscribe=c.bind(c.partial(this.hyperstore.subscribe,this.collection),this.hyperstore),this.emit=c.bind(c.partial(this.hyperstore.emit,this.collection),this.hyperstore),this.on=c.bind(c.partial(this.hyperstore.on,this.collection),this.hyperstore),this.trigger=c.bind(c.partial(this.hyperstore.trigger,this.collection),this.hyperstore),this.createUser=c.bind(c.partial(this.hyperstore.createUser,this.collection),this.hyperstore),this.getUser=c.bind(c.partial(this.hyperstore.getUser,this.collection),this.hyperstore),this.sendAnalyticsEvent=c.bind(c.partial(this.hyperstore.sendAnalyticsEvent,this.collection),this.hyperstore),this.pingLogin=c.bind(c.partial(this.hyperstore.pingLogin,this.collection),this.hyperstore),this.login=c.bind(c.partial(this.hyperstore.login,this.collection),this.hyperstore),this.logout=c.bind(c.partial(this.hyperstore.logout,this.collection),this.hyperstore),this.changePassword=c.bind(c.partial(this.hyperstore.changePassword,this.collection),this.hyperstore),this.forgotPassword=c.bind(c.partial(this.hyperstore.forgotPassword,this.collection),this.hyperstore),this.activate=c.bind(c.partial(this.hyperstore.activate,this.collection),this.hyperstore),this.removeFile=c.bind(c.partial(this.hyperstore.removeFile,this.collection),this.hyperstore),this.upload=c.bind(c.partial(this.hyperstore.upload,this.collection),this.hyperstore),this.cancelUpload=c.bind(c.partial(this.hyperstore.cancelUpload,this.collection),this.hyperstore),this.forceFind=c.bind(c.partial(this.hyperstore.forceFind,this.collection),this.hyperstore),this.closeFind=c.bind(c.partial(this.hyperstore.closeFind,this.collection),this.hyperstore),this.ping=c.bind(c.partial(this.hyperstore._debug.ping,this.collection),this.hyperstore),this._getAppOwnerTargets=c.bind(c.partial(this.hyperstore._getAppOwnerTargets,this.collection),this.hyperstore),this._retrieveLoginCredentials=c.bind(c.partial(this.hyperstore._retrieveLoginCredentials,this.collection),this.hyperstore),this._chmod=c.bind(c.partial(this.hyperstore._chmod,this.collection),this.hyperstore),this._applyChmod=c.bind(c.partial(this.hyperstore._applyChmod,this.collection),this.hyperstore),this.subscribe=c.bind(c.partial(this.hyperstore.subscribe,this.collection),this.hyperstore),this.emit=c.bind(c.partial(this.hyperstore.emit,this.collection),this.hyperstore)},b._Hyperstore=function(i,a,g){var f=this;if("function"==typeof a&&(g=a,a={}),!a||!a.silent&&a.debug||(p="totalSilence"),c.isString("server")){var e=d.breakServerURLIntoObject(i);if(a.appName=e.application,a.protocol=e.protocol,a.server=e.protocol+"://"+e.host+":"+e.port,a.serverURI=e.toString(),a.host=e.host,a.collection=e.collection,a.port=e.port,!a)var a=new Object}else a=i;this.collectionFindLists={},this.collectionUserCallbacks={},this.buckets={},this.options=a,this.wireID=d.generateUID(),this.appName=a.appName,this.server=a.server,this.healthCheckInterval=a.healthCheckInterval,this.loginApp=a.loginApp?a.loginApp:a.appName,this.domain=a.domain,this.socket=j(a.server,{query:"appName="+this.appName,"sync disconnect on unload":!0}),this.socketID=this.wireID,this.currentUploads=new Object,this.isConnected=!1,this.LocalCollections={},this.user=null,this.manuallyMaintainUserAlias(null),this.oauthmethods=["google","sina","weibo","facebook","github","twitter"],this._debug={ping:function(a,b){f.socket.emit("ping",{collection:a,appName:f.appName,version:f.version,socketid:f.socketID,eventOrigination:new Date},b)}},this.loginToken=null,"undefined"!=typeof window&&(this.cookieName=this.loginApp+"-HyperyunToken",this.cookieMethodName=this.loginApp+"-HyperyunMethod",this.cookie=h,this.cookie.defaults.expires=30,this.cookie.defaults.domain=this.options.domain||b.COMPANY_DOMAIN,this.loginToken=this._retrieveValueFromLocalStorage(this.cookieName)?this._retrieveValueFromLocalStorage(this.cookieName).token:this.cookie.get(this.cookieName)),this.collectionEvents||(this.collectionEvents={}),g&&g()},b._Hyperstore.prototype._registerCollectionAfterUnstash=function(e){function f(){var e="/"+a.appName+"|"+d;a.buckets[e]=j(a.server+e),a.models=new Array,a.buckets[e].on("getChown",function(b){a._applyChown(d,b.sel,b.opt)}),a.buckets[e].on("getChmod",function(b){a._applyChmod(d,b.sel,b.opt)}),a.buckets[e].on("getInsert",function(b){if(k("getInsert","event"),k(b,"event"),b.socketid!=a.socketID)try{a.LocalCollections[d]&&a.LocalCollections[d].insert(b.sel),a._checkViews(d,"insert",b),a.version=b.version,a.events.update(),a.trigger(d,"insert",b.sel)}catch(c){}}),a.buckets[e].on("getRemove",function(b){if(k("getRemove","event",b),k(b,"event"),b.socketid!=a.socketID)try{if(options=b.opt?b.opt:{},options.limit=options.multi&&!options.single?void 0:1,a.LocalCollections[d]){var e=a.LocalCollections[d].find(b.sel,options).fetch(),f=e.length;c.each(e,function(c){a.LocalCollections[d].remove({_id:c._id}),f--,0>=f&&a._checkViews(d,"remove",b)})}else a._checkViews(d,"remove",b);a.version=b.version,a.events.update(),a.trigger(d,"remove",b.sel)}catch(g){}}),a.buckets[e].on("getUpdate",function(b){if(k("getUpdate",b),k(b,"show"),b.socketid!=a.socketID)try{a.LocalCollections[d]&&a.LocalCollections[d].update(b.sel,b.mod,b.opt),a._checkViews(d,"update",b),a.version=b.version,a.events.update(),a.trigger(d,"update",{selector:b.sel,modifier:b.mod,options:b.opt})}catch(c){}}),a.socket.on("remoteLogout",function(){a.trigger(d,"remoteLogout"),a._onRemoteLogout(d)}),a.socket.on("disconnect",function(){a.trigger(d,"disconnect"),o("Hyperyun: Disconnected")}),a.socket.on("reconnect",function(){a._forceReconnectSideEffects(d),a._checkViews(d,"forceInterrogation")}),a.isConnected=!0,"hyperyunLogs"!=d||"undefined"!=typeof disableHyperyunLogger&&disableHyperyunLogger?"hyperyunTracking"!=d||"undefined"!=typeof disableHyperyunTracker&&disableHyperyunTracker||a.insert(d,{clientInfo:b._clientInfo,events:b.Analytics._unsentEvents},{},function(a,c){for(!c&&a[0]&&(b.Analytics._session_id=a[0]._id);b.Analytics._unsentEvents.length>0;)b.Analytics._unsentEvents.pop()}):a.insert(d,{clientInfo:b._clientInfo,logs:b.Logger._unsentLogs},{},function(a,c){if(!c&&a[0])for(b.Logger._session_id=a[0]._id;b.Logger._unsentLogs.length>0;)b.Logger._unsentLogs.pop()}),a.events.connect(),a.trigger(d,"connect"),a.trigger(d,"ready"),a._execGetUserCallbacks(d,a.user,5)}var a=this,d=e.res;e.err&&(a.LocalCollections[d]=new i,a.collectionFindLists=a.collectionFindLists?a.collectionFindLists:{},a.collectionFindLists[d]={},a.collectionUserCallbacks=a.collectionUserCallbacks?a.collectionUserCallbacks:{},a.collectionUserCallbacks[d]=new Array,a.buckets=a.buckets?a.buckets:{},a.buckets[d]={}),a.LocalCollections[d]._useOID=!0,a.collectionUserCallbacks[d]=new Array,a.queryList=new Array,a.queue=new Array,a.version=null,a.reconnectTables={},a.disconnectStrategy={},a.defaultDisconnectStrategy=1,a.debug=a.options.debug?a.options.debug:!1,a.events={connect:function(){k("Hyperyun: Connected!"),a._execQueue()},reconnect:function(b){a.debug&&(k("Hyperyun: Reconnected"),c.each(b,function(a){k(a)}))},remoteLogout:function(){},update:function(){k("Hyperyun: Updated!"),a._execQueue()},oauthLogin:function(){}},a.collectionEvents[d]||(a.collectionEvents[d]={}),a.collectionEvents[d].onE={connect:function(){},disconnect:function(){},update:function(){},insert:function(){},remove:function(){},ready:function(){},remoteLogout:function(){},reconnect:function(){}},f(a.user)},b._Hyperstore.prototype.resetReactivity=function(g,a){var b=this;if(b.findList){for(var e=c.keys(b.findList),d=0;d<c.size(e);d++)delete b.findList[e[d]].query.callback;if(a)try{a(!0,!1,new Date)}catch(f){throw f}}else if(a)try{a(!1,"Hyperyun error: reactive find list does not exist. No callbacks removed",new Date)}catch(f){throw f}},b._Hyperstore.prototype.generateAPIKey=function(e,c,b){var a=this,d={appName:c,loginApp:a._getLoginApp(),loginToken:a.loginToken,eventOrigination:new Date};a.socket.emit("generateAPIKey",d,function(a){if(b)try{b(a.res,a.err,a.info)}catch(c){throw c}})},b._Hyperstore.prototype.requestApplicationStatistics=function(e,c,b){var a=this,d={appName:c,loginApp:a._getLoginApp(),loginToken:a.loginToken,eventOrigination:new Date};a.socket.emit("requestApplicationStatistics",d,function(a){if(b)try{b(a.res,a.err,a.info)}catch(c){throw c}})},b._Hyperstore.prototype.findOne=function(d,b,a,c){return"function"==typeof arguments[1]&&(c=arguments[1],a=null,b=null),"function"==typeof arguments[2]&&(b=b,c=arguments[2],a=null),a||(a={reactive:!0}),a.limit=1,a.nakedFirst=!0,this._find(d,b,a,c)},b._Hyperstore.prototype.find=function(a,b,c,d){return this._find(a,b,c,d)},b._Hyperstore.prototype._remoteFind=function(c,d,b,e){var a=this,f={sel:d,opt:b,collection:c,appName:a.appName,eventOrigination:new Date,version:a.version,socketid:a.socketID,loginApp:a._getLoginApp(),loginToken:b&&b.loginToken?b.loginToken:a.loginToken};a.socket.emit("find",f,e)},b._Hyperstore.prototype._syncLocalFind=function(a,d,e,b){function f(d){if(d.err)return void b(void 0,d.err,d.info);for(var e=0;d.array&&e<d.array.length;e++){var f=d.array[e];c.LocalCollections[a].remove({_id:f._id}),c.LocalCollections[a].insert(f)}b&&b(d.array,d.err,d.info)}var c=this;c._remoteFind(a,d,e,f)},b._Hyperstore.prototype._localFind=function(f,g,b,d,e){var h=this,a=h.LocalCollections[f].find(g,b).fetch();if(e&&b.reactive&&e(a),b&&(b.projection&&!c.any(b.projection,function(a){return 0==a})&&(b.projection._id=1,a=c.map(a,function(a){return c.pick(a,c.keys(b.projection))})),b.showBWDocs&&(a=c.map(a,s))),b.nakedFirst&&(a=a&&a.length>0?a[0]:void 0),d)try{d(a,!1,{version:new Date})}catch(i){throw i}},b._Hyperstore.prototype._find=function(h,k,a,i,g){function o(a,b){a&&(a=c.extend(a,{prevCacheHash:a.cacheHash,cacheHash:l(JSON.stringify(b),0)}))}var j=this;g=g?g:{};var f=j.collectionFindLists[h]?j.collectionFindLists[h]:{};if("function"==typeof arguments[1]?(i=arguments[1],a=null,k=null):"function"==typeof arguments[2]&&(i=arguments[2],a=null),k||(k={}),a||(a={}),a.reactive!==!1&&(a.reactive=!0),a.projection&&(a.fields=a.projection,c.size(c.uniq(c.values(a.projection)))>1)){if(i)try{i([],"Hyperyun: Error: Differentiated projection disallowed in Mongo.",{version:new Date})}catch(q){throw q}return!1}var n={collection:h,selector:k,options:a,single:a.nakedFirst},m=c.find(f,function(a){return c.isEqual(a.query.selector,n.selector)&&c.isEqual(a.query.options,n.options)}),p=m?m:j._queryIsStrictSubsetOfFindListQuery(h,n),e=m&&a.reactive?m.uid:d.generateUID();return a.reactive&&!g.doNotPushCallback&&j._registerReactiveView(h,e,m?m:n,i),g.forceLocal||(m&&m.hasRun||p&&p.hasRun||g.checkview)&&!g.forceRemote?j._localFind(h,k,a,i,function(a){g.dontRehash||o(f[e],a)}):g.noMinimongo?j._remoteFind(h,k,a,function(a){var b=a.array,h=a.err;if(h)return void i(b,h,a.info);if(g.dontRehash||o(f[e],b),f[e]&&(f[e]=c.extend(f[e],{hasRun:!0,cache:d.deepKeys(rArray,!0)})),i)try{i(f[e].cache!=f[e].prevCacheHash?b:!1,h,a.info)}catch(j){}}):j._syncLocalFind(h,k,a,function(b){j._localFind(h,k,a,i,function(a){g.dontRehash||o(f[e],a),f[e]&&(f[e]=c.extend(f[e],{hasRun:!0,cache:d.deepKeys(b,!0)}))})}),a.reactive?new b._Hyperstore.FindInstance(h,j,e):!1},b._Hyperstore.prototype._registerReactiveView=function(e,a,g,d){var f=this,b=f.collectionFindLists[e]?f.collectionFindLists[e]:{};b[a]||(b[a]={uid:a,query:g}),b[a].query&&(c.isArray(b[a].query.callback)||(b[a].query.callback=[b[a].query.callback]),c.isArray(d)?c.forEach(d,function(c){b[a].query.callback.push(c)}):c.isFunction(d)&&b[a].query.callback.push(d))},b._Hyperstore.prototype._checkViews=function(f,d,b){var a=this,g=a.collectionFindLists[f]?a.collectionFindLists[f]:{},h=new Array;if("insert"==d){var e=b.sel;h=c.map(g,function(b){return k("Insert view.selector: "+JSON.stringify(b.query.selector)),c.isEqual(b.query.selector,{})||0!=c.size(c.intersection(a._getAllSubKeys(e),a._getAllSubKeys(b.query.selector)))?{r:!0,id:b.uid}:(o("ignoring insert event: doesn't affect me"),{r:!1,id:b.uid})})}else if("remove"==d){k("check onRemove");var e=b.sel;h=c.map(g,function(b){return c.isEqual(b.query.selector,{})||c.isEqual(e,{})||0!=c.size(c.intersection(a._getAllSubKeys(e),a._getAllSubKeys(b.query.selector)))||0!=c.size(c.intersection(a._getAllSubKeys(e),b.cache))?{r:!0,id:b.uid}:(o("ignoring remove event: doesn't affect me:",a._getAllSubKeys(e)),{r:!1,id:b.uid})})}else if("update"==d){var e=b.sel,i=b.mod,j=b.options;k("check onUpdate",e,i,j),h=c.map(g,function(b){return c.isEqual(b.query.selector,{})||0!=c.size(c.intersection(a._getAllSubKeys(i),a._getAllSubKeys(b.query.selector)))||0!=c.size(c.intersection(a._getAllSubKeys(e),b.cache))?void 0!==e._id&&c.isString(e._id)&&void 0!==b.query.selector._id&&c.isString(b.query.selector._id)&&e._id!=b.query.selector._id?(o("ignoring update event: different _id in _id-centric case",b.uid),{r:!1,id:b.uid}):{r:!0,id:b.uid}:(o("ignoring update event: doesn't affect me",b.uid),{r:!1,id:b.uid})})}else"forceInterrogation"==d&&(h=c.map(g,function(a){return{r:!0,id:a.uid}}));c.forEach(h,function(i){function j(i,j,g){function l(){if(e.cacheHashAtCheck!=e.cacheHash){h.reportHashing;var a={timing:b&&b.timing?b.timing:void 0,triggerPropagated:k,effectsFound:new Date,fromCheckView:!0,respondingTo:d};g=c.extend(g,{debug:a,event:{type:d,details:b}}),c.forEach(e.query.callback,function(a){if(c.isFunction(a))try{a&&a(i,j,g)}catch(b){}}),e.events&&e.events[d]&&c.forEach(e.events[d],function(a){try{a&&a(i,j,g)}catch(b){}}),e.events&&b&&b.methodAlias&&e.events[b.methodAlias]&&c.forEach(e.events[b.methodAlias],function(a){try{a&&a(i,j,g)}catch(b){}})}else h.reportHashing}e.query.callback&&("forceInterrogation"==d?a._find(f,e.query.selector,h,function(){l()},{doNotPushCallback:!0,checkview:!0,forceRemote:!1,forceLocal:!0,dontRehash:!0}):l())}if(i.r){{var e=g[i.id],h=c.defaults({reactive:!0},e.query.options),k=new Date;e.cacheHash}"forceInterrogation"==d?a._find(f,e.query.selector,h,j,{doNotPushCallback:!0,checkview:!0,forceRemote:!0,forceLocal:!1}):a._find(f,e.query.selector,h,j,{doNotPushCallback:!0,checkview:!0,forceRemote:!1,forceLocal:!0})}})},b._Hyperstore.prototype.insert=function(d,e,b,f){3==arguments.length&&"function"==typeof arguments[2]&&(f=arguments[2],b=null);var a=this;if(b&&!b.delayUntilConfirmed){var g=a.LocalCollections[d].insert(e);e._id=g.toString()}e=a._recursiveWrapQuery(e),a.socket.emit("insert",{collection:d,appName:a.appName,version:a.version,sel:e,options:b,socketid:a.socketID,loginApp:a._getLoginApp(),loginToken:b&&b.loginToken?b.loginToken:a.loginToken,eventOrigination:new Date},function(h){if(h.err&&(!h.err.search||h.err.search("duplicate key error")<0)){if(a.LocalCollections[d].remove({_id:g}),a.queue.push(function(b){a.insert(d,e,f),b(!0)}),f)try{f(h.res,h.err,h.info)}catch(i){throw i}}else if(a.version=h.info.version,b&&!b.delayUntilConfirmed&&a.LocalCollections[d].remove({_id:g}),h.res=c.isArray(h.res)?h.res[0]:h.res,a.LocalCollections[d].insert(h.res),a._checkViews(d,"insert",{sel:e,options:b}),f)try{f(h.res,h.err,h.info)}catch(i){throw i}a._renderAll(d)})},b._Hyperstore.prototype.update=function(f,e,d,a,g){var b=this;4==arguments.length&&"function"==typeof arguments[3]&&(g=arguments[3],a=null),e||(e={}),d||(d={}),a||(a={}),delete e[""],delete d[""];var h=b.LocalCollections[f].find(e).fetch();if(a.upsert){var i=b.hyperDoc({});d.$setOnInsert?d.$setOnInsert.bw_doc=i:d.$setOnInsert={bw_doc:i}}a.delayUntilConfirmed||b.LocalCollections[f].update(e,d,a),a.multi&&!c.any(c.keys(d),function(a){return"$"==a.charAt(0)})&&o("Warning: an update with 'multi = true' cannot affect documents if the modifier is comprised solely of key:value pairs. Use $set and similar keywords."),b.socket.emit("update",{collection:f,appName:b.appName,version:b.version,sel:e,mod:d,opt:a,socketid:b.socketID,loginApp:b._getLoginApp(),loginToken:a&&a.loginToken?a.loginToken:b.loginToken,eventOrigination:new Date},function(i){if(i.err){if(o("Error occurred in update: "+i.err),!a.delayUntilConfirmed){b.LocalCollections[f].remove(e);for(var j=0;j<c.size(h);j++)b.LocalCollections[f].insert(h[j])}if(b.queue.push(function(c){b.update(f,e,d,a,g),c(!0)}),g)try{g(i.res,i.err,i.info)}catch(k){throw k}}else if(a.delayUntilConfirmed&&b.LocalCollections[f].update(e,d,a,function(){}),b.version=i.info.version,b._checkViews(f,"update",{sel:e,mod:d,options:a}),g)try{g(i.res,i.err,i.info,i.debug)}catch(k){throw k}})},b._Hyperstore.prototype.remove=function(d,f,a,e){3==arguments.length&&"function"==typeof arguments[2]&&(e=arguments[2],a=void 0);var b=this;if(f){a?(a.single=!a.multi,a.multi=!a.single):a={single:!0,multi:!1},a.limit=a.multi?void 0:1;var g=b.LocalCollections[d].find(f,a).fetch();a.delayUntilConfirmed||c.each(g,function(a){b.LocalCollections[d].remove({_id:a._id})}),b.socket.emit("remove",{collection:d,appName:b.appName,version:b.version,sel:f,opt:a,socketid:b.socketID,loginApp:b._getLoginApp(),loginToken:a&&a.loginToken?a.loginToken:b.loginToken,eventOrigination:new Date},function(h){if(h.err){if(!a.delayUntilConfirmed)for(var i=0;i<c.size(g);i++)b.LocalCollections[d].insert(g[i]);if(b.queue.push(function(c){b.remove(d,f,a,e),c(!0)}),e)try{e(h.res,h.err,h.info)}catch(j){throw j}}else if(a.delayUntilConfirmed&&c.each(g,function(a){b.LocalCollections[d].remove({_id:a._id})}),b.version=h.info.version,b._checkViews(d,"remove",{sel:f,options:a}),e)try{e(h.err,h.info)}catch(j){throw j}})}},b._Hyperstore.prototype.on=function(a,b,c){var d=this;d.collectionEvents[a].onE[b]=c,"ready"==b&&this.isConnected&&this.trigger(a,"ready",void 0)},b._Hyperstore.prototype.trigger=function(d,b,e){var a=this;void 0===d?c.each(c.keys(a.collectionEvents),function(c){a.collectionEvents[c].onE&&a.collectionEvents[c].onE[b]?a.collectionEvents[c].onE[b](e):o("Event not known: "+b)}):a.collectionEvents[d].onE&&a.collectionEvents[d].onE[b]?a.collectionEvents[d].onE[b](e):o("Event not known: "+b)},b._Hyperstore.prototype.createUser=function(c,d,b){var a=this;a.socket.emit("passwordSignUp",{collection:c,appName:a.appName,version:a.version,sel:d,socketid:a.socketID,eventOrigination:new Date},function(a){b&&b(a.res,a.err,a.info)})},b._Hyperstore.prototype._refreshGetUser=function(d,b){var a=this;if(a.application.users){if(this.closeFind(this.currGetUserFind),!b&&this.currGetUserFind&&this.currGetUser!=this.user._id)return this.currGetUser=b,a.user=b,void a._execGetUserCallbacks(d,a.user,7);var e=a.user&&(a.user.isHyperyunAdmin||a.user.isAppOwner)?"hyperyunAdmins":"users",f=a._find(e,{_id:a.user._id},{limit:1},function(b){b=!b||b.length<1?!1:b[0],c.isEqual(a.user,b)||(a.user=b,a.manuallyMaintainUserAlias(a.user),a._execGetUserCallbacks(d,a.user,7))},{forceRemote:!0,forceLocal:!1});this.currGetUser=this.user._id,this.currGetUserFind=f}},b._Hyperstore.prototype.getUser=function(b,a){this.isConnected?(this._registerGetUserCallback(b,a),this.user&&this.user._id!=this.currGetUser?this._refreshGetUser(b,user):this.user&&a?a(this.user):a&&a(!1)):(k("Hyperyun: Not connected. Adding getUser to queue."),this.queue.push(function(c){this.getUser(b,a),c(!0)}))},b._Hyperstore.prototype.sendAnalyticsEvent=function(b,c,d){var a=this;a.socket.emit("analyticsEvent",{collection:b,appName:a.appName,version:a.version,socketid:a.socketID,time:d,event:c,eventOrigination:new Date},function(){})},b._Hyperstore.prototype.pingLogin=function(c,e,d,a){var b=this;b.socket.emit("passwordLogin",{collection:c,appName:b.appName,version:b.version,login:d,socketid:b.socketID,eventOrigination:new Date},function(b){b.err?a&&a(b.res,b.err,b.info):a&&a(b.user,b.err,b.info)})},b._Hyperstore.prototype.login=function(g,d,f,e){var a=this;if("password"!=d&&!c.contains(b._Hyperstore.oauthmethods,d)){var h=n.isEmail(d),i={username:h?void 0:d,email:h?d:void 0,password:f};d="password",f=i}"password"==d?a.socket.emit("passwordLogin",{collection:g,appName:a.appName,version:a.version,login:f,socketid:a.socketID,eventOrigination:new Date},function(b){if(b.err)e&&e(b.res,b.err,b.info);else if(a._storePairToLocalStorage(a.cookieName,{token:b.token,expiry:b.exdate}),a._storePairToLocalStorage(a.cookieMethodName,{method:d,expiry:b.exdate}),a.cookie&&a.cookie.set(a.cookieName,b.token,{expires:b.exdate}),a.cookie&&a.cookie.set(a.cookieMethodName,d,{expires:b.exdate}),a.user=b.user,a._refreshGetUser(g,a.user),a.manuallyMaintainUserAlias(a.user),a.loginToken=b.token,a._checkLogin(function(){}),e)try{e(b.user,b.err,b.info)}catch(c){throw c}a._renderAll()}):a.socket.emit("getOAuthSettings",{method:d,socket:a.socketID,appName:a.appName,host:a.domain,eventOrigination:new Date},function(c,k){if(c.error){if(a._refreshGetUser(g,!1),e)try{e(res.res,c.error,res.info)}catch(l){throw l}return!1}var h=k.url+"?client_id="+k.client_id;f.scope&&c.scope&&delete c.scope;for(var d in c)h+="&"+d+"="+c[d];for(var d in f)h+="&"+d+"="+f[d];if("undefined"!=typeof window){var i,b={width:Math.floor(.8*window.outerWidth),height:Math.floor(.5*window.outerHeight)};b.height<350&&(b.height=350),b.width<800&&(b.width=800),b.left=window.screenX+(window.outerWidth-b.width)/2,b.top=window.screenY+(window.outerHeight-b.height)/8;var j="width="+b.width+",height="+b.height;j+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0",j+=",left="+b.left+",top="+b.top,i=window.open(h,"Authorization",j),i&&i.focus(),a.socket.on("OAuthLogin",function(b){a._storePairToLocalStorage(a.cookieName,{token:b.token,expiry:b.expires}),a._storePairToLocalStorage(a.cookieMethodName,{method:b.method,expiry:b.expires}),a.cookie&&a.cookie.set(a.cookieName,b.token,b.expires),a.cookie&&a.cookie.set(a.cookieMethodName,b.method,b.expires),a._checkLogin(function(a){if(e)try{e(a)}catch(b){throw b}})})}})},b._Hyperstore.prototype.logout=function(d,c){var a=this,b=null;a.loginToken&&a._retrieveValueFromLocalStorage(a.cookieName)?b=a.loginToken:a.cookie&&(b=a.cookie.get(a.cookieName)),a.socket.emit("logout",{appName:a.appName,loginToken:b,eventOrigination:new Date},function(b){if(a.cookie&&a.cookie.remove(a.cookieName),a.cookie&&a.cookie.remove(a.cookieMethodName),a._removeValueFromLocalStorage(a.cookieName),a._removeValueFromLocalStorage(a.cookieMethodName),a.user=!1,a.manuallyMaintainUserAlias(a.user),a._refreshGetUser(d,a.user),a.loginToken=null,c&&b)try{c(b.err,b.info)}catch(e){throw e}})},b._Hyperstore.prototype._onRemoteLogout=function(b){var a=this;a.cookie&&a.cookie.remove(a.cookieName),a.cookie&&a.cookie.remove(a.cookieMethodName),
a._removeValueFromLocalStorage(a.cookieName),a._removeValueFromLocalStorage(a.cookieMethodName),a.user=!1,a.manuallyMaintainUserAlias(a.user),a._refreshGetUser(b,a.user),a._renderAll()},b._Hyperstore.prototype.changePassword=function(c,d,e,b,f){var a=this,g=null;g=a.cookie?a.cookie.get(a.cookieName):a.loginToken,a.socket.emit("changePassword",{oldpassword:d,newpassword:e,forgotPassword:f,appName:a.appName,loginToken:a.loginToken,eventOrigination:new Date},function(d){if(d.err||(a.user=d.res,a.manuallyMaintainUserAlias(a.user),a._refreshGetUser(c,a.user)),b)try{b(d.res?!0:!1,d.err,d.info)}catch(e){throw e}})},b._Hyperstore.prototype.activate=function(d,c,a){var b=this;b.socket.emit("activate",{code:c,appName:b.appName,eventOrigination:new Date},function(b){if(a)try{a(b.res,b.err,b.info)}catch(c){throw c}})},b._Hyperstore.prototype.forgotPassword=function(c,d,b){var a=this;a.socket.emit("forgotPassword",{email:d,appName:a.appName,eventOrigination:new Date},function(d){if(d.err||(a.user=d.res,a.manuallyMaintainUserAlias(a.user),a._refreshGetUser(c,a.user)),b)try{b(d.res,d.err,d.info)}catch(e){throw e}})},b._Hyperstore.prototype.removeFile=function(c,d,b){var a=this;a.socket.emit("removeFile",{appName:a.appName,socketid:a.socketID,loginApp:a._getLoginApp(),loginToken:a.loginToken,collection:c,file_id:d,eventOrigination:new Date},function(a){if(b)try{b(a.res,a.err,a.info)}catch(c){throw c}})},b._Hyperstore.prototype.cancelUpload=function(f,d,b){var e=this,a=e.currentUploads[d];if(a){a.unpipe(),a.emit("disconnect");try{b(!0)}catch(c){throw c}}try{b(!1)}catch(c){throw c}},b._Hyperstore.prototype.upload=function(m,c,a,e){var b=this;"function"==typeof a&&(e=a,a={}),a||(a={});var i=a.folder||"/",l=a.userData||{},j=c.name.split(".")[c.name.split(".").length-1];filestream=g.createBlobReadStream(c),filestream.on("data",function(b){a.onWrite&&a.onWrite(b)});var f=d.generateUID();b.currentUploads[f]=filestream;var h=g.createStream(),k=b._recursiveWrapQuery({metadata:{name:c.name,type:c.type,size:c.size,folder:i,filetype:j,userData:l},sel:{},appName:b.appName,socketid:b.socketID,loginApp:b._getLoginApp(),loginToken:b.loginToken,eventOrigination:new Date},!0);return g(b.socket).emit("uploadFile",h,k,function(a){if(e)try{e(a.res,a.err,a.info.version)}catch(b){throw b}}),filestream.pipe(h),f},b._Hyperstore.prototype.forceFind=function(b,e){var d=this,f=d.collectionFindLists[b]?d.collectionFindLists[b]:{},a=f[e];return a?(c.forEach(a.query.callback,function(c){d._find(b,a.query.selector,a.query.options,c,{doNotPushCallback:!0,checkview:!0,forceRemote:!0,forceLocal:!1})}),!0):!1},b._Hyperstore.prototype.closeFind=function(f,a,b){var e=this,c=e.collectionFindLists[f]?e.collectionFindLists[f]:{};if(!a)return!1;if(!c)return!1;if(c[a]){var d=c[a];if(e.socket.emit("unsubscribeFromQuery",{sel:d.selector,opt:d.options},function(){}),delete c[a],b)try{b(d)}catch(g){throw g}return d}if(b)try{b(!1)}catch(g){throw g}return!1},b._Hyperstore.prototype._getAppOwnerTargets=function(e,c,d,b){var a=this;a.socket.emit("queryAppOwnerTargets",{appName:a.appName,loginApp:a._getLoginApp(),loginToken:a.loginToken,version:a.version,socketid:a.socketID,eventOrigination:new Date,presented_id:{identifier:c,password:d}},function(a){if(a&&b)try{b(a.res,a.err,a.info)}catch(c){throw c}})},b._Hyperstore.prototype._chmod=function(e,f,g,a,d){var b=this;4==arguments.length&&c.isFunction(a)&&(d=a,a={}),void 0===a&&(a={});var h=a.recursiveSelector,i=a.omitFieldToSet;b.socket.emit("chmod",{collection:e,appName:b.appName,loginApp:b._getLoginApp(),loginToken:b.loginToken,version:b.version,socketid:b.socketID,eventOrigination:new Date,sel:f,opt:{recursiveSelector:h,omitFieldToSet:i,permissionString:g}},function(a){if(d)try{d(a)}catch(b){throw b}})},b._Hyperstore.prototype._applyChmod=function(e,g,a){var d=this,f=a.recursiveSelector,h=new m(f),i=a.code,b=a.omitFieldToSet,j=a.applicant,k=d.LocalCollections[e].find(g,a).fetch();c.forEach(k,function(g){function l(a,d){if(void 0==d&&(d=""),h.discern(a)){if(a.bw_doc&&a.bw_doc.owner_id&&a.bw_doc.owner_id!=j)return;if(!a.bw_doc||a.bw_doc&&!a.bw_doc.owner_id)return;var e=d+(""==d?"":".")+"bw_doc.";e+=b&&c.isString(b)&&""!=b&&"."!=b[0]?"omits."+b:"permissions",k.$set[e]=i}}var k={$set:{}};c.isFunction(f)?d._recurseApply(g,l):l(g),c.isEqual(k.$set,{})||d.LocalCollections[e].update({_id:g._id},k,a)})},b._Hyperstore.prototype._retrieveLoginCredentials=function(){var l=this;if(l.cookie&&document&&document.cookie)var i=document.cookie,g=i.split(";"),k=c.compact(c.map(g,function(a){var b=a.split("=");return c.size(b)>0?a.split("=")[0]:void 0})),f=c.compact(c.map(k,function(a){var b=a.indexOf("-HyperyunToken");if(!(b>0))return void 0;try{var c={app:a.substr(0,b),cred:JSON.parse(h.get(a)),method:JSON.parse(h.get(a.substr(0,b)+"-HyperyunMethod")).method};return c}catch(d){return void 0}}));if(localStorage&&localStorage.key&&localStorage.getItem){for(var a=[],d=0,j=localStorage.length;j>d;++d){var b=localStorage.key(d),e=b.indexOf("-HyperyunToken");if(e>0)try{var m={app:b.substr(0,e),cred:JSON.parse(localStorage.getItem(b)),method:JSON.parse(localStorage.getItem(b.substr(0,e)+"-HyperyunMethod")).method};a.push(m)}catch(n){}}a=c.compact(a)}return c.union(a?a:[],f?f:[])},b._Hyperstore.prototype.subscribe=function(d,a,b){void 0==a&&(a={}),void 0!=b&&c.isPlainObject(object)||(b={});var e=this;return e._find(d,a,c.extend(b,{reactive:!0}),function(){},{noMinimongo:!0})},b._Hyperstore.prototype.emit=function(d,b,e,a,f){if(void 0!=b){void 0!=a&&c.isPlainObject(object)||(a={});var g=this,h={event:b,payload:e};return g.insert(d,h,c.extend(a,{noMinimongo:!0}),f)}},b._Hyperstore.prototype.performQueryHealthCheck=function(a){var b=this;b._checkViews(a,"forceInterrogation")},b._Hyperstore.prototype.manuallyMaintainUserAlias=function(a){this.bruteUserAliasEnabled&&c.forEach(this.bruteUserAliasEnabled,function(b){b.user=a})},b._Hyperstore.FindInstance=function(b,c,d){var a=this;a.assoc_hyperstore=c,a.collection=b,a.uid=d,a.events={}},b._Hyperstore.FindInstance.prototype.force=function(){var a=this;a.stored||a.assoc_hyperstore.forceFind(a.collection,a.uid)},b._Hyperstore.FindInstance.prototype.close=function(b){var a=this;a.assoc_hyperstore.closeFind(a.collection,a.uid,b)},b._Hyperstore.FindInstance.prototype.pause=function(){var a=this;a.stored=a.assoc_hyperstore.closeFind(a.collection,a.uid)},b._Hyperstore.FindInstance.prototype.resume=function(){var a=this;a.stored&&(a.assoc_hyperstore.collectionFindLists[a.collection][a.uid]=a.stored,a.stored=void 0)},b._Hyperstore.FindInstance.prototype.on=function(d,e){var b=this,a=b.assoc_hyperstore.collectionFindLists[b.collection][b.uid];if(!a)throw"ERROR for ON: FindInstance doesn't exist in collectionFindLists";return void 0==a.events&&(a.events={}),void 0==a.events[d]&&(a.events[d]=[]),c.isFunction(e)&&a.events[d].push(e),b},b._Hyperstore.FindInstance.prototype.trigger=function(d,e){var b=this,a=b.assoc_hyperstore.collectionFindLists[b.collection][b.uid];a&&a.events&&a.events[d]&&c.forEach(a.events[d],function(a){c.isFunction(a)&&a(e)})},b._Hyperstore.prototype._queryIsStrictSubsetOfFindListQuery=function(b,a){var e=this,f=e.collectionFindLists[b]?e.collectionFindLists[b]:{};return c.some(f,function(e){var b=e.query;return c.isEqual(a.options,b.options)?c.isEqual(a.selector,b.selector)?(k("duplicate selector :)","subset"),!0):c.isEqual(b.selector,{})?(k("selector is {} :)","subset"),!0):c.isEqual(c.difference(c.keys(b.selector),c.keys(a.selector)),[])&&!c.some(c.keys(c.union(a.selector,b.selector)),function(b,a){return d.isMongoOperator(a)})&&c.every(b.selector,function(b,d){return c.isEqual(b,a.selector[d])})?(k("strict selector subset :)","subset"),!0):(k("Unable to determine :(","subset"),!1):(k("different options :(","subset"),!1)})},b._Hyperstore.prototype._recursiveWrapQuery=function(a,e,h){var b=this,i=["$addToSet","$push"],g=!1;return c.find(a,function(b,a){return d.isMongoOperator(a)?!0:void 0})&&(g=!0),b._isHyperDoc(a)&&(c.isString(a.bw_doc.permissions)?a.bw_doc.permissions=f.fromString(a.bw_doc.permissions):c.isObject(a.bw_doc.permissions)&&(a.bw_doc.permissions=f.encodePermission(a.bw_doc.permissions))),c.forEach(c.keys(a),function(f){var d=a[f];"bw_doc"!=f&&(c.isFunction(d)||(c.isArray(d)&&!c.isString(d)?(d=c.map(d,function(a,d){return c.isObject(a)&&!c.isString(a)?b._recursiveWrapQuery(a,e,d):a}),a[f]=d):c.isObject(d)&&(d=b._recursiveWrapQuery(d,e,f),a[f]=d)))}),b._isHyperDoc(a)||b._isHyperLink(a)||g||c.contains(i,h)||(a=b.hyperDoc(a),e||(a.bw_doc.auto=!0)),a},b._Hyperstore.prototype._isHyperDoc=function(a){return a&&a.bw_doc&&"Basic"==a.bw_doc.object_type},b._Hyperstore.prototype._isHyperLink=function(a){return a&&a.bw_doc&&"Symlink"==a.bw_doc.object_type},b._Hyperstore.prototype.hyperLink=function(a){var b=function(a,b){return a||(a={}),a.bw_doc={createdAt:new Date,modifiedAt:new Date,owner_id:!1,object_type:"Symlink"},b&&(a.bw_doc=c.extend(a.bw_doc,b)),a},d=this;return a||(a={}),b(c.extend({},a),{owner_id:d.user._id})},b._Hyperstore.prototype.hyperDoc=function(a){var b=this,d=function(a,d){return a||(a={}),a.bw_doc={createdAt:new Date,modifiedAt:new Date,owner_id:b.user_id,object_type:"Basic",permissions:f.encodePermission({owner:["r","w","e"],group:["r","w","e"],"public":["r","w","e"]})},d&&(a.bw_doc=c.extend(a.bw_doc,d)),a};return a||(a={}),d(c.extend({},a),{owner_id:b.user?b.user._id:!1})},b._Hyperstore.prototype._getLoginApp=function(){var a=this;return a.loginApp},b._Hyperstore.prototype._execGetUserCallbacks=function(d,b){var a=this;c.each(a.collectionUserCallbacks,function(f,e){for(var d=0;d<c.size(a.collectionUserCallbacks[e]);d++)"function"==typeof a.collectionUserCallbacks[e][d]&&a.collectionUserCallbacks[e][d](b)})},b._Hyperstore.prototype._registerGetUserCallback=function(b,a){k("registering get user callback");var c=this;a&&c.collectionUserCallbacks[b].push(a)},b._Hyperstore.prototype._checkLogin=function(c){var a=this,b=null;a.loginToken&&a._retrieveValueFromLocalStorage(a.cookieName)?(q("Using localStorage token","cookie"),b=a.loginToken):a.cookie&&(b=a.cookie.get(a.cookieName)),a.socket.emit("loggedIn",{appName:a.appName,loginToken:b,eventOrigination:new Date},function(b){b.err?(o(b.err),c(null)):(a.reconnectTables=b.reconnects,a.disconnectStrategy=b.disconnectModificationStrategy,a.defaultDisconnectStrategy=b.defaultDisconnectStrategy,c(a.user))})},b._Hyperstore.prototype._renderData=function(d,b){if("undefined"!=typeof document){var f=document.querySelector('*[data-hyperyun-collection="'+d+'"]'),g=document.querySelector('*[data-hyperyun-collection="'+d+'"] *[data-hyperyun-each]');if(g){var e=new Array;f.innerHTML="";for(var a=0;a<b.length;a++){e[a]=g.cloneNode(!0);var h=b[a];for(key in h){var c=e[a].querySelector('*[data-hyperyun-field="'+key+'"]');c&&(c.textContent=h[key])}f.appendChild(e[a])}}else for(key in b){var c=document.querySelector('*[data-hyperyun-collection="'+d+'"] *[data-hyperyun-field="'+key+'"]');c&&(c.textContent=b[key])}}},b._Hyperstore.prototype._renderAll=function(a){var b=this,e=b.collectionFindLists[a]?b.collectionFindLists[a]:{},d=function(a){c.each(e,function(c){if(c.query.callback){q("rerendering view callback "+c.uid+" ("+JSON.stringify(c.query.selector)+")","render");{b.LocalCollections[a].find(c.query.selector,c.query.options).fetch()}}})};a?d(a):c.each(b.collectionFindLists,function(){d(a)})},b._Hyperstore.prototype.ObjectID=function(c,a){var b=new i._ObjectID(c);return a&&a(b),b},b._Hyperstore.prototype._unstashFromLocalStorage=function(a,b){var c=this;c.collectionFindLists[a]={},c.LocalCollections[a]=new i,b&&b({res:a,err:null})},b._Hyperstore.prototype._storePairToLocalStorage=function(a,b){return q("Setting Pair "+a+" : "+JSON.stringify(b),"localStorage"),d.supportsLocalStorage()?localStorage.setItem(a,JSON.stringify(b)):(o("Failed to store pair to local storage: HTML5 storage not available.","localStorage"),!1)},b._Hyperstore.prototype._retrieveValueFromLocalStorage=function(a){if(!d.supportsLocalStorage())return o("Failed to retrieve value from local storage: HTML5 storage not available.","localStorage"),!1;try{return k("Retrieving pair "+JSON.parse(localStorage.getItem(a)),"localStorage"),JSON.parse(localStorage.getItem(a))}catch(b){return localStorage.getItem(a)}},b._Hyperstore.prototype._removeValueFromLocalStorage=function(a){return d.supportsLocalStorage()?void localStorage.removeItem(a):(o("Failed to remove value from local storage: HTML5 storage not available.","localStorage"),!1)},b._Hyperstore.prototype._forceReconnectSideEffects=function(b){var a=this;0==a.disconnectStrategy[b]||0==a.defaultDisconnectStrategy?(a.queue.length=0,a.events.reconnect([]),a.trigger(b,"reconnect",[])):2==a.disconnectStrategy[b]||2==a.defaultDisconnectStrategy?(a.events.reconnect(a.queue),a.trigger(b,"reconnect",a.queue)):(a._execQueue(),a.events.reconnect([]),a.trigger(b,"reconnect",[]))},b._Hyperstore.prototype._execQueue=function(){var a=this;return a.queue.length?void a.queue[0](function(b){return b&&a.queue.splice(0,1),a._execQueue(),!0}):!0},b._Hyperstore.prototype._getAllSubKeys=function(e,a,b){a||(a=0),b||(b=10);var j=this;if(a>b)return[];if("object"==typeof e){for(var d=c.map(c.keys(e),function(a){return a.replace(/\"([^(\")"]+)\"/,"$1")}),h=c.filter(d,function(a){return c.size(a.split("."))>0}),i=new Array,f=0;f<c.size(h);f++)i.push(h[f].split("."));d=c.union(d,c.flatten(i));var g=c.filter(d,function(a){return"$"==a.charAt(0)?!1:!0});return c.each(e,function(d){"object"==typeof d&&(g=c.union(g,j._getAllSubKeys(d,a+1,b)))}),g}return[]},b._Hyperstore.prototype._recurseApply=function(a,e,d){return c.isString(d)||(d=""),(c.isPlainObject(a)||c.isArray(a))&&c.forEach(a,function(a,c){b.Utils.recurseApply(a,e,d+(""==d?"":".")+c)}),a=e(a,d)};var p=["find","render","cache",,"subset","localStorage","reactive"];this.Hyperyun=b,this.Hyperstore=b.Hyperstore};"undefined"!=typeof b&&(b.exports=k),k()}).call(this,a("_process"))},{"./lib/cookie.js":2,"./lib/hyperstore_utils.js":4,"./lib/logger.js":5,"./lib/minimongo.js":6,"./package.json":95,"./permissionCode/permissionCode.js":96,_process:20,"hyperyun-mongomatcher":36,lodash:37,"murmurhash-js":38,"socket.io-client":41,"socket.io-stream":84,validator:94}],9:[function(require,module,exports){!function(exports){"function"!=typeof exports.decycle&&(exports.decycle=function(c){"use strict";var a=[],b=[];return function d(c,g){var d,e,f;switch(typeof c){case"object":if(!c)return null;for(d=0;d<a.length;d+=1)if(a[d]===c)return{$ref:b[d]};if(a.push(c),b.push(g),"[object Array]"===Object.prototype.toString.apply(c))for(f=[],d=0;d<c.length;d+=1)f[d]=d(c[d],g+"["+d+"]");else{f={};for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(f[e]=d(c[e],g+"["+JSON.stringify(e)+"]"))}return f;case"number":case"string":case"boolean":return c}}(c,"$")}),"function"!=typeof exports.retrocycle&&(exports.retrocycle=function retrocycle($){"use strict";var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return function rez(value){var i,item,name,path;if(value&&"object"==typeof value)if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;i<value.length;i+=1)item=value[i],item&&"object"==typeof item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[i]=eval(path):rez(item));else for(name in value)"object"==typeof value[name]&&(item=value[name],item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[name]=eval(path):rez(item)))}($),$})}("undefined"!=typeof exports?exports:window.JSON?window.JSON:window.JSON={})},{}],10:[function(b,d){var a=b("./json2"),c=b("./cycle");a.decycle=c.decycle,a.retrocycle=c.retrocycle,d.exports=a},{"./cycle":9,"./json2":11}],11:[function(require,module,exports){!function(JSON){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(h,i){var b,e,c,f,d,g=gap,a=i[h];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(h)),"function"==typeof rep&&(a=rep.call(i,h,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,d=[],"[object Array]"===Object.prototype.toString.apply(a)){for(f=a.length,b=0;f>b;b+=1)d[b]=str(b,a)||"null";return c=0===d.length?"[]":gap?"[\n"+gap+d.join(",\n"+gap)+"\n"+g+"]":"["+d.join(",")+"]",gap=g,c}if(rep&&"object"==typeof rep)for(f=rep.length,b=0;f>b;b+=1)"string"==typeof rep[b]&&(e=rep[b],c=str(e,a),c&&d.push(quote(e)+(gap?": ":":")+c));else for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c=str(e,a),c&&d.push(quote(e)+(gap?": ":":")+c));return c=0===d.length?"{}":gap?"{\n"+gap+d.join(",\n"+gap)+"\n"+g+"}":"{"+d.join(",")+"}",gap=g,c}}"undefined"==typeof exports&&("function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null}),"function"!=typeof String.prototype.toJSON&&(String.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof Number.prototype.toJSON&&(Number.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof Boolean.prototype.toJSON&&(Boolean.prototype.toJSON=function(){return this.valueOf()}));var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(d,a,b){var c;if(gap="",indent="","number"==typeof b)for(c=0;b>c;c+=1)indent+=" ";else"string"==typeof b&&(indent=b);if(rep=a,a&&"function"!=typeof a&&("object"!=typeof a||"number"!=typeof a.length))throw new Error("JSON.stringify");return str("",{"":d})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(d,e){var b,c,a=d[e];if(a&&"object"==typeof a)for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c=walk(a,b),void 0!==c?a[b]=c:delete a[b]);return reviver.call(d,e,a)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}("undefined"!=typeof exports?exports:window.JSON?window.JSON:window.JSON={})},{}],12:[function(){},{}],13:[function(m,O,g){function a(b,g){var e=this;if(!(e instanceof a))return new a(b,g);var c,f=typeof b;if("number"===f)c=+b;else if("string"===f)c=a.byteLength(b,g);else{if("object"!==f||null===b)throw new TypeError("must start with number, buffer, array or string");"Buffer"===b.type&&k(b.data)&&(b=b.data),c=+b.length}if(c>u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");0>c?c=0:c>>>=0,a.TYPED_ARRAY_SUPPORT?e=a._augment(new Uint8Array(c)):(e.length=c,e._isBuffer=!0);var d;if(a.TYPED_ARRAY_SUPPORT&&"number"==typeof b.byteLength)e._set(b);else if(A(b))if(a.isBuffer(b))for(d=0;c>d;d++)e[d]=b.readUInt8(d);else for(d=0;c>d;d++)e[d]=(b[d]%256+256)%256;else if("string"===f)e.write(b,0,g);else if("number"===f&&!a.TYPED_ARRAY_SUPPORT)for(d=0;c>d;d++)e[d]=0;return c>0&&c<=a.poolSize&&(e.parent=M),e}function l(b,c){if(!(this instanceof l))return new l(b,c);var d=new a(b,c);return delete d.parent,d}function J(f,g,c,a){c=Number(c)||0;var d=f.length-c;a?(a=Number(a),a>d&&(a=d)):a=d;var e=g.length;if(e%2!==0)throw new Error("Invalid hex string");a>e/2&&(a=e/2);for(var b=0;a>b;b++){var h=parseInt(g.substr(2*b,2),16);if(isNaN(h))throw new Error("Invalid hex string");f[c+b]=h}return b}function K(a,c,b,d){var e=h(j(c,a.length-b),a,b,d);return e}function t(a,b,c,d){var e=h(D(b),a,c,d);return e}function G(a,b,c,d){return t(a,b,c,d)}function C(a,b,c,d){var e=h(q(b),a,c,d);return e}function I(a,c,b,d){var e=h(E(c,a.length-b),a,b,d);return e}function H(a,b,c){return s.fromByteArray(0===b&&c===a.length?a:a.slice(b,c))}function F(b,f,d){var e="",c="";d=Math.min(b.length,d);for(var a=f;d>a;a++)b[a]<=127?(e+=r(c)+String.fromCharCode(b[a]),c=""):c+="%"+b[a].toString(16);return e+r(c)}function L(c,e,a){var d="";a=Math.min(c.length,a);for(var b=e;a>b;b++)d+=String.fromCharCode(127&c[b]);return d}function B(c,e,a){var d="";a=Math.min(c.length,a);for(var b=e;a>b;b++)d+=String.fromCharCode(c[b]);return d}function w(d,b,a){var e=d.length;(!b||0>b)&&(b=0),(!a||0>a||a>e)&&(a=e);for(var f="",c=b;a>c;c++)f+=v(d[c]);return f}function x(d,e,f){for(var b=d.slice(e,f),c="",a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c}function c(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function d(b,c,d,e,f,g){if(!a.isBuffer(b))throw new TypeError("buffer must be a Buffer instance");if(c>f||g>c)throw new RangeError("value is out of bounds");if(d+e>b.length)throw new RangeError("index out of range")}function i(c,b,d,e){0>b&&(b=65535+b+1);for(var a=0,f=Math.min(c.length-d,2);f>a;a++)c[d+a]=(b&255<<8*(e?a:1-a))>>>8*(e?a:1-a)}function f(c,b,d,e){0>b&&(b=4294967295+b+1);for(var a=0,f=Math.min(c.length-d,4);f>a;a++)c[d+a]=b>>>8*(e?a:3-a)&255}function n(c,a,b,d,e,f){if(a>e||f>a)throw new RangeError("value is out of bounds");if(b+d>c.length)throw new RangeError("index out of range");if(0>b)throw new RangeError("index out of range")}function o(b,c,a,d,f){return f||n(b,c,a,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(b,c,a,d,23,4),a+4}function p(b,c,a,d,f){return f||n(b,c,a,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(b,c,a,d,52,8),a+8}function y(a){if(a=z(a).replace(N,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function z(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function A(b){return k(b)||a.isBuffer(b)||b&&"object"==typeof b&&"number"==typeof b.length}function v(a){return 16>a?"0"+a.toString(16):a.toString(16)}function j(f,b){b=b||1/0;for(var a,g=f.length,d=null,c=[],e=0;g>e;e++){if(a=f.charCodeAt(e),a>55295&&57344>a){if(!d){if(a>56319){(b-=3)>-1&&c.push(239,191,189);continue}if(e+1===g){(b-=3)>-1&&c.push(239,191,189);continue}d=a;continue}if(56320>a){(b-=3)>-1&&c.push(239,191,189),d=a;continue}a=d-55296<<10|a-56320|65536,d=null}else d&&((b-=3)>-1&&c.push(239,191,189),d=null);if(128>a){if((b-=1)<0)break;c.push(a)}else if(2048>a){if((b-=2)<0)break;c.push(a>>6|192,63&a|128)}else if(65536>a){if((b-=3)<0)break;c.push(a>>12|224,a>>6&63|128,63&a|128)}else{if(!(2097152>a))throw new Error("Invalid code point");if((b-=4)<0)break;c.push(a>>18|240,a>>12&63|128,a>>6&63|128,63&a|128)}}return c}function D(b){for(var c=[],a=0;a<b.length;a++)c.push(255&b.charCodeAt(a));return c}function E(d,g){for(var a,e,f,b=[],c=0;c<d.length&&!((g-=2)<0);c++)a=d.charCodeAt(c),e=a>>8,f=a%256,b.push(f),b.push(e);return b}function q(a){return s.toByteArray(y(a))}function h(b,c,d,e){for(var a=0;e>a&&!(a+d>=c.length||a>=b.length);a++)c[a+d]=b[a];return a}function r(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}var s=m("base64-js"),e=m("ieee754"),k=m("is-array");g.Buffer=a,g.SlowBuffer=l,g.INSPECT_MAX_BYTES=50,a.poolSize=8192;var u=1073741823,M={};a.TYPED_ARRAY_SUPPORT=function(){try{var b=new ArrayBuffer(0),a=new Uint8Array(b);return a.foo=function(){return 42},42===a.foo()&&"function"==typeof a.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(c){return!1}}(),a.isBuffer=function(a){return!(null==a||!a._isBuffer)},a.compare=function(c,d){if(!a.isBuffer(c)||!a.isBuffer(d))throw new TypeError("Arguments must be Buffers");if(c===d)return 0;for(var e=c.length,f=d.length,b=0,g=Math.min(e,f);g>b&&c[b]===d[b];b++);return b!==g&&(e=c[b],f=d[b]),f>e?-1:e>f?1:0},a.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(b,d){if(!k(b))throw new TypeError("list argument must be an Array of Buffers.");if(0===b.length)return new a(0);if(1===b.length)return b[0];var c;if(void 0===d)for(d=0,c=0;c<b.length;c++)d+=b[c].length;var e=new a(d),f=0;for(c=0;c<b.length;c++){var g=b[c];g.copy(e,f),f+=g.length}return e},a.byteLength=function(a,c){var b;switch(a+="",c||"utf8"){case"ascii":case"binary":case"raw":b=a.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":b=2*a.length;break;case"hex":b=a.length>>>1;break;case"utf8":case"utf-8":b=j(a).length;break;case"base64":b=q(a).length;break;default:b=a.length}return b},a.prototype.length=void 0,a.prototype.parent=void 0,a.prototype.toString=function(c,b,a){var d=!1;if(b>>>=0,a=void 0===a||a===1/0?this.length:a>>>0,c||(c="utf8"),0>b&&(b=0),a>this.length&&(a=this.length),b>=a)return"";for(;;)switch(c){case"hex":return w(this,b,a);case"utf8":case"utf-8":return F(this,b,a);case"ascii":return L(this,b,a);case"binary":return B(this,b,a);case"base64":return H(this,b,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,b,a);default:if(d)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),d=!0}},a.prototype.equals=function(b){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===a.compare(this,b)},a.prototype.inspect=function(){var a="",b=g.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},a.prototype.compare=function(b){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?0:a.compare(this,b)},a.prototype.indexOf=function(c,b){function d(d,e,c){for(var a=-1,b=0;c+b<d.length;b++)if(d[c+b]===e[-1===a?0:b-a]){if(-1===a&&(a=b),b-a+1===e.length)return c+a}else a=-1;return-1}if(b>2147483647?b=2147483647:-2147483648>b&&(b=-2147483648),b>>=0,0===this.length)return-1;if(b>=this.length)return-1;if(0>b&&(b=Math.max(this.length+b,0)),"string"==typeof c)return 0===c.length?-1:String.prototype.indexOf.call(this,c,b);if(a.isBuffer(c))return d(this,c,b);if("number"==typeof c)return a.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,c,b):d(this,[c],b);throw new TypeError("val must be string, number or Buffer")},a.prototype.get=function(a){return this.readUInt8(a)},a.prototype.set=function(a,b){return this.writeUInt8(a,b)},a.prototype.write=function(e,b,a,c){if(isFinite(b))isFinite(a)||(c=a,a=void 0);else{var g=c;c=b,b=a,a=g}if(b=Number(b)||0,0>a||0>b||b>this.length)throw new RangeError("attempt to write outside buffer bounds");var f=this.length-b;a?(a=Number(a),a>f&&(a=f)):a=f,c=String(c||"utf8").toLowerCase();var d;switch(c){case"hex":d=J(this,e,b,a);break;case"utf8":case"utf-8":d=K(this,e,b,a);break;case"ascii":d=t(this,e,b,a);break;case"binary":d=G(this,e,b,a);break;case"base64":d=C(this,e,b,a);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":d=I(this,e,b,a);break;default:throw new TypeError("Unknown encoding: "+c)}return d},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(b,c){var d=this.length;b=~~b,c=void 0===c?d:~~c,0>b?(b+=d,0>b&&(b=0)):b>d&&(b=d),0>c?(c+=d,0>c&&(c=0)):c>d&&(c=d),b>c&&(c=b);var e;if(a.TYPED_ARRAY_SUPPORT)e=a._augment(this.subarray(b,c));else{var g=c-b;e=new a(g,void 0);for(var f=0;g>f;f++)e[f]=this[f+b]}return e.length&&(e.parent=this.parent||this),e},a.prototype.readUIntLE=function(a,b,g){a>>>=0,b>>>=0,g||c(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},a.prototype.readUIntBE=function(b,a,f){b>>>=0,a>>>=0,f||c(b,a,this.length);for(var d=this[b+--a],e=1;a>0&&(e*=256);)d+=this[b+--a]*e;return d},a.prototype.readUInt8=function(a,b){return b||c(a,1,this.length),this[a]},a.prototype.readUInt16LE=function(a,b){return b||c(a,2,this.length),this[a]|this[a+1]<<8},a.prototype.readUInt16BE=function(a,b){return b||c(a,2,this.length),this[a]<<8|this[a+1]},a.prototype.readUInt32LE=function(a,b){return b||c(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},a.prototype.readUInt32BE=function(a,b){return b||c(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},a.prototype.readIntLE=function(a,b,g){a>>>=0,b>>>=0,g||c(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},a.prototype.readIntBE=function(a,b,g){a>>>=0,b>>>=0,g||c(a,b,this.length);for(var f=b,d=1,e=this[a+--f];f>0&&(d*=256);)e+=this[a+--f]*d;return d*=128,e>=d&&(e-=Math.pow(2,8*b)),e},a.prototype.readInt8=function(a,b){return b||c(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},a.prototype.readInt16LE=function(a,d){d||c(a,2,this.length);var b=this[a]|this[a+1]<<8;return 32768&b?4294901760|b:b},a.prototype.readInt16BE=function(a,d){d||c(a,2,this.length);var b=this[a+1]|this[a]<<8;return 32768&b?4294901760|b:b},a.prototype.readInt32LE=function(a,b){return b||c(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},a.prototype.readInt32BE=function(a,b){return b||c(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},a.prototype.readFloatLE=function(a,b){return b||c(a,4,this.length),e.read(this,a,!0,23,4)},a.prototype.readFloatBE=function(a,b){return b||c(a,4,this.length),e.read(this,a,!1,23,4)},a.prototype.readDoubleLE=function(a,b){return b||c(a,8,this.length),e.read(this,a,!0,52,8)},a.prototype.readDoubleBE=function(a,b){return b||c(a,8,this.length),e.read(this,a,!1,52,8)},a.prototype.writeUIntLE=function(a,b,c,g){a=+a,b>>>=0,c>>>=0,g||d(this,a,b,c,Math.pow(2,8*c),0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e>>>0&255;return b+c},a.prototype.writeUIntBE=function(a,b,c,g){a=+a,b>>>=0,c>>>=0,g||d(this,a,b,c,Math.pow(2,8*c),0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f>>>0&255;return b+c},a.prototype.writeUInt8=function(b,c,e){return b=+b,c>>>=0,e||d(this,b,c,1,255,0),a.TYPED_ARRAY_SUPPORT||(b=Math.floor(b)),this[c]=b,c+1},a.prototype.writeUInt16LE=function(b,c,e){return b=+b,c>>>=0,e||d(this,b,c,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[c]=b,this[c+1]=b>>>8):i(this,b,c,!0),c+2},a.prototype.writeUInt16BE=function(b,c,e){return b=+b,c>>>=0,e||d(this,b,c,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b):i(this,b,c,!1),c+2},a.prototype.writeUInt32LE=function(b,c,e){return b=+b,c>>>=0,e||d(this,b,c,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=b):f(this,b,c,!0),c+4},a.prototype.writeUInt32BE=function(b,c,e){return b=+b,c>>>=0,e||d(this,b,c,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b):f(this,b,c,!1),c+4},a.prototype.writeIntLE=function(a,b,c,g){a=+a,b>>>=0,g||d(this,a,b,c,Math.pow(2,8*c-1)-1,-Math.pow(2,8*c-1));var e=0,f=1,h=0>a?1:0;for(this[b]=255&a;++e<c&&(f*=256);)this[b+e]=(a/f>>0)-h&255;return b+c},a.prototype.writeIntBE=function(a,b,c,g){a=+a,b>>>=0,g||d(this,a,b,c,Math.pow(2,8*c-1)-1,-Math.pow(2,8*c-1));var e=c-1,f=1,h=0>a?1:0;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=(a/f>>0)-h&255;return b+c},a.prototype.writeInt8=function(b,c,e){return b=+b,c>>>=0,e||d(this,b,c,1,127,-128),a.TYPED_ARRAY_SUPPORT||(b=Math.floor(b)),0>b&&(b=255+b+1),this[c]=b,c+1},a.prototype.writeInt16LE=function(b,c,e){return b=+b,c>>>=0,e||d(this,b,c,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[c]=b,this[c+1]=b>>>8):i(this,b,c,!0),
c+2},a.prototype.writeInt16BE=function(b,c,e){return b=+b,c>>>=0,e||d(this,b,c,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b):i(this,b,c,!1),c+2},a.prototype.writeInt32LE=function(b,c,e){return b=+b,c>>>=0,e||d(this,b,c,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[c]=b,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24):f(this,b,c,!0),c+4},a.prototype.writeInt32BE=function(b,c,e){return b=+b,c>>>=0,e||d(this,b,c,4,2147483647,-2147483648),0>b&&(b=4294967295+b+1),a.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b):f(this,b,c,!1),c+4},a.prototype.writeFloatLE=function(a,b,c){return o(this,a,b,!0,c)},a.prototype.writeFloatBE=function(a,b,c){return o(this,a,b,!1,c)},a.prototype.writeDoubleLE=function(a,b,c){return p(this,a,b,!0,c)},a.prototype.writeDoubleBE=function(a,b,c){return p(this,a,b,!1,c)},a.prototype.copy=function(e,d,b,c){var h=this;if(b||(b=0),c||0===c||(c=this.length),d>=e.length&&(d=e.length),d||(d=0),c>0&&b>c&&(c=b),c===b)return 0;if(0===e.length||0===h.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>b||b>=h.length)throw new RangeError("sourceStart out of bounds");if(0>c)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),e.length-d<c-b&&(c=e.length-d+b);var f=c-b;if(1e3>f||!a.TYPED_ARRAY_SUPPORT)for(var g=0;f>g;g++)e[g+d]=this[g+b];else e._set(this.subarray(b,b+f),d);return f},a.prototype.fill=function(d,b,c){if(d||(d=0),b||(b=0),c||(c=this.length),b>c)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new RangeError("start out of bounds");if(0>c||c>this.length)throw new RangeError("end out of bounds");var a;if("number"==typeof d)for(a=b;c>a;a++)this[a]=d;else{var e=j(d.toString()),f=e.length;for(a=b;c>a;a++)this[a]=e[a%f]}return this}},a.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(a.TYPED_ARRAY_SUPPORT)return new a(this).buffer;for(var c=new Uint8Array(this.length),b=0,d=c.length;d>b;b+=1)c[b]=this[b];return c.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var b=a.prototype;a._augment=function(c){return c.constructor=a,c._isBuffer=!0,c._get=c.get,c._set=c.set,c.get=b.get,c.set=b.set,c.write=b.write,c.toString=b.toString,c.toLocaleString=b.toString,c.toJSON=b.toJSON,c.equals=b.equals,c.compare=b.compare,c.indexOf=b.indexOf,c.copy=b.copy,c.slice=b.slice,c.readUIntLE=b.readUIntLE,c.readUIntBE=b.readUIntBE,c.readUInt8=b.readUInt8,c.readUInt16LE=b.readUInt16LE,c.readUInt16BE=b.readUInt16BE,c.readUInt32LE=b.readUInt32LE,c.readUInt32BE=b.readUInt32BE,c.readIntLE=b.readIntLE,c.readIntBE=b.readIntBE,c.readInt8=b.readInt8,c.readInt16LE=b.readInt16LE,c.readInt16BE=b.readInt16BE,c.readInt32LE=b.readInt32LE,c.readInt32BE=b.readInt32BE,c.readFloatLE=b.readFloatLE,c.readFloatBE=b.readFloatBE,c.readDoubleLE=b.readDoubleLE,c.readDoubleBE=b.readDoubleBE,c.writeUInt8=b.writeUInt8,c.writeUIntLE=b.writeUIntLE,c.writeUIntBE=b.writeUIntBE,c.writeUInt16LE=b.writeUInt16LE,c.writeUInt16BE=b.writeUInt16BE,c.writeUInt32LE=b.writeUInt32LE,c.writeUInt32BE=b.writeUInt32BE,c.writeIntLE=b.writeIntLE,c.writeIntBE=b.writeIntBE,c.writeInt8=b.writeInt8,c.writeInt16LE=b.writeInt16LE,c.writeInt16BE=b.writeInt16BE,c.writeInt32LE=b.writeInt32LE,c.writeInt32BE=b.writeInt32BE,c.writeFloatLE=b.writeFloatLE,c.writeFloatBE=b.writeFloatBE,c.writeDoubleLE=b.writeDoubleLE,c.writeDoubleBE=b.writeDoubleBE,c.fill=b.fill,c.inspect=b.inspect,c.toArrayBuffer=b.toArrayBuffer,c};var N=/[^+\/0-9A-z\-]/g},{"base64-js":14,ieee754:15,"is-array":16}],14:[function(c,d,a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(d){"use strict";function a(b){var a=b.charCodeAt(0);return a===g||a===l?62:a===m||a===h?63:c>a?-1:c+10>a?a-c+26+26:f+26>a?a-f:e+26>a?a-e+26:void 0}function i(b){function e(a){g[l++]=a}var c,h,i,d,f,g;if(b.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var j=b.length;f="="===b.charAt(j-2)?2:"="===b.charAt(j-1)?1:0,g=new k(3*b.length/4-f),i=f>0?b.length-4:b.length;var l=0;for(c=0,h=0;i>c;c+=4,h+=3)d=a(b.charAt(c))<<18|a(b.charAt(c+1))<<12|a(b.charAt(c+2))<<6|a(b.charAt(c+3)),e((16711680&d)>>16),e((65280&d)>>8),e(255&d);return 2===f?(d=a(b.charAt(c))<<2|a(b.charAt(c+1))>>4,e(255&d)):1===f&&(d=a(b.charAt(c))<<10|a(b.charAt(c+1))<<4|a(b.charAt(c+2))>>2,e(d>>8&255),e(255&d)),g}function j(a){function c(a){return b.charAt(a)}function i(a){return c(a>>18&63)+c(a>>12&63)+c(a>>6&63)+c(63&a)}var f,d,g,h=a.length%3,e="";for(f=0,g=a.length-h;g>f;f+=3)d=(a[f]<<16)+(a[f+1]<<8)+a[f+2],e+=i(d);switch(h){case 1:d=a[a.length-1],e+=c(d>>2),e+=c(d<<4&63),e+="==";break;case 2:d=(a[a.length-2]<<8)+a[a.length-1],e+=c(d>>10),e+=c(d>>4&63),e+=c(d<<2&63),e+="="}return e}var k="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),m="/".charCodeAt(0),c="0".charCodeAt(0),e="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),h="_".charCodeAt(0);d.toByteArray=i,d.fromByteArray=j}("undefined"==typeof a?this.base64js={}:a)},{}],15:[function(b,c,a){a.read=function(i,h,m,f,l){var a,d,n=8*l-f-1,k=(1<<n)-1,j=k>>1,b=-7,c=m?l-1:0,g=m?-1:1,e=i[h+c];for(c+=g,a=e&(1<<-b)-1,e>>=-b,b+=n;b>0;a=256*a+i[h+c],c+=g,b-=8);for(d=a&(1<<-b)-1,a>>=-b,b+=f;b>0;d=256*d+i[h+c],c+=g,b-=8);if(0===a)a=1-j;else{if(a===k)return d?0/0:(e?-1:1)*(1/0);d+=Math.pow(2,f),a-=j}return(e?-1:1)*d*Math.pow(2,a-f)},a.write=function(k,b,l,o,c,n){var a,d,e,h=8*n-c-1,i=(1<<h)-1,f=i>>1,m=23===c?Math.pow(2,-24)-Math.pow(2,-77):0,g=o?0:n-1,j=o?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(d=isNaN(b)?1:0,a=i):(a=Math.floor(Math.log(b)/Math.LN2),b*(e=Math.pow(2,-a))<1&&(a--,e*=2),b+=a+f>=1?m/e:m*Math.pow(2,1-f),b*e>=2&&(a++,e/=2),a+f>=i?(d=0,a=i):a+f>=1?(d=(b*e-1)*Math.pow(2,c),a+=f):(d=b*Math.pow(2,f-1)*Math.pow(2,c),a=0));c>=8;k[l+g]=255&d,g+=j,d/=256,c-=8);for(a=a<<c|d,h+=c;h>0;k[l+g]=255&a,g+=j,a/=256,h-=8);k[l+g-j]|=128*p}},{}],16:[function(d,a){var b=Array.isArray,c=Object.prototype.toString;a.exports=b||function(a){return!!a&&"[object Array]"==c.call(a)}},{}],17:[function(g,e){function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function b(a){return"function"==typeof a}function f(a){return"number"==typeof a}function c(a){return"object"==typeof a&&null!==a}function d(a){return void 0===a}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},a.prototype.emit=function(j){var h,e,f,g,a,i;if(this._events||(this._events={}),"error"===j&&(!this._events.error||c(this._events.error)&&!this._events.error.length)){if(h=arguments[1],h instanceof Error)throw h;throw TypeError('Uncaught, unspecified "error" event.')}if(e=this._events[j],d(e))return!1;if(b(e))switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:for(f=arguments.length,g=new Array(f-1),a=1;f>a;a++)g[a-1]=arguments[a];e.apply(this,g)}else if(c(e)){for(f=arguments.length,g=new Array(f-1),a=1;f>a;a++)g[a-1]=arguments[a];for(i=e.slice(),f=i.length,a=0;f>a;a++)i[a].apply(this,g)}return!0},a.prototype.addListener=function(e,f){var g;if(!b(f))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,b(f.listener)?f.listener:f),this._events[e]?c(this._events[e])?this._events[e].push(f):this._events[e]=[this._events[e],f]:this._events[e]=f,c(this._events[e])&&!this._events[e].warned){var g;g=d(this._maxListeners)?a.defaultMaxListeners:this._maxListeners,g&&g>0&&this._events[e].length>g&&(this._events[e].warned=!0,"function"==typeof console.trace)}return this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(d,a){function c(){this.removeListener(d,c),e||(e=!0,a.apply(this,arguments))}if(!b(a))throw TypeError("listener must be a function");var e=!1;return c.listener=a,this.on(d,c),this},a.prototype.removeListener=function(e,d){var a,g,h,f;if(!b(d))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=this._events[e],h=a.length,g=-1,a===d||b(a.listener)&&a.listener===d)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,d);else if(c(a)){for(f=h;f-->0;)if(a[f]===d||a[f].listener&&a[f].listener===d){g=f;break}if(0>g)return this;1===a.length?(a.length=0,delete this._events[e]):a.splice(g,1),this._events.removeListener&&this.emit("removeListener",e,d)}return this},a.prototype.removeAllListeners=function(a){var d,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(d in this._events)"removeListener"!==d&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],b(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},a.prototype.listeners=function(a){var c;return c=this._events&&this._events[a]?b(this._events[a])?[this._events[a]]:this._events[a].slice():[]},a.listenerCount=function(a,c){var d;return d=a._events&&a._events[c]?b(a._events[c])?1:a._events[c].length:0}},{}],18:[function(b,a){a.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],19:[function(b,a){a.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],20:[function(g,e){function f(){if(!d){d=!0;for(var b,a=c.length;a;){b=c,c=[];for(var e=-1;++e<a;)b[e]();a=c.length}d=!1}}function b(){}var a=e.exports={},c=[],d=!1;a.nextTick=function(a){c.push(a),d||setTimeout(f,0)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=b,a.addListener=b,a.once=b,a.off=b,a.removeListener=b,a.removeAllListeners=b,a.emit=b,a.binding=function(){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],21:[function(a,b){b.exports=a("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":22}],22:[function(a,b){(function(g){function c(a){return this instanceof c?(f.call(this,a),d.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",h)):new c(a)}function h(){this.allowHalfOpen||this._writableState.ended||g.nextTick(this.end.bind(this))}function i(b,c){for(var a=0,d=b.length;d>a;a++)c(b[a],a)}b.exports=c;var j=Object.keys||function(b){var a=[];for(var c in b)a.push(c);return a},e=a("core-util-is");e.inherits=a("inherits");var f=a("./_stream_readable"),d=a("./_stream_writable");e.inherits(c,f),i(j(d.prototype),function(a){c.prototype[a]||(c.prototype[a]=d.prototype[a])})}).call(this,a("_process"))},{"./_stream_readable":24,"./_stream_writable":26,_process:20,"core-util-is":27,inherits:18}],23:[function(b,e){function a(b){return this instanceof a?void c.call(this,b):new a(b)}e.exports=a;var c=b("./_stream_transform"),d=b("core-util-is");d.inherits=b("inherits"),d.inherits(a,c),a.prototype._transform=function(a,c,b){b(null,a)}},{"./_stream_transform":25,"core-util-is":27,inherits:18}],24:[function(a,b){(function(f){function q(b,d){var e=a("./_stream_duplex");b=b||{};var c=b.highWaterMark,f=b.objectMode?16:16384;this.highWaterMark=c||0===c?c:f,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!b.objectMode,d instanceof e&&(this.objectMode=this.objectMode||!!b.readableObjectMode),this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(g||(g=a("string_decoder/").StringDecoder),this.decoder=new g(b.encoding),this.encoding=b.encoding)}function d(b){a("./_stream_duplex");return this instanceof d?(this._readableState=new q(b,this),this.readable=!0,void m.call(this)):new d(b)}function o(c,a,b,i,d){var f=B(a,b);if(f)c.emit("error",f);else if(e.isNullOrUndefined(b))a.reading=!1,a.ended||A(c,a);else if(a.objectMode||b&&b.length>0)if(a.ended&&!d){var g=new Error("stream.push() after EOF");c.emit("error",g)}else if(a.endEmitted&&d){var g=new Error("stream.unshift() after end event");c.emit("error",g)}else!a.decoder||d||i||(b=a.decoder.write(b)),d||(a.reading=!1),a.flowing&&0===a.length&&!a.sync?(c.emit("data",b),c.read(0)):(a.length+=a.objectMode?1:b.length,d?a.buffer.unshift(b):a.buffer.push(b),a.needReadable&&h(c)),t(c,a);else d||(a.reading=!1);return D(a)}function D(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function C(a){if(a>=n)a=n;else{a--;for(var b=1;32>b;b<<=1)a|=a>>b;a++}return a}function p(b,a){return 0===a.length&&a.ended?0:a.objectMode?0===b?0:1:isNaN(b)||e.isNull(b)?a.flowing&&a.buffer.length?a.buffer[0].length:a.length:0>=b?0:(b>a.highWaterMark&&(a.highWaterMark=C(b)),b>a.length?a.ended?a.length:(a.needReadable=!0,0):b)}function B(c,a){var b=null;return e.isBuffer(a)||e.isString(a)||e.isNullOrUndefined(a)||c.objectMode||(b=new TypeError("Invalid non-string/buffer chunk")),b}function A(c,a){if(a.decoder&&!a.ended){var b=a.decoder.end();b&&b.length&&(a.buffer.push(b),a.length+=a.objectMode?1:b.length)}a.ended=!0,h(c)}function h(b){var a=b._readableState;a.needReadable=!1,a.emittedReadable||(c("emitReadable",a.flowing),a.emittedReadable=!0,a.sync?f.nextTick(function(){s(b)}):s(b))}function s(a){c("emit readable"),a.emit("readable"),j(a)}function t(b,a){a.readingMore||(a.readingMore=!0,f.nextTick(function(){y(b,a)}))}function y(d,a){for(var b=a.length;!a.reading&&!a.flowing&&!a.ended&&a.length<a.highWaterMark&&(c("maybeReadMore read 0"),d.read(0),b!==a.length);)b=a.length;a.readingMore=!1}function z(a){return function(){var b=a._readableState;c("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&i.listenerCount(a,"data")&&(b.flowing=!0,j(a))}}function E(b,a){a.resumeScheduled||(a.resumeScheduled=!0,f.nextTick(function(){u(b,a)}))}function u(a,b){b.resumeScheduled=!1,a.emit("resume"),j(a),b.flowing&&!b.reading&&a.read(0)}function j(b){var a=b._readableState;if(c("flow",a.flowing),a.flowing)do var d=b.read();while(null!==d&&a.flowing)}function r(b,f){var c,a=f.buffer,i=f.length,h=!!f.decoder,m=!!f.objectMode;if(0===a.length)return null;if(0===i)c=null;else if(m)c=a.shift();else if(!b||b>=i)c=h?a.join(""):k.concat(a,i),a.length=0;else if(b<a[0].length){var d=a[0];c=d.slice(0,b),a[0]=d.slice(b)}else if(b===a[0].length)c=a.shift();else{c=h?"":new k(b);for(var g=0,j=0,l=a.length;l>j&&b>g;j++){var d=a[0],e=Math.min(b-g,d.length);h?c+=d.slice(0,e):d.copy(c,g,0,e),e<d.length?a[0]=d.slice(e):a.shift(),g+=e}}return c}function l(b){var a=b._readableState;if(a.length>0)throw new Error("endReadable called on non-empty stream");a.endEmitted||(a.ended=!0,f.nextTick(function(){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}))}function v(b,c){for(var a=0,d=b.length;d>a;a++)c(b[a],a)}function w(b,c){for(var a=0,d=b.length;d>a;a++)if(b[a]===c)return a;return-1}b.exports=d;var x=a("isarray"),k=a("buffer").Buffer;d.ReadableState=q;var i=a("events").EventEmitter;i.listenerCount||(i.listenerCount=function(a,b){return a.listeners(b).length});var m=a("stream"),e=a("core-util-is");e.inherits=a("inherits");var g,c=a("util");c=c&&c.debuglog?c.debuglog("stream"):function(){},e.inherits(d,m),d.prototype.push=function(b,a){var c=this._readableState;return e.isString(b)&&!c.objectMode&&(a=a||c.defaultEncoding,a!==c.encoding&&(b=new k(b,a),a="")),o(this,c,b,a,!1)},d.prototype.unshift=function(a){var b=this._readableState;return o(this,b,a,"",!0)},d.prototype.setEncoding=function(b){return g||(g=a("string_decoder/").StringDecoder),this._readableState.decoder=new g(b),this._readableState.encoding=b,this};var n=8388608;d.prototype.read=function(b){c("read",b);var a=this._readableState,g=b;if((!e.isNumber(b)||b>0)&&(a.emittedReadable=!1),0===b&&a.needReadable&&(a.length>=a.highWaterMark||a.ended))return c("read: emitReadable",a.length,a.ended),0===a.length&&a.ended?l(this):h(this),null;if(b=p(b,a),0===b&&a.ended)return 0===a.length&&l(this),null;var d=a.needReadable;c("need readable",d),(0===a.length||a.length-b<a.highWaterMark)&&(d=!0,c("length less than watermark",d)),(a.ended||a.reading)&&(d=!1,c("reading or ended",d)),d&&(c("do read"),a.reading=!0,a.sync=!0,0===a.length&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1),d&&!a.reading&&(b=p(g,a));var f;return f=b>0?r(b,a):null,e.isNull(f)&&(a.needReadable=!0,b=0),a.length-=b,0!==a.length||a.ended||(a.needReadable=!0),g!==b&&a.ended&&0===a.length&&l(this),e.isNull(f)||this.emit("data",f),f},d.prototype._read=function(){this.emit("error",new Error("not implemented"))},d.prototype.pipe=function(a,k){function p(a){c("onunpipe"),a===b&&g()}function o(){c("onend"),a.end()}function g(){c("cleanup"),a.removeListener("close",m),a.removeListener("finish",l),a.removeListener("drain",j),a.removeListener("error",e),a.removeListener("unpipe",p),b.removeListener("end",o),b.removeListener("end",g),b.removeListener("data",n),!d.awaitDrain||a._writableState&&!a._writableState.needDrain||j()}function n(d){c("ondata");var e=a.write(d);!1===e&&(c("false write response, pause",b._readableState.awaitDrain),b._readableState.awaitDrain++,b.pause())}function e(b){c("onerror",b),h(),a.removeListener("error",e),0===i.listenerCount(a,"error")&&a.emit("error",b)}function m(){a.removeListener("finish",l),h()}function l(){c("onfinish"),a.removeListener("close",m),h()}function h(){c("unpipe"),b.unpipe(a)}var b=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=a;break;case 1:d.pipes=[d.pipes,a];break;default:d.pipes.push(a)}d.pipesCount+=1,c("pipe count=%d opts=%j",d.pipesCount,k);var r=(!k||k.end!==!1)&&a!==f.stdout&&a!==f.stderr,q=r?o:g;d.endEmitted?f.nextTick(q):b.once("end",q),a.on("unpipe",p);var j=z(b);return a.on("drain",j),b.on("data",n),a._events&&a._events.error?x(a._events.error)?a._events.error.unshift(e):a._events.error=[e,a._events.error]:a.on("error",e),a.once("close",m),a.once("finish",l),a.emit("pipe",b),d.flowing||(c("pipe resume"),b.resume()),a},d.prototype.unpipe=function(b){var a=this._readableState;if(0===a.pipesCount)return this;if(1===a.pipesCount)return b&&b!==a.pipes?this:(b||(b=a.pipes),a.pipes=null,a.pipesCount=0,a.flowing=!1,b&&b.emit("unpipe",this),this);if(!b){var d=a.pipes,e=a.pipesCount;a.pipes=null,a.pipesCount=0,a.flowing=!1;for(var c=0;e>c;c++)d[c].emit("unpipe",this);return this}var c=w(a.pipes,b);return-1===c?this:(a.pipes.splice(c,1),a.pipesCount-=1,1===a.pipesCount&&(a.pipes=a.pipes[0]),b.emit("unpipe",this),this)},d.prototype.on=function(b,d){var e=m.prototype.on.call(this,b,d);if("data"===b&&!1!==this._readableState.flowing&&this.resume(),"readable"===b&&this.readable){var a=this._readableState;if(!a.readableListening)if(a.readableListening=!0,a.emittedReadable=!1,a.needReadable=!0,a.reading)a.length&&h(this,a);else{var g=this;f.nextTick(function(){c("readable nexttick read 0"),g.read(0)})}}return e},d.prototype.addListener=d.prototype.on,d.prototype.resume=function(){var a=this._readableState;return a.flowing||(c("resume"),a.flowing=!0,a.reading||(c("resume read 0"),this.read(0)),E(this,a)),this},d.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this},d.prototype.wrap=function(a){var d=this._readableState,g=!1,b=this;a.on("end",function(){if(c("wrapped end"),d.decoder&&!d.ended){var a=d.decoder.end();a&&a.length&&b.push(a)}b.push(null)}),a.on("data",function(e){if(c("wrapped data"),d.decoder&&(e=d.decoder.write(e)),e&&(d.objectMode||e.length)){var f=b.push(e);f||(g=!0,a.pause())}});for(var f in a)e.isFunction(a[f])&&e.isUndefined(this[f])&&(this[f]=function(b){return function(){return a[b].apply(a,arguments)}}(f));var h=["error","close","destroy","pause","resume"];return v(h,function(c){a.on(c,b.emit.bind(b,c))}),b._read=function(b){c("wrapped _read",b),g&&(g=!1,a.resume())},b},d._fromList=r}).call(this,a("_process"))},{"./_stream_duplex":22,_process:20,buffer:13,"core-util-is":27,events:17,inherits:18,isarray:19,stream:32,"string_decoder/":33,util:12}],25:[function(c,f){function g(b,a){this.afterTransform=function(b,c){return h(a,b,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function h(a,g,f){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,b.isNullOrUndefined(f)||a.push(f),e&&e(g);var c=a._readableState;c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&a._read(c.highWaterMark)}function a(c){if(!(this instanceof a))return new a(c);d.call(this,c),this._transformState=new g(c,this);var f=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){b.isFunction(this._flush)?this._flush(function(a){e(f,a)}):e(f)})}function e(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=a._transformState;if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}f.exports=a;var d=c("./_stream_duplex"),b=c("core-util-is");b.inherits=c("inherits"),b.inherits(a,d),a.prototype.push=function(a,b){return this._transformState.needTransform=!1,d.prototype.push.call(this,a,b)},a.prototype._transform=function(){throw new Error("not implemented")},a.prototype._write=function(c,d,e){var a=this._transformState;if(a.writecb=e,a.writechunk=c,a.writeencoding=d,!a.transforming){var b=this._readableState;(a.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},a.prototype._read=function(){var a=this._transformState;b.isNull(a.writechunk)||!a.writecb||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))}},{"./_stream_duplex":22,"core-util-is":27,inherits:18}],26:[function(a,b){(function(e){function o(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function g(b,d){var e=a("./_stream_duplex");b=b||{};var c=b.highWaterMark,f=b.objectMode?16:16384;this.highWaterMark=c||0===c?c:f,this.objectMode=!!b.objectMode,d instanceof e&&(this.objectMode=this.objectMode||!!b.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var g=b.decodeStrings===!1;this.decodeStrings=!g,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){x(d,a)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function d(b){var c=a("./_stream_duplex");return this instanceof d||this instanceof c?(this._writableState=new g(b,this),this.writable=!0,void k.call(this)):new d(b)}function w(b,d,c){var a=new Error("write after end");b.emit("error",a),e.nextTick(function(){c(a)})}function t(f,g,a,h){var b=!0;if(!(c.isBuffer(a)||c.isString(a)||c.isNullOrUndefined(a)||g.objectMode)){var d=new TypeError("Invalid non-string/buffer chunk");f.emit("error",d),e.nextTick(function(){h(d)}),b=!1}return b}function n(b,a,d){return!b.objectMode&&b.decodeStrings!==!1&&c.isString(a)&&(a=new v(a,d)),a}function r(i,a,b,d,e){b=n(a,b,d),c.isBuffer(b)&&(d="buffer");var g=a.objectMode?1:b.length;a.length+=g;var h=a.length<a.highWaterMark;return h||(a.needDrain=!0),a.writing||a.corked?a.buffer.push(new o(b,d,e)):f(i,a,!1,g,b,d,e),h}function f(b,a,d,e,c,f,g){a.writelen=e,a.writecb=g,a.writing=!0,a.sync=!0,d?b._writev(c,a.onwrite):b._write(c,f,a.onwrite),a.sync=!1}function q(b,c,f,a,d){f?e.nextTick(function(){c.pendingcb--,d(a)}):(c.pendingcb--,d(a)),b._writableState.errorEmitted=!0,b.emit("error",a)}function s(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function x(b,f){var a=b._writableState,g=a.sync,c=a.writecb;if(s(a),f)q(b,a,g,f,c);else{var d=j(b,a);d||a.corked||a.bufferProcessing||!a.buffer.length||l(b,a),g?e.nextTick(function(){m(b,a,d,c)}):m(b,a,d,c)}}function m(b,a,c,d){c||p(b,a),a.pendingcb--,d(),h(b,a)}function p(b,a){0===a.length&&a.needDrain&&(a.needDrain=!1,b.emit("drain"))}function l(c,a){if(a.bufferProcessing=!0,c._writev&&a.buffer.length>1){for(var d=[],b=0;b<a.buffer.length;b++)d.push(a.buffer[b].callback);a.pendingcb++,f(c,a,!0,a.length,a.buffer,"",function(c){for(var b=0;b<d.length;b++)a.pendingcb--,d[b](c)}),a.buffer=[]}else{for(var b=0;b<a.buffer.length;b++){var e=a.buffer[b],g=e.chunk,h=e.encoding,i=e.callback,j=a.objectMode?1:g.length;if(f(c,a,!1,j,g,h,i),a.writing){b++;break}}b<a.buffer.length?a.buffer=a.buffer.slice(b):a.buffer.length=0}a.bufferProcessing=!1}function j(b,a){return a.ending&&0===a.length&&!a.finished&&!a.writing}function i(b,a){a.prefinished||(a.prefinished=!0,b.emit("prefinish"))}function h(b,a){var c=j(b,a);return c&&(0===a.pendingcb?(i(b,a),a.finished=!0,b.emit("finish")):i(b,a)),c}function u(c,a,b){a.ending=!0,h(c,a),b&&(a.finished?e.nextTick(b):c.once("finish",b)),a.ended=!0}b.exports=d;var v=a("buffer").Buffer;d.WritableState=g;var c=a("core-util-is");c.inherits=a("inherits");var k=a("stream");c.inherits(d,k),d.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},d.prototype.write=function(e,a,b){var d=this._writableState,f=!1;return c.isFunction(a)&&(b=a,a=null),c.isBuffer(e)?a="buffer":a||(a=d.defaultEncoding),c.isFunction(b)||(b=function(){}),d.ended?w(this,d,b):t(this,d,e,b)&&(d.pendingcb++,f=r(this,d,e,a,b)),f},d.prototype.cork=function(){var a=this._writableState;a.corked++},d.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.buffer.length||l(this,a))},d.prototype._write=function(b,c,a){a(new Error("not implemented"))},d.prototype._writev=null,d.prototype.end=function(a,b,e){var d=this._writableState;c.isFunction(a)?(e=a,a=null,b=null):c.isFunction(b)&&(e=b,b=null),c.isNullOrUndefined(a)||this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||u(this,d,e)}}).call(this,a("_process"))},{"./_stream_duplex":22,_process:20,buffer:13,"core-util-is":27,inherits:18,stream:32}],27:[function(b,c,a){(function(l){function j(a){return Array.isArray(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function r(a){return void 0===a}function k(a){return b(a)&&"[object RegExp]"===c(a)}function b(a){return"object"==typeof a&&null!==a}function m(a){return b(a)&&"[object Date]"===c(a)}function n(a){return b(a)&&("[object Error]"===c(a)||a instanceof Error)}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function q(a){return l.isBuffer(a)}function c(a){return Object.prototype.toString.call(a)}a.isArray=j,a.isBoolean=d,a.isNull=e,a.isNullOrUndefined=f,a.isNumber=g,a.isString=h,a.isSymbol=i,a.isUndefined=r,a.isRegExp=k,a.isObject=b,a.isDate=m,a.isError=n,a.isFunction=o,a.isPrimitive=p,a.isBuffer=q}).call(this,b("buffer").Buffer)},{buffer:13}],28:[function(a,b){b.exports=a("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":23}],29:[function(b,c,a){a=c.exports=b("./lib/_stream_readable.js"),a.Stream=b("stream"),a.Readable=a,a.Writable=b("./lib/_stream_writable.js"),a.Duplex=b("./lib/_stream_duplex.js"),a.Transform=b("./lib/_stream_transform.js"),a.PassThrough=b("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":22,"./lib/_stream_passthrough.js":23,"./lib/_stream_readable.js":24,"./lib/_stream_transform.js":25,"./lib/_stream_writable.js":26,stream:32}],30:[function(a,b){b.exports=a("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":25}],31:[function(a,b){b.exports=a("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":26}],32:[function(b,d){function a(){c.call(this)}d.exports=a;var c=b("events").EventEmitter,e=b("inherits");e(a,c),a.Readable=b("readable-stream/readable.js"),a.Writable=b("readable-stream/writable.js"),a.Duplex=b("readable-stream/duplex.js"),a.Transform=b("readable-stream/transform.js"),a.PassThrough=b("readable-stream/passthrough.js"),a.Stream=a,a.prototype.pipe=function(b,g){function h(c){b.writable&&!1===b.write(c)&&a.pause&&a.pause()}function i(){a.readable&&a.resume&&a.resume()}function j(){f||(f=!0,b.end())}function k(){f||(f=!0,"function"==typeof b.destroy&&b.destroy())}function e(a){if(d(),0===c.listenerCount(this,"error"))throw a}function d(){a.removeListener("data",h),b.removeListener("drain",i),a.removeListener("end",j),a.removeListener("close",k),a.removeListener("error",e),b.removeListener("error",e),a.removeListener("end",d),a.removeListener("close",d),b.removeListener("close",d)}var a=this;a.on("data",h),b.on("drain",i),b._isStdio||g&&g.end===!1||(a.on("end",j),a.on("close",k));var f=!1;return a.on("error",e),b.on("error",e),a.on("end",d),a.on("close",d),b.on("close",d),b.emit("pipe",a),b}},{events:17,inherits:18,"readable-stream/duplex.js":21,"readable-stream/passthrough.js":28,"readable-stream/readable.js":29,"readable-stream/transform.js":30,"readable-stream/writable.js":31}],33:[function(c,j,d){function e(a){if(a&&!i(a))throw new Error("Unknown encoding: "+a)}function f(a){return a.toString(this.encoding)}function g(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function h(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}var b=c("buffer").Buffer,i=b.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},a=d.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),e(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=g;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=h;break;default:return void(this.write=f)}this.charBuffer=new b(6),this.charReceived=0,this.charLength=0};a.prototype.write=function(a){for(var b="";this.charLength;){var f=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,f),this.charReceived+=f,this.charReceived<this.charLength)return"";a=a.slice(f,a.length),b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var e=b.charCodeAt(b.length-1);if(!(e>=55296&&56319>=e)){if(this.charReceived=this.charLength=0,0===a.length)return b;break}this.charLength+=this.surrogateSize,b=""}this.detectIncompleteChar(a);var c=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,c),c-=this.charReceived),b+=a.toString(this.encoding,0,c);var c=b.length-1,e=b.charCodeAt(c);if(e>=55296&&56319>=e){var d=this.surrogateSize;return this.charLength+=d,this.charReceived+=d,this.charBuffer.copy(this.charBuffer,d,0,d),a.copy(this.charBuffer,0,0,d),b.substring(0,c)}return b},a.prototype.detectIncompleteChar=function(b){for(var a=b.length>=3?3:b.length;a>0;a--){
var c=b[b.length-a];if(1==a&&c>>5==6){this.charLength=2;break}if(2>=a&&c>>4==14){this.charLength=3;break}if(3>=a&&c>>3==30){this.charLength=4;break}}this.charReceived=a},a.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:13}],34:[function(b,a){a.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],35:[function(b,c,a){(function(f,D){function d(e,d){var b={seen:[],stylize:z};return arguments.length>=3&&(b.depth=arguments[2]),arguments.length>=4&&(b.colors=arguments[3]),n(d)?b.showHidden=d:d&&a._extend(b,d),c(b.showHidden)&&(b.showHidden=!1),c(b.depth)&&(b.depth=2),c(b.colors)&&(b.colors=!1),c(b.customInspect)&&(b.customInspect=!0),b.colors&&(b.stylize=A),i(b,e,b.depth)}function A(b,c){var a=d.styles[c];return a?"["+d.colors[a][0]+"m"+b+"["+d.colors[a][1]+"m":b}function z(a){return a}function w(b){var a={};return b.forEach(function(b){a[b]=!0}),a}function i(c,b,f){if(c.customInspect&&b&&k(b.inspect)&&b.inspect!==a.inspect&&(!b.constructor||b.constructor.prototype!==b)){var h=b.inspect(f,c);return l(h)||(h=i(c,h,f)),h}var r=F(c,b);if(r)return r;var d=Object.keys(b),t=w(d);if(c.showHidden&&(d=Object.getOwnPropertyNames(b)),g(b)&&(d.indexOf("message")>=0||d.indexOf("description")>=0))return p(b);if(0===d.length){if(k(b)){var v=b.name?": "+b.name:"";return c.stylize("[Function"+v+"]","special")}if(j(b))return c.stylize(RegExp.prototype.toString.call(b),"regexp");if(q(b))return c.stylize(Date.prototype.toString.call(b),"date");if(g(b))return p(b)}var e="",n=!1,m=["{","}"];if(u(b)&&(n=!0,m=["[","]"]),k(b)){var z=b.name?": "+b.name:"";e=" [Function"+z+"]"}if(j(b)&&(e=" "+RegExp.prototype.toString.call(b)),q(b)&&(e=" "+Date.prototype.toUTCString.call(b)),g(b)&&(e=" "+p(b)),0===d.length&&(!n||0==b.length))return m[0]+e+m[1];if(0>f)return j(b)?c.stylize(RegExp.prototype.toString.call(b),"regexp"):c.stylize("[Object]","special");c.seen.push(b);var s;return s=n?y(c,b,f,t,d):d.map(function(a){return o(c,b,f,t,a,n)}),c.seen.pop(),x(s,e,m)}function F(b,a){if(c(a))return b.stylize("undefined","undefined");if(l(a)){var d="'"+JSON.stringify(a).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return b.stylize(d,"string")}return t(a)?b.stylize(""+a,"number"):n(a)?b.stylize(""+a,"boolean"):m(a)?b.stylize("null","null"):void 0}function p(a){return"["+Error.prototype.toString.call(a)+"]"}function y(d,a,e,f,g){for(var c=[],b=0,h=a.length;h>b;++b)c.push(v(a,String(b))?o(d,a,e,f,String(b),!0):"");return g.forEach(function(b){b.match(/^\d+$/)||c.push(o(d,a,e,f,b,!0))}),c}function o(d,g,h,k,f,j){var a,b,e;if(e=Object.getOwnPropertyDescriptor(g,f)||{value:g[f]},e.get?b=e.set?d.stylize("[Getter/Setter]","special"):d.stylize("[Getter]","special"):e.set&&(b=d.stylize("[Setter]","special")),v(k,f)||(a="["+f+"]"),b||(d.seen.indexOf(e.value)<0?(b=m(h)?i(d,e.value,null):i(d,e.value,h-1),b.indexOf("\n")>-1&&(b=j?b.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+b.split("\n").map(function(a){return"   "+a}).join("\n"))):b=d.stylize("[Circular]","special")),c(a)){if(j&&f.match(/^\d+$/))return b;a=JSON.stringify(""+f),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=d.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=d.stylize(a,"string"))}return a+": "+b}function x(b,c,a){var d=0,e=b.reduce(function(b,a){return d++,a.indexOf("\n")>=0&&d++,b+a.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?a[0]+(""===c?"":c+"\n ")+" "+b.join(",\n  ")+" "+a[1]:a[0]+c+" "+b.join(", ")+" "+a[1]}function u(a){return Array.isArray(a)}function n(a){return"boolean"==typeof a}function m(a){return null===a}function G(a){return null==a}function t(a){return"number"==typeof a}function l(a){return"string"==typeof a}function C(a){return"symbol"==typeof a}function c(a){return void 0===a}function j(a){return e(a)&&"[object RegExp]"===r(a)}function e(a){return"object"==typeof a&&null!==a}function q(a){return e(a)&&"[object Date]"===r(a)}function g(a){return e(a)&&("[object Error]"===r(a)||a instanceof Error)}function k(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function r(a){return Object.prototype.toString.call(a)}function v(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var E=/%[sdj%]/g;a.format=function(f){if(!l(f)){for(var g=[],a=0;a<arguments.length;a++)g.push(d(arguments[a]));return g.join(" ")}for(var a=1,b=arguments,h=b.length,i=String(f).replace(E,function(c){if("%%"===c)return"%";if(a>=h)return c;switch(c){case"%s":return String(b[a++]);case"%d":return Number(b[a++]);case"%j":try{return JSON.stringify(b[a++])}catch(d){return"[Circular]"}default:return c}}),c=b[a];h>a;c=b[++a])i+=m(c)||!e(c)?" "+c:" "+d(c);return i},a.deprecate=function(b,d){function g(){if(!e){if(f.throwDeprecation)throw new Error(d);f.traceDeprecation,e=!0}return b.apply(this,arguments)}if(c(D.process))return function(){return a.deprecate(b,d).apply(this,arguments)};if(f.noDeprecation===!0)return b;var e=!1;return g};var s,h={};a.debuglog=function(b){if(c(s)&&(s=f.env.NODE_DEBUG||""),b=b.toUpperCase(),!h[b])if(new RegExp("\\b"+b+"\\b","i").test(s)){{f.pid}h[b]=function(){a.format.apply(a,arguments)}}else h[b]=function(){};return h[b]},a.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},a.isArray=u,a.isBoolean=n,a.isNull=m,a.isNullOrUndefined=G,a.isNumber=t,a.isString=l,a.isSymbol=C,a.isUndefined=c,a.isRegExp=j,a.isObject=e,a.isDate=q,a.isError=g,a.isFunction=k,a.isPrimitive=B,a.isBuffer=b("./support/isBuffer");a.log=function(){},a.inherits=b("inherits"),a._extend=function(b,a){if(!a||!e(a))return b;for(var c=Object.keys(a),d=c.length;d--;)b[c[d]]=a[c[d]];return b}}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":34,_process:20,inherits:18}],36:[function(c,d){var a=c("lodash"),b=function(b){this.seed=b,this.mongoOps=["$exists","$type","$mod","$regex","$where","$text","$and","$or","$nor","$not","$geoIntersects","$geoWithin","$nearSphere","$near","$all","$size","$","$elemMatch","$meta","$slice","$gt","$gte","$lt","$lte","$ne","$in","$nin"],this.supportedOps=a.without(this.mongoOps,"$type","$regex","$where","$text","$geoIntersects","$geoWithin","$nearSphere","$near","$","$elemMatch","$meta","$slice"),this.evaluator=a.isEqual(b,{})?function(){return!0}:this.growCriterion(b)};b.prototype.growCriterion=function(b,c,e){var d=this;if(a.isPlainObject(b)){var f=a.map(b,function(g,f){return d.isOperator(f)?d.condenseToEvaluator(f,c,g):a.isString(f)&&!e?d.growCriterion(g,c+c?".":""+f,!0):a.isString(f)?function(e){return a.isEqual(d.find(e,c),b)}:void 0});return function(b){return a.reduce(f,function(d,c){return d&&a.isFunction(c)&&c(b)},!0)}}return a.isArray(b)||a.isPlainObject(b)||a.isNumber(b)||a.isString(b)||a.isBoolean(b)||a.isNull(b)||a.isRegExp(b)?function(e){return a.isEqual(d.find(e,c),b)}:void 0},b.prototype.condenseToEvaluator=function(e,d,b){var c=this;switch(e){case"$gt":return function(a){return c.find(a,d)>b};case"$gte":return function(a){return c.find(a,d)>=b};case"$lt":return function(a){return c.find(a,d)<b};case"$lte":return function(a){return c.find(a,d)<=b};case"$ne":return function(a){return c.find(a,d)!=b};case"$exists":return function(a){return b>0?void 0!=c.find(a,d):void 0==c.find(a,d)};case"$in":return function(e){return a.contains(b,c.find(e,d))};case"$nin":return function(e){return!a.contains(b,c.find(e,d))};case"$mod":return function(a){return c.find(a,d)%b[0]==b[1]};case"$and":return function(d){return a.every(b,function(a){return c.growCriterion(a,void 0)(d)})};case"$or":return function(d){return a.some(b,function(a){return c.growCriterion(a,void 0)(d)})};case"$nor":return function(d){return!a.some(b,function(a){return c.growCriterion(a,void 0)(d)})};case"$not":return function(a){return!c.growCriterion(b,d)(a)};case"$all":return function(f){var e=c.find(f,d);return a.size(a.union(b,e))==a.size(e)};case"$size":return function(e){return a.size(c.find(e,d))==b};default:return function(){return!0}}},b.prototype.isOperator=function(b){return a.contains(this.mongoOps,b)},b.prototype.find=function(b,c){if(!b)return void 0;var d=c.indexOf(".");if(-1===d)return b[c];var e=c.substring(0,d),f=c.substring(d+1);return a.has(b,e)?this.find(b[e],f):void 0},b.prototype.discern=function(c){var d=this;try{for(var b=d.evaluator(c);a.isFunction(b);)b=b(c);return b}catch(e){return"Selector ("+JSON.stringify(d.seed)+") Invalid for discernment on "+JSON.stringify(c)+"."}},d.exports=b},{lodash:37}],37:[function(c,a,b){(function(c){(function(){function K(a,b){if(a!==b){var c=a===a,d=b===b;if(a>b||!c||"undefined"==typeof a&&d)return 1;if(b>a||!d||"undefined"==typeof b&&c)return-1}return 0}function s(a,b,d){if(b!==b)return da(a,d);for(var c=d-1,e=a.length;++c<e;)if(a[c]===b)return c;return-1}function W(a){return"function"==typeof a||!1}function g(a){return"string"==typeof a?a:null==a?"":a+""}function Va(a){return a.charCodeAt(0)}function _(b,c){for(var a=-1,d=b.length;++a<d&&c.indexOf(b.charAt(a))>-1;);return a}function ba(b,c){for(var a=b.length;a--&&c.indexOf(b.charAt(a))>-1;);return a}function Ma(a,b){return K(a.criteria,b.criteria)||a.index-b.index}function Na(c,d,e){for(var a=-1,f=c.criteria,g=d.criteria,h=f.length,i=e.length;++a<h;){var b=K(f[a],g[a]);if(b)return a>=i?b:b*(e[a]?1:-1)}return c.index-d.index}function Ua(a){return Pa[a]}function Xa(a){return Qa[a]}function ya(a){return"\\"+Ta[a]}function da(b,e,c){for(var f=b.length,a=e+(c?0:-1);c?a--:++a<f;){var d=b[a];if(d!==d)return a}return-1}function h(a){return a&&"object"==typeof a||!1}function ea(a){return 160>=a&&a>=9&&13>=a||32==a||160==a||5760==a||6158==a||a>=8192&&(8202>=a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function p(b,d){for(var a=-1,e=b.length,f=-1,c=[];++a<e;)b[a]===d&&(b[a]=R,c[++f]=a);return c}function Ga(b,d){for(var e,a=-1,h=b.length,i=-1,f=[];++a<h;){var c=b[a],g=d?d(c,a,b):c;a&&e===g||(e=g,f[++i]=c)}return f}function ga(b){for(var a=-1,c=b.length;++a<c&&ea(b.charCodeAt(a)););return a}function ha(b){for(var a=b.length;a--&&ea(b.charCodeAt(a)););return a}function Ea(a){return Ra[a]}function I(Z){function a(a){if(h(a)&&!b(a)&&!(a instanceof D)){if(a instanceof ib)return a;if(aa.call(a,"__chain__")&&aa.call(a,"__wrapped__"))return ld(a)}return new ib(a)}function cc(){}function ib(a,b,c){this.__wrapped__=a,this.__actions__=c||[],this.__chain__=!!b}function D(a){this.__wrapped__=a,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Fc,this.__views__=null}function Je(){var b=this.__actions__,c=this.__iteratees__,d=this.__views__,a=new D(this.__wrapped__);return a.__actions__=b?Ta(b):null,a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=c?Ta(c):null,a.__takeCount__=this.__takeCount__,a.__views__=d?Ta(d):null,a}function Ke(){if(this.__filtered__){var a=new D(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function _f(){var d=this.__wrapped__.value();if(!b(d))return Uc(d,this.__actions__);var l=this.__dir__,k=0>l,p=Gg(0,d.length,this.__views__),q=p.start,s=p.end,h=s-q,c=k?s:q-1,t=_a(h,this.__takeCount__),f=this.__iteratees__,u=f?f.length:0,m=0,n=[];a:for(;h--&&t>m;){c+=l;for(var o=-1,e=d[c];++o<u;){var a=f[o],r=a.iteratee,g=a.type;if(g==la){if(a.done&&(k?c>a.index:c<a.index)&&(a.count=0,a.done=!1),a.index=c,!a.done){var j=a.limit;if(!(a.done=j>-1?a.count++>=j:!r(e)))continue a}}else{var i=r(e);if(g==ja)e=i;else if(!i){if(g==wa)continue a;break a}}}n[m++]=e}return n}function Cb(){this.__data__={}}function Fg(a){return this.has(a)&&delete this.__data__[a]}function $g(a){return"__proto__"==a?d:this.__data__[a]}function gh(a){return"__proto__"!=a&&aa.call(this.__data__,a)}function Ce(a,b){return"__proto__"!=a&&(this.__data__[a]=b),this}function hd(a){var b=a?a.length:0;for(this.data={hash:Vb(null),set:new Qb};b--;)this.push(a[b])}function Kb(c,a){var b=c.data,d="string"==typeof a||ea(a)?b.set.has(a):b.hash[a];return d?0:-1}function nf(a){var b=this.data;"string"==typeof a||ea(a)?b.set.add(a):b.hash[a]=!0}function Ta(c,a){var b=-1,d=c.length;for(a||(a=z(d));++b<d;)a[b]=c[b];return a}function cb(a,c){for(var b=-1,d=a.length;++b<d&&c(a[b],b,a)!==!1;);return a}function hg(a,c){for(var b=a.length;b--&&c(a[b],b,a)!==!1;);return a}function vg(a,c){for(var b=-1,d=a.length;++b<d;)if(!c(a[b],b,a))return!1;return!0}function Tc(a,e){for(var b=-1,f=a.length,g=-1,c=[];++b<f;){var d=a[b];e(d,b,a)&&(c[++g]=d)}return c}function ec(b,e){for(var a=-1,c=b.length,d=z(c);++a<c;)d[a]=e(b[a],a,b);return d}function fe(b){for(var c=-1,e=b.length,a=Td;++c<e;){var d=b[c];d>a&&(a=d)}return a}function ke(b){for(var c=-1,e=b.length,a=Fc;++c<e;){var d=b[c];a>d&&(a=d)}return a}function oe(a,e,b,f){var c=-1,d=a.length;for(f&&d&&(b=a[++c]);++c<d;)b=e(b,a[c],c,a);return b}function ve(b,d,c,e){var a=b.length;for(e&&a&&(c=b[--a]);a--;)c=d(c,b[a],a,b);return c}function ye(a,c){for(var b=-1,d=a.length;++b<d;)if(c(a[b],b,a))return!0;return!1}function Be(a,b){return"undefined"==typeof a?b:a}function Od(a,b,c,d){return"undefined"!=typeof a&&aa.call(d,c)?a:b}function Jb(a,d,g){var f=ca(d);if(!g)return Sb(d,a,f);for(var h=-1,i=f.length;++h<i;){var b=f[h],c=a[b],e=g(c,d[b],b,a,d);(e===e?e===c:c!==c)&&("undefined"!=typeof c||b in a)||(a[b]=e)}return a}function Jd(c,f){for(var b=-1,g=c.length,i=$(g),h=f.length,e=z(h);++b<h;){var a=f[b];i?(a=parseFloat(a),e[b]=rb(a,g)?c[a]:d):e[b]=c[a]}return e}function Sb(e,a,b){b||(b=a,a={});for(var c=-1,f=b.length;++c<f;){var d=b[c];a[d]=e[d]}return a}function Jf(a,b){for(var c=-1,e=b.length;++c<e;){var d=b[c];a[d]=fb(a[d],i,a)}return a}function vb(a,b,d){var c=typeof a;return"function"==c?"undefined"!=typeof b&&Qg(a)?Wa(a,b,d):a:null==a?ob:"object"==c?Fb(a):"undefined"==typeof b?wb(a+""):kd(a+"",b)}function Ib(a,i,k,o,h,d,f){var c;if(k&&(c=h?k(a,o,h):k(a)),"undefined"!=typeof c)return c;if(!ea(a))return a;var m=b(a);if(m){if(c=Ig(a),!i)return Ta(a,c)}else{var g=Pa.call(a),n=g==y;if(g!=j&&g!=r&&(!n||h))return e[g]?Ng(a,g,i):h?a:{};if(c=Jg(n?{}:a),!i)return Sb(a,c,ca(a))}d||(d=[]),f||(f=[]);for(var l=d.length;l--;)if(d[l]==a)return f[l];return d.push(a),f.push(c),(m?cb:gb)(a,function(e,b){c[b]=Ib(e,i,k,b,a,d,f)}),c}function ge(a,b,c,e){if("function"!=typeof a)throw new db(k);return Rb(function(){a.apply(d,Qa(c,e))},b)}function Hb(f,b){var i=f?f.length:0,c=[];if(!i)return c;var g=-1,d=Ab(),e=d==s,h=e&&b.length>=200?Lc(b):null,k=b.length;h&&(d=Kb,e=!1,b=h);a:for(;++g<i;){var a=f[g];if(e&&a===a){for(var j=k;j--;)if(b[j]===a)continue a;c.push(a)}else d(b,a,0)<0&&c.push(a)}return c}function ab(a,c){var d=a?a.length:0;if(!$(d))return gb(a,c);for(var b=-1,e=Db(a);++b<d&&c(e[b],b,e)!==!1;);return a}function vc(a,c){var b=a?a.length:0;if(!$(b))return ae(a,c);for(var d=Db(a);b--&&c(d[b],b,d)!==!1;);return a}function ah(b,c){var a=!0;return ab(b,function(b,d,e){return a=!!c(b,d,e)}),a}function eh(d,e,a,b){var c=d.length;for(a=null==a?0:+a||0,0>a&&(a=-a>c?0:c+a),b="undefined"==typeof b||b>c?c:+b||0,0>b&&(b+=c),c=a>b?0:b>>>0,a>>>=0;c>a;)d[a++]=e;return d}function jd(b,c){var a=[];return ab(b,function(b,d,e){c(b,d,e)&&a.push(b)}),a}function dc(b,c,d,e){var a;return d(b,function(b,d,f){return c(b,d,f)?(a=e?d:b,!1):void 0}),a}function bb(d,g,k,l){for(var f=l-1,m=d.length,i=-1,c=[];++f<m;){var a=d[f];if(h(a)&&$(a.length)&&(b(a)||eb(a))){g&&(a=bb(a,g,k,0));var e=-1,j=a.length;for(c.length+=j;++e<j;)c[++i]=a[e]}else k||(c[++i]=a)}return c}function yc(a,f,g){for(var b=-1,c=Db(a),d=g(a),h=d.length;++b<h;){var e=d[b];if(f(c[e],e,c)===!1)break}return a}function jc(a,f,g){for(var b=Db(a),c=g(a),d=c.length;d--;){var e=c[d];if(f(b[e],e,b)===!1)break}return a}function Fd(a,b){return yc(a,b,hb)}function gb(a,b){return yc(a,b,ca)}function ae(a,b){return jc(a,b,ca)}function tc(e,a){for(var b=-1,f=a.length,g=-1,c=[];++b<f;){var d=a[b];sb(e[d])&&(c[++g]=d)}return c}function ef(a,b,f){var g=-1,h="function"==typeof b,c=a?a.length:0,e=$(c)?z(c):[];return ab(a,function(a){var c=h?b:null!=a&&a[b];e[++g]=c?c.apply(a,f):d}),e}function Nb(a,b,e,f,g,h){if(a===b)return 0!==a||1/a==1/b;var c=typeof a,d=typeof b;return"function"!=c&&"object"!=c&&"function"!=d&&"object"!=d||null==a||null==b?a!==a&&b!==b:vf(a,b,Nb,e,f,g,h)}function vf(a,c,l,n,m,d,e){var h=b(a),o=b(c),f=u,g=u;h||(f=Pa.call(a),f==r?f=j:f!=j&&(h=qb(a))),o||(g=Pa.call(c),g==r?g=j:g!=j&&(o=qb(c)));var k=f==j,t=g==j,p=f==g;if(p&&!h&&!k)return zg(a,c,f);var q=k&&aa.call(a,"__wrapped__"),s=t&&aa.call(c,"__wrapped__");if(q||s)return l(q?a.value():a,s?c.value():c,n,m,d,e);if(!p)return!1;d||(d=[]),e||(e=[]);for(var i=d.length;i--;)if(d[i]==a)return e[i]==c;d.push(a),e.push(c);var v=(h?wg:Ag)(a,c,l,n,m,d,e);return d.pop(),e.pop(),v}function Vc(b,e,i,j,c){var g=e.length;if(null==b)return!g;for(var a=-1,k=!c;++a<g;)if(k&&j[a]?i[a]!==b[e[a]]:!aa.call(b,e[a]))return!1;for(a=-1;++a<g;){var h=e[a];if(k&&j[a])var f=aa.call(b,h);else{var l=b[h],m=i[a];f=c?c(l,m,h):d,"undefined"==typeof f&&(f=Nb(m,l,c,!0))}if(!f)return!1}return!0}function $f(b,c){var a=[];return ab(b,function(b,d,e){a.push(c(b,d,e))}),a}function Fb(d){var c=ca(d),a=c.length;if(1==a){var e=c[0],b=d[e];if(nb(b))return function(a){return null!=a&&a[e]===b&&aa.call(a,e)}}for(var f=z(a),g=z(a);a--;)b=d[c[a]],f[a]=b,g[a]=nb(b);return function(a){return Vc(a,c,f,g)}}function kd(b,a){return nb(a)?function(c){return null!=c&&c[b]===a}:function(c){return null!=c&&Nb(a,c[b],null,!0)}}function rd(a,c,e,f,g){if(!ea(a))return a;var i=$(c.length)&&(b(c)||qb(c));return(i?cb:gb)(c,function(k,c,l){if(h(k))return f||(f=[]),g||(g=[]),lg(a,l,c,rd,e,f,g);var j=a[c],b=e?e(j,k,c,a,l):d,m="undefined"==typeof b;m&&(b=k),!i&&"undefined"==typeof b||!m&&(b===b?b===j:j!==j)||(a[c]=b)}),a}function lg(g,m,f,n,i,h,l){for(var j=h.length,e=m[f];j--;)if(h[j]==e)return void(g[f]=l[j]);var a=g[f],c=i?i(a,e,f,g,m):d,k="undefined"==typeof c;k&&(c=e,$(e.length)&&(b(e)||qb(e))?c=b(a)?a:a?Ta(a):[]:Ub(e)||eb(e)?c=eb(a)?Sc(a):Ub(a)?a:{}:k=!1),h.push(e),l.push(c),k?g[f]=n(c,e,i,h,l):(c===c?c!==a:a===a)&&(g[f]=c)}function wb(a){return function(b){return null==b?d:b[a]}}function Dg(c,a){var d=a.length,e=Jd(c,a);for(a.sort(K);d--;){var b=parseFloat(a[d]);if(b!=f&&rb(b)){var f=b;sc.call(c,b,1)}}return e}function kc(a,b){return a+yb(Sd()*(b-a+1))}function Md(c,d,a,b,e){return e(c,function(c,e,f){a=b?(b=!1,c):d(a,c,e,f)}),a}function Qa(e,a,b){var d=-1,c=e.length;a=null==a?0:+a||0,0>a&&(a=-a>c?0:c+a),b="undefined"==typeof b||b>c?c:+b||0,0>b&&(b+=c),c=a>b?0:b-a>>>0,a>>>=0;for(var f=z(c);++d<c;)f[d]=e[d+a];return f}function dh(b,c){var a;return ab(b,function(b,d,e){return a=c(b,d,e),!a}),!!a}function be(a,c){var b=a.length;for(a.sort(c);b--;)a[b]=a[b].value;return a}function ce(a,b,g){var c=-1,e=a.length,f=$(e)?z(e):[];return ab(a,function(e){for(var a=b.length,g=z(a);a--;)g[a]=null==e?d:e[b[a]];f[++c]={criteria:g,index:c,value:e}}),be(f,function(a,b){return Na(a,b,g)})}function qc(i,c){var g=-1,h=Ab(),k=i.length,j=h==s,f=j&&k>=200,a=f?Lc():null,e=[];a?(h=Kb,j=!1):(f=!1,a=c?[]:e);a:for(;++g<k;){var b=i[g],d=c?c(b,g,i):b;if(j&&b===b){for(var l=a.length;l--;)if(a[l]===d)continue a;c&&a.push(d),e.push(b)}else h(a,d,0)<0&&((c||f)&&a.push(d),e.push(b))}return e}function rc(e,b){for(var a=-1,c=b.length,d=z(c);++a<c;)d[a]=e[b[a]];return d}function Uc(f,c){var a=f;a instanceof D&&(a=a.value());for(var d=-1,g=c.length;++d<g;){var e=[a],b=c[d];pc.apply(e,b.args),a=b.func.apply(b.thisArg,e)}return a}function Pb(c,a,f){var d=0,b=c?c.length:d;if("number"==typeof a&&a===a&&Mg>=b){for(;b>d;){var e=d+b>>>1,g=c[e];(f?a>=g:a>g)?d=e+1:b=e}return b}return uc(c,a,ob,f)}function uc(d,a,j,e){a=j(a);for(var f=0,c=d?d.length:0,l=a!==a,k="undefined"==typeof a;c>f;){var g=yb((f+c)/2),b=j(d[g]),h=b===b;if(l)var i=h||e;else i=k?h&&(e||"undefined"!=typeof b):e?a>=b:a>b;i?f=g+1:c=g}return _a(c,Lg)}function Wa(a,b,c){if("function"!=typeof a)return ob;if("undefined"==typeof b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function xc(a){return Lb.call(a,0)}function Bd(d,e,f){for(var g=f.length,a=-1,h=Ya(d.length-g,0),b=-1,i=e.length,c=z(h+i);++b<i;)c[b]=e[b];for(;++a<g;)c[f[a]]=d[a];for(;h--;)c[b++]=d[a++];return c}function Cd(c,f,j){for(var h=-1,e=j.length,a=-1,g=Ya(c.length-e,0),d=-1,i=f.length,b=z(g+i);++a<g;)b[a]=c[a];for(var k=a;++d<i;)b[k+d]=f[d];for(;++h<e;)b[k+j[h]]=c[a++];return b}function Zb(a,c){return function(d,e,i){var f=c?c():{};if(e=J(e,i,3),b(d))for(var g=-1,j=d.length;++g<j;){var h=d[g];a(f,h,e(h,g,d),d)}else ab(d,function(b,d,c){a(f,b,e(b,d,c),c)});return f}}function Gd(a){return function(){var d=arguments,b=d.length,f=d[0];if(2>b||null==f)return f;var e=d[b-2],g=d[b-1],h=d[3];b>3&&"function"==typeof e?(e=Wa(e,g,5),b-=2):(e=b>2&&"function"==typeof g?g:null,b-=e?1:0),h&&c(d[1],d[2],h)&&(e=3==b?null:e,b=2);for(var i=0;++i<b;){var j=d[i];j&&a(f,j,e)}return f}}function Cf(a,c){function b(){var e=this&&this!==n&&this instanceof b?d:a;return e.apply(c,arguments)}var d=bc(a);return b}function Hd(a){return function(){var b=arguments.length,c=b,e=a?b-1:0;if(!b)return function(){return arguments[0]};for(var d=z(b);c--;)if(d[c]=arguments[c],"function"!=typeof d[c])throw new db(k);return function(){for(var c=e,f=d[c].apply(this,arguments);a?c--:++c<b;)f=d[c].call(this,f);return f}}}function ac(a){return function(e){for(var b=-1,d=_c(Wc(e)),f=d.length,c="";++b<f;)c=a(c,d[b],b);return c}}function bc(a){return function(){var b=Gb(a.prototype),c=a.apply(b,arguments);return ea(c)?c:b}}function Vd(a,d){return function(f,e,g){g&&c(f,e,g)&&(e=null);var i=J(),h=null==e;if(i===vb&&h||(h=!1,e=i(e,g,3)),h){var j=b(f);if(j||!Ob(f))return a(j?f:Eb(f));e=Va}return Bg(f,e,d)}}function $d(c,a,h,j,t,m,s,d,e,k){function f(){for(var y=arguments.length,D=y,q=z(y);D--;)q[D]=arguments[D];if(j&&(q=Bd(q,j,t)),m&&(q=Cd(q,m,s)),b||v){var E=f.placeholder,A=p(q,E);if(y-=A.length,k>y){var L=d?Ta(d):null,M=Ya(k-y,0),N=b?A:null,I=b?null:A,J=b?q:null,K=b?null:q;a|=b?l:C,a&=~(b?C:l),u||(a&=~(i|B));var F=$d(c,a,h,J,N,K,I,L,e,M);return F.placeholder=E,F}}var G=r?h:this;g&&(c=G[x]),d&&(q=ne(q,d)),o&&e<q.length&&(q.length=e);var H=this&&this!==n&&this instanceof f?w||bc(c):c;return H.apply(G,q)}var o=a&q,r=a&i,g=a&B,b=a&oa,u=a&L,v=a&H,w=!g&&bc(c),x=c;return f}function mc(e,a,b){var c=e.length;if(a=+a,c>=a||!ub(a))return"";var d=a-c;return b=null==b?" ":b+"",Zc(b,Mb(d/b.length)).slice(0,d)}function ug(a,d,e,b){function c(){for(var k=-1,i=arguments.length,d=-1,j=b.length,h=z(i+j);++d<j;)h[d]=b[d];for(;i--;)h[d++]=arguments[++k];var l=this&&this!==n&&this instanceof c?g:a;return l.apply(f?e:this,h)}var f=d&i,g=bc(a);return c}function fb(f,b,s,c,e,r,o,h){var j=b&B;if(!j&&"function"!=typeof f)throw new db(k);var m=c?c.length:0;if(m||(b&=~(l|C),c=e=null),m-=e?e.length:0,b&C){var p=c,q=e;c=e=null}var g=!j&&Ug(f),a=[f,b,s,c,e,p,q,r,o,h];if(g&&g!==!0&&(fh(a,g),b=a[1],h=a[9]),a[9]=null==h?j?0:f.length:Ya(h-m,0)||0,b==i)var n=Cf(a[0],a[2]);else n=b!=l&&b!=(i|l)||a[4].length?$d.apply(d,a):ug.apply(d,a);var t=g?Kc:Vg;return t(n,a)}function wg(m,h,n,f,g,k,l){var e=-1,i=m.length,j=h.length,b=!0;if(i!=j&&!(g&&j>i))return!1;for(;b&&++e<i;){var a=m[e],c=h[e];if(b=d,f&&(b=g?f(c,a,e):f(a,c,e)),"undefined"==typeof b)if(g)for(var o=j;o--&&(c=h[o],!(b=a&&a===c||n(a,c,f,g,k,l))););else b=a&&a===c||n(a,c,f,g,k,l)}return!!b}function zg(a,b,c){switch(c){case t:case A:return+a==+b;case G:return a.name==b.name&&a.message==b.message;case x:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case v:case w:return a==b+""}return!1}function Ag(f,e,s,i,l,r,q){var o=ca(f),m=o.length,t=ca(e),p=t.length;if(m!=p&&!l)return!1;for(var k,n=-1;++n<m;){var b=o[n],a=aa.call(e,b);if(a){var c=f[b],j=e[b];a=d,i&&(a=l?i(j,c,b):i(c,j,b)),"undefined"==typeof a&&(a=c&&c===j||s(c,j,i,l,r,q))}if(!a)return!1;k||(k="constructor"==b)}if(!k){var h=f.constructor,g=e.constructor;if(h!=g&&"constructor"in f&&"constructor"in e&&!("function"==typeof h&&h instanceof h&&"function"==typeof g&&g instanceof g))return!1}return!0}function Bg(e,f,c){var d=c?Fc:Td,a=d,b=a;return ab(e,function(g,h,i){var e=f(g,h,i);((c?a>e:e>a)||e===d&&e===b)&&(a=e,b=g)}),b}function J(d,e,c){var b=a.callback||Yb;return b=b===Yb?vb:b,c?b(d,e,c):b}function Ab(c,d,e){var b=a.indexOf||Ac;return b=b===Ac?s:b,c?b(c,d,e):b}function Gg(a,b,d){for(var e=-1,g=d?d.length:0;++e<g;){var f=d[e],c=f.size;switch(f.type){case"drop":a+=c;break;case"dropRight":b-=c;break;case"take":b=_a(b,a+c);break;case"takeRight":a=Ya(a,b-c)}}return{start:a,end:b}}function Ig(a){var c=a.length,b=new a.constructor(c);return c&&"string"==typeof a[0]&&aa.call(a,"index")&&(b.index=a.index,b.input=a.input),b}function Jg(b){var a=b.constructor;return"function"==typeof a&&a instanceof a||(a=jb),new a}function Ng(a,e,f){var b=a.constructor;switch(e){case X:return xc(a);case t:case A:return new b(+a);case V:case U:case T:case S:case Q:case P:case O:case N:case M:var c=a.buffer;return new b(f?xc(c):c,a.byteOffset,a.length);case x:case w:return new b(a);case v:var d=new b(a.source,Y.exec(a));d.lastIndex=a.lastIndex}return d}function Qg(c){var d=a.support,b=!(d.funcNames?c.name:d.funcDecomp);if(!b){var e=td.call(c);d.funcNames||(b=!za.test(e)),b||(b=fa.test(e)||Ra(c),Kc(c,b))}return b}function rb(a,b){return a=+a,b=null==b?Xd:b,a>-1&&a%1==0&&b>a}function c(c,a,b){if(!ea(b))return!1;var e=typeof a;if("number"==e)var f=b.length,g=$(f)&&rb(a,f);else g="string"==e&&a in b;if(g){var d=b[a];return c===c?c===d:d!==d}return!1}function $(a){return"number"==typeof a&&a>-1&&a%1==0&&Xd>=a}function nb(a){return a===a&&(0===a?1/a>0:!ea(a))}function fh(a,b){var f=a[1],d=b[1],g=f|d,j=q|o,h=i|B,m=j|h|L|H,l=f&q&&!(d&q),k=f&o&&!(d&o),n=(k?a:b)[7],r=(l?a:b)[8],s=!(f>=o&&d>h||f>h&&d>=o),t=g>=j&&m>=g&&(o>f||(k||l)&&n.length<=r);if(!s&&!t)return a;d&i&&(a[2]=b[2],g|=f&i?0:L);var c=b[3];if(c){var e=a[3];a[3]=e?Bd(e,c,b[4]):Ta(c),a[4]=e?p(a[3],R):Ta(b[4])}return c=b[5],c&&(e=a[5],a[5]=e?Cd(e,c,b[6]):Ta(c),a[6]=e?p(a[5],R):Ta(b[6])),c=b[7],c&&(a[7]=Ta(c)),d&q&&(a[8]=null==a[8]?b[8]:_a(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=g,a}function bd(a,c){a=Db(a);for(var d=-1,f=c.length,e={};++d<f;){var b=c[d];b in a&&(e[b]=a[b])}return e}function cd(b,c){var a={};return Fd(b,function(b,d,e){c(b,d,e)&&(a[d]=b)}),a}function ne(a,c){for(var e=a.length,b=_a(c.length,e),g=Ta(a);b--;){var f=c[b];a[b]=rb(f,e)?g[f]:d}return a}function dd(b){{var c;a.support}if(!h(b)||Pa.call(b)!=j||!aa.call(b,"constructor")&&(c=b.constructor,"function"==typeof c&&!(c instanceof c)))return!1;var d;return Fd(b,function(b,a){d=a}),"undefined"==typeof d||aa.call(b,d)}function fd(c){for(var f=hb(c),g=f.length,d=g&&c.length,j=a.support,k=d&&$(d)&&(b(c)||j.nonEnumArgs&&eb(c)),h=-1,i=[];++h<g;){var e=f[h];(k&&rb(e,d)||aa.call(c,e))&&i.push(e)}return i}function Eb(a){return null==a?[]:$(a.length)?ea(a)?a:jb(a):Wb(a)}function Db(a){return ea(a)?a:jb(a)}function ld(a){return a instanceof D?a.clone():new ib(a.__wrapped__,a.__chain__,Ta(a.__actions__))}function Fe(b,a,e){a=(e?c(b,a,e):null==a)?1:Ya(+a||1,1);for(var d=0,f=b?b.length:0,h=-1,g=z(Mb(f/a));f>d;)g[++h]=Qa(b,d,d+=a);return g}function He(a){for(var b=-1,e=a?a.length:0,f=-1,c=[];++b<e;){var d=a[b];d&&(c[++f]=d)}return c}function Ie(){for(var a=arguments,c=-1,e=a.length;++c<e;){var d=a[c];if(b(d)||eb(d))break}return Hb(d,bb(a,!1,!0,++c))}function md(b,a,d){var e=b?b.length:0;return e?((d?c(b,a,d):null==a)&&(a=1),Qa(b,0>a?0:a)):[]}function nd(b,a,d){var e=b?b.length:0;return e?((d?c(b,a,d):null==a)&&(a=1),a=e-(+a||0),Qa(b,0,0>a?0:a)):[]}function Ne(a,c,d){var b=a?a.length:0;if(!b)return[];for(c=J(c,d,3);b--&&c(a[b],b,a););return Qa(a,0,b+1)}function We(a,c,e){var d=a?a.length:0;if(!d)return[];var b=-1;for(c=J(c,e,3);++b<d&&c(a[b],b,a););return Qa(a,b)}function Ze(b,d,a,e){var f=b?b.length:0;return f?(a&&"number"!=typeof a&&c(b,d,a)&&(a=0,e=f),eh(b,d,a,e)):[]}function pd(a,c,d){var b=-1,e=a?a.length:0;for(c=J(c,d,3);++b<e;)if(c(a[b],b,a))return b;return-1}function kf(a,c,d){var b=a?a.length:0;for(c=J(c,d,3);b--;)if(c(a[b],b,a))return b;return-1}function qd(a){return a?a[0]:d}function rf(a,b,d){var e=a?a.length:0;return d&&c(a,b,d)&&(b=!1),e?bb(a,b,!1,0):[]}function sf(a){var b=a?a.length:0;return b?bb(a,!0,!1,0):[]}function Ac(b,c,a){var e=b?b.length:0;if(!e)return-1;if("number"==typeof a)a=0>a?Ya(e+a,0):a;else if(a){var f=Pb(b,c),d=b[f];return(c===c?c===d:d!==d)?f:-1}return s(b,c,a||0)}function Af(a){return nd(a,1)}function Bf(){for(var e=[],c=-1,j=arguments.length,g=[],f=Ab(),m=f==s;++c<j;){var a=arguments[c];(b(a)||eb(a))&&(e.push(a),g.push(m&&a.length>=120?Lc(c&&a):null))}j=e.length;var h=e[0],k=-1,n=h?h.length:0,i=[],d=g[0];a:for(;++k<n;)if(a=h[k],(d?Kb(d,a):f(i,a,0))<0){for(c=j;--c;){var l=g[c];if((l?Kb(l,a):f(e[c],a,0))<0)continue a}d&&d.push(a),i.push(a)}return i}function sd(a){var b=a?a.length:0;return b?a[b-1]:d}function Df(c,b,d){var e=c?c.length:0;if(!e)return-1;var a=e;if("number"==typeof d)a=(0>d?Ya(e+d,0):_a(d||0,e-1))+1;else if(d){a=Pb(c,b,!0)-1;var f=c[a];return(b===b?b===f:f!==f)?a:-1}if(b!==b)return da(c,a,!0);for(;a--;)if(c[a]===b)return a;return-1}function Ef(){var b=arguments,a=b[0];if(!a||!a.length)return a;for(var d=0,e=Ab(),f=b.length;++d<f;)for(var c=0,g=b[d];(c=e(a,g,c))>-1;)sc.call(a,c,1);return a}function Ff(a){return Dg(a||[],bb(arguments,!1,!1,1))}function Hf(a,c,g){var b=-1,d=a?a.length:0,e=[];for(c=J(c,g,3);++b<d;){var f=a[b];c(f,b,a)&&(e.push(f),sc.call(a,b--,1),d--)}return e}function ud(a){return md(a,1)}function Rf(b,d,a){var e=b?b.length:0;return e?(a&&"number"!=typeof a&&c(b,d,a)&&(d=0,a=e),Qa(b,d,a)):[]}function Sf(b,c,a,e){var d=J(a);return d===vb&&null==a?Pb(b,c):uc(b,c,d(a,e,1))}function Uf(b,c,a,e){var d=J(a);return d===vb&&null==a?Pb(b,c,!0):uc(b,c,d(a,e,1),!0)}function Vf(b,a,d){var e=b?b.length:0;return e?((d?c(b,a,d):null==a)&&(a=1),Qa(b,0,0>a?0:a)):[]}function Wf(b,a,d){var e=b?b.length:0;return e?((d?c(b,a,d):null==a)&&(a=1),a=e-(+a||0),Qa(b,0>a?0:a)):[]}function Xf(a,c,d){var b=a?a.length:0;if(!b)return[];for(c=J(c,d,3);b--&&c(a[b],b,a););return Qa(a,b+1)}function Yf(a,c,e){var d=a?a.length:0;if(!d)return[];var b=-1;for(c=J(c,e,3);++b<d&&c(a[b],b,a););return Qa(a,0,b)}function Zf(){return qc(bb(arguments,!1,!0,0))}function vd(d,b,a,e){var g=d?d.length:0;if(!g)return[];null!=b&&"boolean"!=typeof b&&(e=a,a=c(d,b,e)?null:b,b=!1);var f=J();return(f!==vb||null!=a)&&(a=f(a,e,3)),b&&Ab()==s?Ga(d,a):qc(d,a)}function wd(a){for(var b=-1,c=(a&&a.length&&fe(ec(a,eg)))>>>0,d=z(c);++b<c;)d[b]=ec(a,wb(b));return d}function ag(a){return Hb(a,Qa(arguments,1))}function cg(){for(var d=-1,e=arguments.length;++d<e;){var a=arguments[d];if(b(a)||eb(a))var c=c?Hb(c,a).concat(Hb(a,c)):a}return c?qc(c):[]}function dg(){for(var a=arguments.length,b=z(a);a--;)b[a]=arguments[a];return wd(b)}function xd(a,c){var e=-1,g=a?a.length:0,f={};for(!g||c||b(a[0])||(c=[]);++e<g;){var d=a[e];c?f[d]=c[e]:d&&(f[d[0]]=d[1])}return f}function yd(c){var b=a(c);return b.__chain__=!0,b}function kg(a,b,c){return b.call(c,a),a}function zd(a,b,c){return b.call(c,a)}function mg(){return yd(this)}function ng(){return new ib(this.value(),this.__chain__)}function og(e){for(var b,a=this;a instanceof cc;){var c=ld(a);b?d.__wrapped__=c:b=c;var d=c;a=a.__wrapped__}return d.__wrapped__=e,b}function pg(){var a=this.__wrapped__;return a instanceof D?(this.__actions__.length&&(a=new D(this)),
new ib(a.reverse(),this.__chain__)):this.thru(function(a){return a.reverse()})}function qg(){return this.value()+""}function sg(){return Uc(this.__wrapped__,this.__actions__)}function tg(a){var b=a?a.length:0;return $(b)&&(a=Eb(a)),Jd(a,bb(arguments,!1,!1,1))}function Ad(c,a,d){var e=b(c)?vg:ah;return("function"!=typeof a||"undefined"!=typeof d)&&(a=J(a,d,3)),e(c,a)}function Hc(c,a,d){var e=b(c)?Tc:jd;return a=J(a,d,3),e(c,a)}function Jc(a,c,e){if(b(a)){var f=pd(a,c,e);return f>-1?a[f]:d}return c=J(c,e,3),dc(a,c,ab)}function xg(b,a,c){return a=J(a,c,3),dc(b,a,vc)}function yg(a,b){return Jc(a,Fb(b))}function Dd(a,c,d){return"function"==typeof c&&"undefined"==typeof d&&b(a)?cb(a,c):ab(a,Wa(c,d,3))}function Ed(a,c,d){return"function"==typeof c&&"undefined"==typeof d&&b(a)?hg(a,c):vc(a,Wa(c,d,3))}function Oc(a,e,c){var d=a?a.length:0;return $(d)||(a=Wb(a),d=a.length),d?(c="number"==typeof c?0>c?Ya(d+c,0):c||0:0,"string"==typeof a||!b(a)&&Ob(a)?d>c&&a.indexOf(e,c)>-1:Ab(a,e,c)>-1):!1}function Cg(a,b){return ef(a,b,Qa(arguments,2))}function hc(c,a,d){var e=b(c)?ec:$f;return a=J(a,d,3),e(c,a)}function Eg(a,b){return hc(a,wb(b))}function ic(a,c,d,e){var f=b(a)?oe:Md;return f(a,J(c,e,4),d,arguments.length<3,ab)}function Id(a,c,d,e){var f=b(a)?ve:Md;return f(a,J(c,e,4),d,arguments.length<3,vc)}function Hg(c,a,d){var e=b(c)?Tc:jd;return a=J(a,d,3),e(c,function(b,c,d){return!a(b,c,d)})}function oc(a,b,f){if(f?c(a,b,f):null==b){a=Eb(a);var g=a.length;return g>0?a[kc(0,g-1)]:d}var e=Kd(a);return e.length=_a(0>b?0:+b||0,e.length),e}function Kd(b){b=Eb(b);for(var a=-1,e=b.length,c=z(e);++a<e;){var d=kc(0,a);a!=d&&(c[a]=c[d]),c[d]=b[a]}return c}function Kg(a){var b=a?a.length:0;return $(b)?b:ca(a).length}function Ld(c,a,d){var e=b(c)?ye:dh;return("function"!=typeof a||"undefined"!=typeof d)&&(a=J(a,d,3)),e(c,a)}function Og(b,a,d){if(null==b)return[];var e=-1,f=b.length,g=$(f)?z(f):[];return d&&c(b,a,d)&&(a=null),a=J(a,d,3),ab(b,function(b,c,d){g[++e]={criteria:a(b,c,d),index:e,value:b}}),be(g,Ma)}function Pg(b){if(null==b)return[];var a=arguments,d=a[3];return d&&c(a[1],a[2],d)&&(a=[b,a[1]]),ce(b,bb(a,!1,!1,1),[])}function nh(e,d,a,f){return null==e?[]:(f&&c(d,a,f)&&(a=null),b(d)||(d=null==d?[]:[d]),b(a)||(a=null==a?[]:[a]),ce(e,d,a))}function Rg(a,b){return Hc(a,Fb(b))}function Sg(a,b){if("function"!=typeof b){if("function"!=typeof a)throw new db(k);var c=a;a=b,b=c}return a=ub(a=+a)?a:0,function(){return--a<1?b.apply(this,arguments):void 0}}function Tg(b,a,d){return d&&c(b,a,d)&&(a=null),a=b&&null==a?b.length:Ya(+a||0,0),fb(b,q,null,null,null,null,a)}function Nd(b,a){var c;if("function"!=typeof a){if("function"!=typeof b)throw new db(k);var d=b;b=a,a=d}return function(){return--b>0?c=a.apply(this,arguments):a=null,c}}function he(c,d){var a=i;if(arguments.length>2){var b=Qa(arguments,2),e=p(b,he.placeholder);a|=l}return fb(c,a,d,b,e)}function bh(a){return Jf(a,arguments.length>1?bb(arguments,!1,!1,1):fc(a))}function Pd(c,d){var a=i|B;if(arguments.length>2){var b=Qa(arguments,2),e=p(b,Pd.placeholder);a|=l}return fb(d,a,c,b,e)}function Qd(b,a,d){d&&c(b,a,d)&&(a=null);var e=fb(b,oa,null,null,null,null,null,a);return e.placeholder=Qd.placeholder,e}function Rd(b,a,d){d&&c(b,a,d)&&(a=null);var e=fb(b,H,null,null,null,null,null,a);return e.placeholder=Rd.placeholder,e}function Ud(j,c,g){function t(){a&&xb(a),b&&xb(b),b=a=n=d}function r(){var g=c-(tb()-m);if(0>=g||g>c){b&&xb(b);var h=n;b=a=n=d,h&&(l=tb(),i=j.apply(f,e),a||b||(e=f=null))}else a=Rb(r,g)}function s(){a&&xb(a),b=a=n=d,(o||h!==c)&&(l=tb(),i=j.apply(f,e),a||b||(e=f=null))}function q(){if(e=arguments,m=tb(),f=this,n=o&&(a||!p),h===!1)var k=p&&!a;else{b||p||(l=m);var g=h-(m-l),d=0>=g||g>h;d?(b&&(b=xb(b)),l=m,i=j.apply(f,e)):b||(b=Rb(s,g))}return d&&a?a=xb(a):a||c===h||(a=Rb(r,c)),k&&(d=!0,i=j.apply(f,e)),!d||a||b||(e=f=null),i}var e,b,i,m,f,a,n,l=0,h=!1,o=!0;if("function"!=typeof j)throw new db(k);if(c=0>c?0:+c||0,g===!0){var p=!0;o=!1}else ea(g)&&(p=g.leading,h="maxWait"in g&&Ya(+g.maxWait||0,c),o="trailing"in g?g.trailing:o);return q.cancel=t,q}function ie(a){return ge(a,1,arguments,1)}function je(a,b){return ge(a,b,arguments,2)}function lc(c,a){if("function"!=typeof c||a&&"function"!=typeof a)throw new db(k);var b=function(){var d=arguments,e=b.cache,f=a?a.apply(this,d):d[0];if(e.has(f))return e.get(f);var g=c.apply(this,d);return e.set(f,g),g};return b.cache=new lc.Cache,b}function le(a){if("function"!=typeof a)throw new db(k);return function(){return!a.apply(this,arguments)}}function me(a){return Nd(a,2)}function Yd(b){var a=Qa(arguments,1),c=p(a,Yd.placeholder);return fb(b,l,null,a,c)}function Zd(b){var a=Qa(arguments,1),c=p(a,Zd.placeholder);return fb(b,C,null,a,c)}function pe(a){var b=bb(arguments,!1,!1,1);return fb(a,o,null,null,null,b)}function qe(a){if("function"!=typeof a)throw new db(k);return function(b){return a.apply(this,b)}}function re(d,e,a){var b=!0,c=!0;if("function"!=typeof d)throw new db(k);return a===!1?b=!1:ea(a)&&(b="leading"in a?!!a.leading:b,c="trailing"in a?!!a.trailing:c),E.leading=b,E.maxWait=+e,E.trailing=c,Ud(d,e,E)}function se(b,a){return a=null==a?ob:a,fb(a,l,null,[b],[])}function te(d,a,b,e){return a&&"boolean"!=typeof a&&c(d,a,b)?a=!1:"function"==typeof a&&(e=b,b=a,a=!1),b="function"==typeof b&&Wa(b,e,1),Ib(d,a,b)}function ue(b,a,c){return a="function"==typeof a&&Wa(a,c,1),Ib(b,!0,a)}function eb(a){var b=h(a)?a.length:d;return $(b)&&Pa.call(a)==r||!1}function we(a){return a===!0||a===!1||h(a)&&Pa.call(a)==t||!1}function xe(a){return h(a)&&Pa.call(a)==A||!1}function _d(a){return a&&1===a.nodeType&&h(a)&&Pa.call(a).indexOf("Element")>-1||!1}function ze(a){if(null==a)return!0;var c=a.length;return $(c)&&(b(a)||Ob(a)||eb(a)||h(a)&&sb(a.splice))?!c:!ca(a).length}function Ae(b,c,a,f){if(a="function"==typeof a&&Wa(a,f,3),!a&&nb(b)&&nb(c))return b===c;var e=a?a(b,c):d;return"undefined"==typeof e?Nb(b,c,a):!!e}function nc(a){return h(a)&&"string"==typeof a.message&&Pa.call(a)==G||!1}function ea(a){var b=typeof a;return"function"==b||a&&"object"==b||!1}function De(c,f,b,j){var d=ca(f),a=d.length;if(b="function"==typeof b&&Wa(b,j,3),!b&&1==a){var g=d[0],e=f[g];if(nb(e))return null!=c&&e===c[g]&&aa.call(c,g)}for(var h=z(a),i=z(a);a--;)e=h[a]=f[d[a]],i[a]=nb(e);return Vc(c,d,h,i,b)}function Ee(a){return de(a)&&a!=+a}function Ra(a){return null==a?!1:Pa.call(a)==y?jg.test(td.call(a)):h(a)&&Ba.test(a)||!1}function Ge(a){return null===a}function de(a){return"number"==typeof a||h(a)&&Pa.call(a)==x||!1}function ee(a){return h(a)&&Pa.call(a)==v||!1}function Ob(a){return"string"==typeof a||h(a)&&Pa.call(a)==w||!1}function qb(a){return h(a)&&$(a.length)&&f[Pa.call(a)]||!1}function Le(a){return"undefined"==typeof a}function Me(a){var b=a?a.length:0;return $(b)?b?Ta(a):[]:Wb(a)}function Sc(a){return Sb(a,hb(a))}function Oe(b,a,d){var e=Gb(b);return d&&c(b,a,d)&&(a=null),a?Sb(a,e,ca(a)):e}function Pe(a){if(null==a)return a;var b=Ta(arguments);return b.push(Be),Rc.apply(d,b)}function Qe(b,a,c){return a=J(a,c,3),dc(b,a,gb,!0)}function Re(b,a,c){return a=J(a,c,3),dc(b,a,ae,!0)}function Se(c,a,b){return("function"!=typeof a||"undefined"!=typeof b)&&(a=Wa(a,b,3)),yc(c,a,hb)}function Te(b,a,c){return a=Wa(a,c,3),jc(b,a,hb)}function Ue(c,a,b){return("function"!=typeof a||"undefined"!=typeof b)&&(a=Wa(a,b,3)),gb(c,a)}function Ve(b,a,c){return a=Wa(a,c,3),jc(b,a,ca)}function fc(a){return tc(a,hb(a))}function Xe(a,b){return a?aa.call(a,b):!1}function Ye(e,f,g){g&&c(e,f,g)&&(f=null);for(var h=-1,i=ca(e),j=i.length,a={};++h<j;){var b=i[h],d=e[b];f?aa.call(a,d)?a[d].push(b):a[d]=[b]:a[d]=b}return a}function hb(a){if(null==a)return[];ea(a)||(a=jb(a));var c=a.length;c=c&&$(c)&&(b(a)||kb.nonEnumArgs&&eb(a))&&c||0;for(var g=a.constructor,e=-1,h="function"==typeof g&&g.prototype===a,f=z(c),i=c>0;++e<c;)f[e]=e+"";for(var d in a)i&&rb(d,c)||"constructor"==d&&(h||!aa.call(a,d))||f.push(d);return f}function $e(c,a,d){var b={};return a=J(a,d,3),gb(c,function(d,c,e){b[c]=a(d,c,e)}),b}function _e(a,b,c){if(null==a)return{};if("function"!=typeof b){var d=ec(bb(arguments,!1,!1,1),od);return bd(a,Hb(hb(a),d))}return b=Wa(b,c,3),cd(a,function(a,c,d){return!b(a,c,d)})}function af(b){for(var a=-1,c=ca(b),d=c.length,e=z(d);++a<d;){var f=c[a];e[a]=[f,b[f]]}return e}function bf(a,b,c){return null==a?{}:"function"==typeof b?cd(a,Wa(b,c,3)):bd(a,bb(arguments,!1,!1,1))}function cf(b,c,e){var a=null==b?d:b[c];return"undefined"==typeof a&&(a=e),sb(a)?a.call(b):a}function df(a,d,c,g){var e=b(a)||qb(a);if(d=J(d,g,4),null==c)if(e||ea(a)){var f=a.constructor;c=e?b(a)?new f:[]:Gb(sb(f)&&f.prototype)}else c={};return(e?cb:gb)(a,function(a,b,e){return d(c,a,b,e)}),c}function Wb(a){return rc(a,ca(a))}function ff(a){return rc(a,hb(a))}function gf(c,a,b){return a=+a||0,"undefined"==typeof b?(b=a,a=0):b=+b||0,c>=a&&b>c}function hf(a,b,d){d&&c(a,b,d)&&(b=d=null);var g=null==a,e=null==b;if(null==d&&(e&&"boolean"==typeof a?(d=a,a=1):"boolean"==typeof b&&(d=b,e=!0)),g&&e&&(b=1,e=!1),a=+a||0,e?(b=a,a=0):b=+b||0,d||a%1||b%1){var f=Sd();return _a(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return kc(a,b)}function jf(a){return a=g(a),a&&a.charAt(0).toUpperCase()+a.slice(1)}function Wc(a){return a=g(a),a&&a.replace(Ca,Ua)}function lf(b,c,a){b=g(b),c+="";var d=b.length;return a="undefined"==typeof a?d:_a(0>a?0:+a||0,d),a-=c.length,a>=0&&b.indexOf(c,a)==a}function mf(a){return a=g(a),a&&ta.test(a)?a.replace(ma,Xa):a}function Xc(a){return a=g(a),a&&Fa.test(a)?a.replace(ia,"\\$&"):a}function of(a,b,c){a=g(a),b=+b;var d=a.length;if(d>=b||!ub(b))return a;var e=(b-d)/2,f=yb(e),h=Mb(e);return c=mc("",h,c),c.slice(0,f)+a+c}function pf(a,b,c){return a=g(a),a&&mc(a,b,c)+a}function qf(a,b,c){return a=g(a),a&&a+mc(a,b,c)}function Yc(b,a,d){return d&&c(b,a,d)&&(a=0),Ec(b,a)}function Zc(b,a){var c="";if(b=g(b),a=+a,1>a||!b||!ub(a))return c;do a%2&&(c+=b),a=yb(a/2),b+=b;while(a);return c}function tf(b,c,a){return b=g(b),a=null==a?0:_a(0>a?0:+a||0,b.length),b.lastIndexOf(c,a)==a}function uf(f,e,i){var p=a.templateSettings;i&&c(f,e,i)&&(e=i=null),f=g(f),e=Jb(Jb({},i||e),p,Od);var m,j,o=Jb(Jb({},e.imports),p.imports,Od),l=ca(o),t=rc(o,l),n=0,q=e.interpolate||F,b="__p += '",s=Mc((e.escape||F).source+"|"+q.source+"|"+(q===ka?xa:F).source+"|"+(e.evaluate||F).source+"|$","g"),r="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++La+"]")+"\n";f.replace(s,function(c,d,a,h,e,g){return a||(a=h),b+=f.slice(n,g).replace(Ha,ya),d&&(m=!0,b+="' +\n__e("+d+") +\n'"),e&&(j=!0,b+="';\n"+e+";\n__p += '"),a&&(b+="' +\n((__t = ("+a+")) == null ? '' : __t) +\n'"),n=g+c.length,c}),b+="';\n";var k=e.variable;k||(b="with (obj) {\n"+b+"\n}\n"),b=(j?b.replace(Ia,""):b).replace($a,"$1").replace(qa,"$1;"),b="function("+(k||"obj")+") {\n"+(k?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(m?", __e = _.escape":"")+(j?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+b+"return __p\n}";var h=ad(function(){return Gc(l,r+"return "+b).apply(d,t)});if(h.source=b,nc(h))throw h;return h}function $c(a,b,d){var e=a;return(a=g(a))?(d?c(e,b,d):null==b)?a.slice(ga(a),ha(a)+1):(b+="",a.slice(_(a,b),ba(a,b)+1)):a}function wf(a,b,d){var e=a;return a=g(a),a?a.slice((d?c(e,b,d):null==b)?ga(a):_(a,b+"")):a}function xf(a,b,d){var e=a;return a=g(a),a?(d?c(e,b,d):null==b)?a.slice(0,ha(a)+1):a.slice(0,ba(a,b+"")+1):a}function yf(d,b,k){k&&c(d,b,k)&&(b=null);var i=Sa,h=Oa;if(null!=b)if(ea(b)){var a="separator"in b?b.separator:a;i="length"in b?+b.length||0:i,h="omission"in b?g(b.omission):h}else i=+b||0;if(d=g(d),i>=d.length)return d;var e=i-h.length;if(1>e)return h;var f=d.slice(0,e);if(null==a)return f+h;if(ee(a)){if(d.slice(e).search(a)){var l,j,n=d.slice(0,e);for(a.global||(a=Mc(a.source,(Y.exec(a)||"")+"g")),a.lastIndex=0;l=a.exec(n);)j=l.index;f=f.slice(0,null==j?e:j)}}else if(d.indexOf(a,e)!=e){var m=f.lastIndexOf(a);m>-1&&(f=f.slice(0,m))}return f+h}function zf(a){return a=g(a),a&&sa.test(a)?a.replace(na,Ea):a}function _c(a,b,d){return d&&c(a,b,d)&&(b=null),a=g(a),a.match(b||pa)||[]}function ad(){for(var e=arguments[0],a=arguments.length,c=z(a?a-1:0);--a>0;)c[a-1]=arguments[a];try{return e.apply(d,c)}catch(b){return nc(b)?b:new Tf(b)}}function Yb(a,b,d){return d&&c(a,b,d)&&(b=null),h(a)?ed(a):vb(a,b)}function zc(a){return function(){return a}}function ob(a){return a}function ed(a){return Fb(Ib(a,!0))}function Gf(a,b){return kd(a+"",Ib(b,!0))}function Bc(a,b,d){if(null==d){var i=ea(b),e=i&&ca(b),c=e&&e.length&&tc(b,e);(c?c.length:i)||(c=!1,d=b,b=a,a=this)}c||(c=tc(b,ca(b)));var f=!0,h=-1,k=sb(a),l=c.length;d===!1?f=!1:ea(d)&&"chain"in d&&(f=d.chain);for(;++h<l;){var g=c[h],j=b[g];a[g]=j,k&&(a.prototype[g]=function(b){return function(){var d=this.__chain__;if(f||d){var c=a(this.__wrapped__);return(c.__actions__=Ta(this.__actions__)).push({func:b,args:arguments,thisArg:a}),c.__chain__=d,c}var e=[this.value()];return pc.apply(e,arguments),b.apply(a,e)}}(j))}return a}function If(){return Z._=ig,this}function gd(){}function Kf(a){return wb(a+"")}function Lf(a){return function(b){return null==a?d:a[b]}}function Mf(a,d,b){b&&c(a,d,b)&&(d=b=null),a=+a||0,b=null==b?1:+b||0,null==d?(d=a,a=0):d=+d||0;for(var e=-1,f=Ya(Mb((d-a)/(b||1)),0),g=z(f);++e<f;)g[e]=a,a+=b;return g}function Nf(a,c,e){if(a=+a,1>a||!ub(a))return[];var b=-1,d=z(_a(a,$b));for(c=Wa(c,e,1);++b<a;)$b>b?d[b]=c(b):c(b);return d}function Of(a){var b=++gg;return g(a)+b}function Pf(a,b){return a+b}function Qf(a){b(a)||(a=Eb(a));for(var c=a.length,d=0;c--;)d+=+a[c]||0;return d}Z=Z?m.defaults(n.Object(),Z,m.pick(n,Ka)):n;var z=Z.Array,id=Z.Date,Tf=Z.Error,Gc=Z.Function,lb=Z.Math,Ic=Z.Number,jb=Z.Object,Mc=Z.RegExp,od=Z.String,db=Z.TypeError,Pc=z.prototype,Qc=jb.prototype,bg=od.prototype,gc=(gc=Z.window)&&gc.document,td=Gc.prototype.toString,eg=wb("length"),aa=Qc.hasOwnProperty,gg=0,Pa=Qc.toString,ig=Z._,jg=Mc("^"+Xc(Pa).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pb=Ra(pb=Z.ArrayBuffer)&&pb,Lb=Ra(Lb=pb&&new pb(0).slice)&&Lb,Mb=lb.ceil,xb=Z.clearTimeout,yb=lb.floor,zb=Ra(zb=jb.getPrototypeOf)&&zb,pc=Pc.push,rg=Qc.propertyIsEnumerable,Qb=Ra(Qb=Z.Set)&&Qb,Rb=Z.setTimeout,sc=Pc.splice,mb=Ra(mb=Z.Uint8Array)&&mb,Tb=Ra(Tb=Z.WeakMap)&&Tb,Bb=function(){try{var a=Ra(a=Z.Float64Array)&&a,b=new a(new pb(10),0,1)&&a}catch(c){}return b}(),wc=Ra(wc=z.isArray)&&wc,Vb=Ra(Vb=jb.create)&&Vb,ub=Z.isFinite,Xb=Ra(Xb=jb.keys)&&Xb,Ya=lb.max,_a=lb.min,Cc=Ra(Cc=id.now)&&Cc,Dc=Ra(Dc=Ic.isFinite)&&Dc,Ec=Z.parseInt,Sd=lb.random,Td=Ic.NEGATIVE_INFINITY,Fc=Ic.POSITIVE_INFINITY,$b=lb.pow(2,32)-1,Lg=$b-1,Mg=$b>>>1,Wd=Bb?Bb.BYTES_PER_ELEMENT:0,Xd=lb.pow(2,53)-1,_b=Tb&&new Tb,kb=a.support={};!function(){kb.funcDecomp=!Ra(Z.WinRTError)&&fa.test(I),kb.funcNames="string"==typeof Gc.name;try{kb.dom=11===gc.createDocumentFragment().nodeType}catch(a){kb.dom=!1}try{kb.nonEnumArgs=!rg.call(arguments,1)}catch(a){kb.nonEnumArgs=!0}}(0,0),a.templateSettings={escape:ua,evaluate:va,interpolate:ka,variable:"",imports:{_:a}};var Gb=function(){function a(){}return function(b){if(ea(b)){a.prototype=b;var c=new a;a.prototype=null}return c||Z.Object()}}(),Kc=_b?function(a,b){return _b.set(a,b),a}:ob;Lb||(xc=pb&&mb?function(b){var c=b.byteLength,a=Bb?yb(c/Wd):0,d=a*Wd,e=new pb(c);if(a){var f=new Bb(e,0,a);f.set(new Bb(b,0,a))}return c!=d&&(f=new mb(e,d),f.set(new mb(b,d))),e}:zc(null));var Lc=Vb&&Qb?function(a){return new hd(a)}:zc(null),Ug=_b?function(a){return _b.get(a)}:gd,Vg=function(){var a=0,b=0;return function(c,e){var d=tb(),f=ra-(d-b);if(b=d,f>0){if(++a>=Da)return c}else a=0;return Kc(c,e)}}(),Wg=Zb(function(a,c,b){aa.call(a,b)?++a[b]:a[b]=1}),Xg=Zb(function(a,c,b){aa.call(a,b)?a[b].push(c):a[b]=[c]}),Yg=Zb(function(a,b,c){a[c]=b}),Zg=Zb(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),tb=Cc||function(){return(new id).getTime()},_g=Hd(),Nc=Hd(!0),b=wc||function(a){return h(a)&&$(a.length)&&Pa.call(a)==u||!1};kb.dom||(_d=function(a){return a&&1===a.nodeType&&h(a)&&!Ub(a)||!1});var ch=Dc||function(a){return"number"==typeof a&&ub(a)},sb=W(/x/)||mb&&!W(mb)?function(a){return Pa.call(a)==y}:W,Ub=zb?function(a){if(!a||Pa.call(a)!=j)return!1;var c=a.valueOf,b=Ra(c)&&(b=zb(c))&&zb(b);return b?a==b||zb(a)==b:dd(a)}:dd,Rc=Gd(Jb),ca=Xb?function(a){if(a)var b=a.constructor,c=a.length;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&c&&$(c)?fd(a):ea(a)?Xb(a):[]}:fd,hh=Gd(rd),ih=ac(function(b,a,c){return a=a.toLowerCase(),b+(c?a.charAt(0).toUpperCase()+a.slice(1):a)}),jh=ac(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()});8!=Ec(Ja+"08")&&(Yc=function(b,a,d){return(d?c(b,a,d):null==a)?a=0:a&&(a=+a),b=$c(b),Ec(b,a||(Aa.test(b)?16:10))});var kh=ac(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),lh=ac(function(b,a,c){return b+(c?" ":"")+(a.charAt(0).toUpperCase()+a.slice(1))}),mh=Vd(fe),fg=Vd(ke,!0);return a.prototype=cc.prototype,ib.prototype=Gb(cc.prototype),ib.prototype.constructor=ib,D.prototype=Gb(cc.prototype),D.prototype.constructor=D,Cb.prototype["delete"]=Fg,Cb.prototype.get=$g,Cb.prototype.has=gh,Cb.prototype.set=Ce,hd.prototype.push=nf,lc.Cache=Cb,a.after=Sg,a.ary=Tg,a.assign=Rc,a.at=tg,a.before=Nd,a.bind=he,a.bindAll=bh,a.bindKey=Pd,a.callback=Yb,a.chain=yd,a.chunk=Fe,a.compact=He,a.constant=zc,a.countBy=Wg,a.create=Oe,a.curry=Qd,a.curryRight=Rd,a.debounce=Ud,a.defaults=Pe,a.defer=ie,a.delay=je,a.difference=Ie,a.drop=md,a.dropRight=nd,a.dropRightWhile=Ne,a.dropWhile=We,a.fill=Ze,a.filter=Hc,a.flatten=rf,a.flattenDeep=sf,a.flow=_g,a.flowRight=Nc,a.forEach=Dd,a.forEachRight=Ed,a.forIn=Se,a.forInRight=Te,a.forOwn=Ue,a.forOwnRight=Ve,a.functions=fc,a.groupBy=Xg,a.indexBy=Yg,a.initial=Af,a.intersection=Bf,a.invert=Ye,a.invoke=Cg,a.keys=ca,a.keysIn=hb,a.map=hc,a.mapValues=$e,a.matches=ed,a.matchesProperty=Gf,a.memoize=lc,a.merge=hh,a.mixin=Bc,a.negate=le,a.omit=_e,a.once=me,a.pairs=af,a.partial=Yd,a.partialRight=Zd,a.partition=Zg,a.pick=bf,a.pluck=Eg,a.property=Kf,a.propertyOf=Lf,a.pull=Ef,a.pullAt=Ff,a.range=Mf,a.rearg=pe,a.reject=Hg,a.remove=Hf,a.rest=ud,a.shuffle=Kd,a.slice=Rf,a.sortBy=Og,a.sortByAll=Pg,a.sortByOrder=nh,a.spread=qe,a.take=Vf,a.takeRight=Wf,a.takeRightWhile=Xf,a.takeWhile=Yf,a.tap=kg,a.throttle=re,a.thru=zd,a.times=Nf,a.toArray=Me,a.toPlainObject=Sc,a.transform=df,a.union=Zf,a.uniq=vd,a.unzip=wd,a.values=Wb,a.valuesIn=ff,a.where=Rg,a.without=ag,a.wrap=se,a.xor=cg,a.zip=dg,a.zipObject=xd,a.backflow=Nc,a.collect=hc,a.compose=Nc,a.each=Dd,a.eachRight=Ed,a.extend=Rc,a.iteratee=Yb,a.methods=fc,a.object=xd,a.select=Hc,a.tail=ud,a.unique=vd,Bc(a,a),a.add=Pf,a.attempt=ad,a.camelCase=ih,a.capitalize=jf,a.clone=te,a.cloneDeep=ue,a.deburr=Wc,a.endsWith=lf,a.escape=mf,a.escapeRegExp=Xc,a.every=Ad,a.find=Jc,a.findIndex=pd,a.findKey=Qe,a.findLast=xg,a.findLastIndex=kf,a.findLastKey=Re,a.findWhere=yg,a.first=qd,a.has=Xe,a.identity=ob,a.includes=Oc,a.indexOf=Ac,a.inRange=gf,a.isArguments=eb,a.isArray=b,a.isBoolean=we,a.isDate=xe,a.isElement=_d,a.isEmpty=ze,a.isEqual=Ae,a.isError=nc,a.isFinite=ch,a.isFunction=sb,a.isMatch=De,a.isNaN=Ee,a.isNative=Ra,a.isNull=Ge,a.isNumber=de,a.isObject=ea,a.isPlainObject=Ub,a.isRegExp=ee,a.isString=Ob,a.isTypedArray=qb,a.isUndefined=Le,a.kebabCase=jh,a.last=sd,a.lastIndexOf=Df,a.max=mh,a.min=fg,a.noConflict=If,a.noop=gd,a.now=tb,a.pad=of,a.padLeft=pf,a.padRight=qf,a.parseInt=Yc,a.random=hf,a.reduce=ic,a.reduceRight=Id,a.repeat=Zc,a.result=cf,a.runInContext=I,a.size=Kg,a.snakeCase=kh,a.some=Ld,a.sortedIndex=Sf,a.sortedLastIndex=Uf,a.startCase=lh,a.startsWith=tf,a.sum=Qf,a.template=uf,a.trim=$c,a.trimLeft=wf,a.trimRight=xf,a.trunc=yf,a.unescape=zf,a.uniqueId=Of,a.words=_c,a.all=Ad,a.any=Ld,a.contains=Oc,a.detect=Jc,a.foldl=ic,a.foldr=Id,a.head=qd,a.include=Oc,a.inject=ic,Bc(a,function(){var b={};return gb(a,function(d,c){a.prototype[c]||(b[c]=d)}),b}(),!1),a.sample=oc,a.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return oc(b,a)}):oc(this.value())},a.VERSION=Za,cb(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){a[b].placeholder=a}),cb(["dropWhile","filter","map","takeWhile"],function(b,a){var c=a!=ja,d=a==la;D.prototype[b]=function(f,g){var e=this.__filtered__,b=e&&d?new D(this):this.clone(),h=b.__iteratees__||(b.__iteratees__=[]);return h.push({done:!1,count:0,index:0,iteratee:J(f,g,1),limit:-1,type:a}),b.__filtered__=e||c,b}}),cb(["drop","take"],function(a,b){var c=a+"While";D.prototype[a]=function(d){var e=this.__filtered__,c=e&&!b?this.dropWhile():this.clone();if(d=null==d?1:Ya(yb(d)||0,0),e)b?c.__takeCount__=_a(c.__takeCount__,d):sd(c.__iteratees__).limit=d;else{var f=c.__views__||(c.__views__=[]);f.push({size:d,type:a+(c.__dir__<0?"Right":"")})}return c},D.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()},D.prototype[a+"RightWhile"]=function(a,b){return this.reverse()[c](a,b).reverse()}}),cb(["first","last"],function(a,b){var c="take"+(b?"Right":"");D.prototype[a]=function(){return this[c](1).value()[0]}}),cb(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");D.prototype[a]=function(){return this[c](1)}}),cb(["pluck","where"],function(b,a){var c=a?"filter":"map",d=a?Fb:wb;D.prototype[b]=function(a){return this[c](d(a))}}),D.prototype.compact=function(){return this.filter(ob)},D.prototype.reject=function(a,b){return a=J(a,b,1),this.filter(function(b){return!a(b)})},D.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=0>a?this.takeRight(-a):this.drop(a);return"undefined"!=typeof b&&(b=+b||0,c=0>b?c.dropRight(-b):c.take(b-a)),c},D.prototype.toArray=function(){return this.drop(0)},gb(D.prototype,function(d,c){var e=a[c],g=/^(?:filter|map|reject)|While$/.test(c),f=/^(?:first|last)$/.test(c);a.prototype[c]=function(){var c=arguments,m=(c.length,this.__chain__),h=this.__wrapped__,p=!!this.__actions__.length,k=h instanceof D,l=c[0],j=k||b(h);j&&g&&"function"==typeof l&&1!=l.length&&(k=j=!1);var n=k&&!p;if(f&&!m)return n?d.call(h):e.call(a,this.value());var o=function(d){var b=[d];return pc.apply(b,c),e.apply(a,b)};if(j){var q=n?h:new D(this),i=d.apply(q,c);if(!f&&(p||i.__actions__)){var r=i.__actions__||(i.__actions__=[]);r.push({func:zd,args:[o],thisArg:a})}return new ib(i,m)}return this.thru(o)}}),cb(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(b){var c=(/^(?:replace|split)$/.test(b)?bg:Pc)[b],d=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",e=/^(?:join|pop|replace|shift)$/.test(b);a.prototype[b]=function(){var a=arguments;return e&&!this.__chain__?c.apply(this.value(),a):this[d](function(b){return c.apply(b,a)})}}),D.prototype.clone=Je,D.prototype.reverse=Ke,D.prototype.value=_f,a.prototype.chain=mg,a.prototype.commit=ng,a.prototype.plant=og,a.prototype.reverse=pg,a.prototype.toString=qg,a.prototype.run=a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=sg,a.prototype.collect=a.prototype.map,a.prototype.head=a.prototype.first,a.prototype.select=a.prototype.filter,a.prototype.tail=a.prototype.rest,a}var d,Za="3.5.0",i=1,B=2,L=4,oa=8,H=16,l=32,C=64,o=128,q=256,Sa=30,Oa="...",Da=150,ra=16,la=0,wa=1,ja=2,k="Expected a function",R="__lodash_placeholder__",r="[object Arguments]",u="[object Array]",t="[object Boolean]",A="[object Date]",G="[object Error]",y="[object Function]",Z="[object Map]",x="[object Number]",j="[object Object]",v="[object RegExp]",aa="[object Set]",w="[object String]",ca="[object WeakMap]",X="[object ArrayBuffer]",V="[object Float32Array]",U="[object Float64Array]",T="[object Int8Array]",S="[object Int16Array]",Q="[object Int32Array]",P="[object Uint8Array]",O="[object Uint8ClampedArray]",N="[object Uint16Array]",M="[object Uint32Array]",Ia=/\b__p \+= '';/g,$a=/\b(__p \+=) '' \+/g,qa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,na=/&(?:amp|lt|gt|quot|#39|#96);/g,ma=/[&<>"'`]/g,sa=RegExp(na.source),ta=RegExp(ma.source),ua=/<%-([\s\S]+?)%>/g,va=/<%([\s\S]+?)%>/g,ka=/<%=([\s\S]+?)%>/g,xa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Y=/\w*$/,za=/^\s*function[ \n\r\t]+\w/,Aa=/^0[xX]/,Ba=/^\[object .+?Constructor\]$/,Ca=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,F=/($^)/,ia=/[.*+?^${}()|[\]\/\\]/g,Fa=RegExp(ia.source),fa=/\bthis\b/,Ha=/['\n\r\u2028\u2029\\]/g,pa=function(){var a="[A-Z\\xc0-\\xd6\\xd8-\\xde]",b="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(a+"+(?="+a+b+")|"+a+"?"+b+"|"+a+"+|[0-9]+","g")}(),Ja=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",Ka=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],La=-1,f={};f[V]=f[U]=f[T]=f[S]=f[Q]=f[P]=f[O]=f[N]=f[M]=!0,f[r]=f[u]=f[X]=f[t]=f[A]=f[G]=f[y]=f[Z]=f[x]=f[j]=f[v]=f[aa]=f[w]=f[ca]=!1;var e={};e[r]=e[u]=e[X]=e[t]=e[A]=e[V]=e[U]=e[T]=e[S]=e[Q]=e[x]=e[j]=e[v]=e[w]=e[P]=e[O]=e[N]=e[M]=!0,e[G]=e[y]=e[Z]=e[aa]=e[ca]=!1;var E={leading:!1,maxWait:0,trailing:!1},Pa={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Qa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ra={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},J={"function":!0,object:!0},Ta={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},D=J[typeof b]&&b&&!b.nodeType&&b,z=J[typeof a]&&a&&!a.nodeType&&a,Wa=D&&z&&"object"==typeof c&&c,$=J[typeof window]&&window,Ya=z&&z.exports===D&&D,n=Wa||$!==(this&&this.window)&&$||this,m=I();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(n._=m,define(function(){return m})):D&&z?Ya?(z.exports=m)._=m:D._=m:n._=m}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(b,a){var c=b("./murmurhash3_gc.js"),d=b("./murmurhash2_gc.js");a.exports=c,a.exports.murmur3=c,a.exports.murmur2=d},{"./murmurhash2_gc.js":39,"./murmurhash3_gc.js":40}],39:[function(c,a){function b(c,f){for(var b,e=c.length,a=f^e,d=0;e>=4;)b=255&c.charCodeAt(d)|(255&c.charCodeAt(++d))<<8|(255&c.charCodeAt(++d))<<16|(255&c.charCodeAt(++d))<<24,b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16),b^=b>>>24,b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^b,e-=4,++d;switch(e){case 3:a^=(255&c.charCodeAt(d+2))<<16;case 2:a^=(255&c.charCodeAt(d+1))<<8;case 1:a^=255&c.charCodeAt(d),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)}return a^=a>>>13,a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16),a^=a>>>15,a>>>0}void 0!==typeof a&&(a.exports=b)},{}],40:[function(c,a){function b(c,j){var g,i,b,h,e,f,a,d;for(g=3&c.length,i=c.length-g,b=j,e=3432918353,f=461845907,d=0;i>d;)a=255&c.charCodeAt(d)|(255&c.charCodeAt(++d))<<8|(255&c.charCodeAt(++d))<<16|(255&c.charCodeAt(++d))<<24,++d,a=(65535&a)*e+(((a>>>16)*e&65535)<<16)&4294967295,a=a<<15|a>>>17,a=(65535&a)*f+(((a>>>16)*f&65535)<<16)&4294967295,b^=a,b=b<<13|b>>>19,h=5*(65535&b)+((5*(b>>>16)&65535)<<16)&4294967295,b=(65535&h)+27492+(((h>>>16)+58964&65535)<<16);switch(a=0,g){case 3:a^=(255&c.charCodeAt(d+2))<<16;case 2:a^=(255&c.charCodeAt(d+1))<<8;case 1:a^=255&c.charCodeAt(d),a=(65535&a)*e+(((a>>>16)*e&65535)<<16)&4294967295,a=a<<15|a>>>17,a=(65535&a)*f+(((a>>>16)*f&65535)<<16)&4294967295,b^=a}return b^=c.length,b^=b>>>16,b=2246822507*(65535&b)+((2246822507*(b>>>16)&65535)<<16)&4294967295,b^=b>>>13,b=3266489909*(65535&b)+((3266489909*(b>>>16)&65535)<<16)&4294967295,b^=b>>>16,b>>>0}"undefined"!=typeof a&&(a.exports=b)},{}],41:[function(a,b){b.exports=a("./lib/")},{"./lib/":42}],42:[function(a,g,b){function d(b,a){"object"==typeof b&&(a=b,b=void 0),a=a||{};var g,i=h(b),d=i.source,j=i.id;return a.forceNew||a["force new connection"]||!1===a.multiplex?(f("ignoring socket cache for %s",d),g=e(d,a)):(c[j]||(f("new io instance for %s",d),c[j]=e(d,a)),g=c[j]),g.socket(i.path)}var h=a("./url"),i=a("socket.io-parser"),e=a("./manager"),f=a("debug")("socket.io-client");g.exports=b=d;var c=b.managers={};b.protocol=i.protocol,b.connect=d,b.Manager=a("./manager"),b.Socket=a("./socket")},{"./manager":43,"./socket":45,"./url":46,debug:49,"socket.io-parser":79}],43:[function(c,g){function a(c,b){return this instanceof a?(c&&"object"==typeof c&&(b=c,c=void 0),b=b||{},b.path=b.path||"/socket.io",this.nsps={},this.subs=[],this.opts=b,this.reconnection(b.reconnection!==!1),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.timeout(null==b.timeout?2e4:b.timeout),this.readyState="closed",this.uri=c,this.connected=0,this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new f.Encoder,this.decoder=new f.Decoder,void this.open()):new a(c,b)}var h=(c("./url"),c("engine.io-client")),i=c("./socket"),j=c("component-emitter"),f=c("socket.io-parser"),d=c("./on"),e=c("component-bind"),b=(c("object-component"),c("debug")("socket.io-client:manager"));g.exports=a,a.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)this.nsps[a].emit.apply(this.nsps[a],arguments)},j(a.prototype),a.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},a.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},a.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this):this._reconnectionDelay},a.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this):this._reconnectionDelayMax},a.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},a.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||(this.openReconnect=!0,this.reconnect())},a.prototype.open=a.prototype.connect=function(c){if(b("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;b("opening %s",this.uri),this.engine=h(this.uri,this.opts);var e=this.engine,a=this;this.readyState="opening";var g=d(e,"open",function(){a.onopen(),c&&c()}),i=d(e,"error",function(d){if(b("connect_error"),a.cleanup(),a.readyState="closed",a.emitAll("connect_error",d),c){var e=new Error("Connection error");e.data=d,c(e)}a.maybeReconnectOnOpen()});if(!1!==this._timeout){var f=this._timeout;b("connect attempt will timeout after %d",f);var j=setTimeout(function(){b("connect attempt timed out after %d",f),g.destroy(),e.close(),e.emit("error","timeout"),a.emitAll("connect_timeout",f)},f);this.subs.push({destroy:function(){clearTimeout(j)}})}return this.subs.push(g),this.subs.push(i),this},a.prototype.onopen=function(){b("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(d(a,"data",e(this,"ondata"))),this.subs.push(d(this.decoder,"decoded",e(this,"ondecoded"))),this.subs.push(d(a,"error",e(this,"onerror"))),this.subs.push(d(a,"close",e(this,"onclose")))},a.prototype.ondata=function(a){this.decoder.add(a)},a.prototype.ondecoded=function(a){this.emit("packet",a)},a.prototype.onerror=function(a){b("error",a),this.emitAll("error",a)},a.prototype.socket=function(b){var a=this.nsps[b];if(!a){a=new i(this,b),this.nsps[b]=a;var c=this;a.on("connect",function(){c.connected++})}return a},a.prototype.destroy=function(){--this.connected||this.close()},a.prototype.packet=function(c){b("writing packet %j",c);var a=this;a.encoding?a.packetBuffer.push(c):(a.encoding=!0,this.encoder.encode(c,function(c){for(var b=0;b<c.length;b++)a.engine.write(c[b]);a.encoding=!1,
a.processPacketQueue()}))},a.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},a.prototype.cleanup=function(){for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},a.prototype.close=a.prototype.disconnect=function(){this.skipReconnect=!0,this.engine.close()},a.prototype.onclose=function(a){b("close"),this.cleanup(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},a.prototype.reconnect=function(){if(this.reconnecting)return this;var a=this;if(this.attempts++,this.attempts>this._reconnectionAttempts)b("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var c=this.attempts*this.reconnectionDelay();c=Math.min(c,this.reconnectionDelayMax()),b("will wait %dms before reconnect attempt",c),this.reconnecting=!0;var d=setTimeout(function(){b("attempting reconnect"),a.emitAll("reconnect_attempt",a.attempts),a.emitAll("reconnecting",a.attempts),a.open(function(c){c?(b("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",c.data)):(b("reconnect success"),a.onreconnect())})},c);this.subs.push({destroy:function(){clearTimeout(d)}})}},a.prototype.onreconnect=function(){var a=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",a)}},{"./on":44,"./socket":45,"./url":46,"component-bind":47,"component-emitter":48,debug:49,"engine.io-client":50,"object-component":76,"socket.io-parser":79}],44:[function(c,a){function b(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}a.exports=b},{}],45:[function(d,k,l){function a(a,b){this.io=a,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.subEvents()}{var b=d("socket.io-parser"),i=d("component-emitter"),h=d("to-array"),g=d("./on"),f=d("component-bind"),c=d("debug")("socket.io-client:socket"),j=d("has-binary-data");d("indexof")}k.exports=l=a;var m={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},e=i.prototype.emit;i(a.prototype),a.prototype.subEvents=function(){var a=this.io;this.subs=[g(a,"open",f(this,"onopen")),g(a,"packet",f(this,"onpacket")),g(a,"close",f(this,"onclose"))]},a.prototype.open=a.prototype.connect=function(){return this.connected?this:(this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},a.prototype.send=function(){var a=h(arguments);return a.unshift("message"),this.emit.apply(this,a),this},a.prototype.emit=function(g){if(m.hasOwnProperty(g))return e.apply(this,arguments),this;var a=h(arguments),f=b.EVENT;j(a)&&(f=b.BINARY_EVENT);var d={type:f,data:a};return"function"==typeof a[a.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=a.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),this},a.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},a.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:b.CONNECT})},a.prototype.onclose=function(a){c("close (%s)",a),this.connected=!1,this.disconnected=!0,this.emit("disconnect",a)},a.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case b.CONNECT:this.onconnect();break;case b.EVENT:this.onevent(a);break;case b.BINARY_EVENT:this.onevent(a);break;case b.ACK:this.onack(a);break;case b.BINARY_ACK:this.onack(a);break;case b.DISCONNECT:this.ondisconnect();break;case b.ERROR:this.emit("error",a.data)}},a.prototype.onevent=function(b){var a=b.data||[];c("emitting event %j",a),null!=b.id&&(c("attaching ack callback to event"),a.push(this.ack(b.id))),this.connected?e.apply(this,a):this.receiveBuffer.push(a)},a.prototype.ack=function(d){var e=this,a=!1;return function(){if(!a){a=!0;var f=h(arguments);c("sending ack %j",f);var g=j(f)?b.BINARY_ACK:b.ACK;e.packet({type:g,id:d,data:f})}}},a.prototype.onack=function(a){c("calling ack %s with %j",a.id,a.data);var b=this.acks[a.id];b.apply(this,a.data),delete this.acks[a.id]},a.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},a.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)e.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},a.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},a.prototype.destroy=function(){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.io.destroy(this)},a.prototype.close=a.prototype.disconnect=function(){return this.connected?(c("performing disconnect (%s)",this.nsp),this.packet({type:b.DISCONNECT}),this.destroy(),this.onclose("io client disconnect"),this):this}},{"./on":44,"component-bind":47,"component-emitter":48,debug:49,"has-binary-data":73,indexof:75,"socket.io-parser":79,"to-array":83}],46:[function(a,b){(function(d){function e(b,e){var a=b,e=e||d.location;return null==b&&(b=e.protocol+"//"+e.hostname),"string"==typeof b&&("/"==b.charAt(0)&&"undefined"!=typeof e&&(b=e.hostname+b),/^(https?|wss?):\/\//.test(b)||(c("protocol-less url %s",b),b="undefined"!=typeof e?e.protocol+"//"+b:"https://"+b),c("parse %s",b),a=f(b)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/",a.id=a.protocol+"://"+a.host+":"+a.port,a.href=a.protocol+"://"+a.host+(e&&e.port==a.port?"":":"+a.port),a}var f=a("parseuri"),c=a("debug")("socket.io-client:url");b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:49,parseuri:77}],47:[function(c,b){var a=[].slice;b.exports=function(c,b){if("string"==typeof b&&(b=c[b]),"function"!=typeof b)throw new Error("bind() requires a function");var d=a.call(arguments,2);return function(){return b.apply(c,d.concat(a.call(arguments)))}}},{}],48:[function(d,b){function a(a){return a?c(a):void 0}function c(b){for(var c in a.prototype)b[c]=a.prototype[c];return b}b.exports=a,a.prototype.on=a.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},a.prototype.once=function(b,c){function a(){d.off(b,a),c.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},a.fn=c,this.on(b,a),this},a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=a.prototype.removeEventListener=function(d,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var a=this._callbacks[d];if(!a)return this;if(1==arguments.length)return delete this._callbacks[d],this;for(var c,b=0;b<a.length;b++)if(c=a[b],c===e||c.fn===e){a.splice(b,1);break}return this},a.prototype.emit=function(c){this._callbacks=this._callbacks||{};var d=[].slice.call(arguments,1),a=this._callbacks[c];if(a){a=a.slice(0);for(var b=0,e=a.length;e>b;++b)a[b].apply(this,d)}return this},a.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},a.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],49:[function(d,b){function a(b){return a.enabled(b)?function(d){d=c(d);var e=new Date,f=e-(a[b]||e);a[b]=e,d=b+" "+d+" +"+a.humanize(f),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function c(a){return a instanceof Error?a.stack||a.message:a}b.exports=a,a.names=[],a.skips=[],a.enable=function(b){try{localStorage.debug=b}catch(f){}for(var d=(b||"").split(/[\s,]+/),e=d.length,c=0;e>c;c++)b=d[c].replace("*",".*?"),"-"===b[0]?a.skips.push(new RegExp("^"+b.substr(1)+"$")):a.names.push(new RegExp("^"+b+"$"))},a.disable=function(){a.enable("")},a.humanize=function(a){var c=1e3,b=6e4,d=60*b;return a>=d?(a/d).toFixed(1)+"h":a>=b?(a/b).toFixed(1)+"m":a>=c?(a/c|0)+"s":a+"ms"},a.enabled=function(c){for(var b=0,d=a.skips.length;d>b;b++)if(a.skips[b].test(c))return!1;for(var b=0,d=a.names.length;d>b;b++)if(a.names[b].test(c))return!0;return!1};try{window.localStorage&&a.enable(localStorage.debug)}catch(e){}},{}],50:[function(a,b){b.exports=a("./lib/")},{"./lib/":51}],51:[function(a,b){b.exports=a("./socket"),b.exports.parser=a("engine.io-parser")},{"./socket":52,"engine.io-parser":61}],52:[function(a,b){(function(e){function c(b,a){if(!(this instanceof c))return new c(b,a);if(a=a||{},b&&"object"==typeof b&&(a=b,b=null),b&&(b=k(b),a.host=b.host,a.secure="https"==b.protocol||"wss"==b.protocol,a.port=b.port,b.query&&(a.query=b.query)),this.secure=null!=a.secure?a.secure:e.location&&"https:"==location.protocol,a.host){var d=a.host.split(":");a.hostname=d.shift(),d.length&&(a.port=d.pop())}this.agent=a.agent||!1,this.hostname=a.hostname||(e.location?location.hostname:"localhost"),this.port=a.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=a.query||{},"string"==typeof this.query&&(this.query=m.decode(this.query)),this.upgrade=!1!==a.upgrade,this.path=(a.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!a.forceJSONP,this.forceBase64=!!a.forceBase64,this.timestampParam=a.timestampParam||"t",this.timestampRequests=a.timestampRequests,this.transports=a.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=a.policyPort||843,this.rememberUpgrade=a.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=a.onlyBinaryUpgrades}function i(a){var c={};for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}var g=a("./transports"),h=a("component-emitter"),d=a("debug")("engine.io-client:socket"),j=a("indexof"),f=a("engine.io-parser"),k=a("parseuri"),l=a("parsejson"),m=a("parseqs");b.exports=c,c.priorWebsocketSuccess=!1,h(c.prototype),c.protocol=f.protocol,c.Socket=c,c.Transport=a("./transport"),c.transports=a("./transports"),c.parser=a("engine.io-parser"),c.prototype.createTransport=function(b){d('creating transport "%s"',b);var a=i(this.query);a.EIO=f.protocol,a.transport=b,this.id&&(a.sid=this.id);var c=new g[b]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:a,forceJSONP:this.forceJSONP,forceBase64:this.forceBase64,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this});return c},c.prototype.open=function(){var a;a=this.rememberUpgrade&&c.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket")?"websocket":this.transports[0],this.readyState="opening";var a=this.createTransport(a);a.open(),this.setTransport(a)},c.prototype.setTransport=function(b){d("setting transport %s",b.name);var a=this;this.transport&&(d("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=b,b.on("drain",function(){a.onDrain()}).on("packet",function(b){a.onPacket(b)}).on("error",function(b){a.onError(b)}).on("close",function(){a.onClose("transport close")})},c.prototype.probe=function(f){function i(){if(b.onlyBinaryUpgrades){var g=!this.supportsBinary&&b.transport.supportsBinary;e=e||g}e||(d('probe transport "%s" opened',f),a.send([{type:"ping",data:"probe"}]),a.once("packet",function(g){if(!e)if("pong"==g.type&&"probe"==g.data)d('probe transport "%s" pong',f),b.upgrading=!0,b.emit("upgrading",a),c.priorWebsocketSuccess="websocket"==a.name,d('pausing current transport "%s"',b.transport.name),b.transport.pause(function(){e||"closed"!=b.readyState&&"closing"!=b.readyState&&(d("changing transport and sending upgrade packet"),k(),b.setTransport(a),a.send([{type:"upgrade"}]),b.emit("upgrade",a),a=null,b.upgrading=!1,b.flush())});else{d('probe transport "%s" failed',f);var h=new Error("probe error");h.transport=a.name,b.emit("upgradeError",h)}}))}function l(){e||(e=!0,k(),a.close(),a=null)}function g(c){var e=new Error("probe error: "+c);e.transport=a.name,l(),d('probe transport "%s" failed because of error: %s',f,c),b.emit("upgradeError",e)}function h(){g("transport closed")}function m(){g("socket closed")}function j(b){a&&b.name!=a.name&&(d('"%s" works - aborting "%s"',b.name,a.name),l())}function k(){a.removeListener("open",i),a.removeListener("error",g),a.removeListener("close",h),b.removeListener("close",m),b.removeListener("upgrading",j)}d('probing transport "%s"',f);var a=this.createTransport(f,{probe:1}),e=!1,b=this;c.priorWebsocketSuccess=!1,a.once("open",i),a.once("error",g),a.once("close",h),this.once("close",m),this.once("upgrading",j),a.open()},c.prototype.onOpen=function(){if(d("socket open"),this.readyState="open",c.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){d("starting upgrade probes");for(var a=0,b=this.upgrades.length;b>a;a++)this.probe(this.upgrades[a])}},c.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(d('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(l(a.data));break;case"pong":this.setPing();break;case"error":var b=new Error("server error");b.code=a.data,this.emit("error",b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else d('packet received with socket readyState "%s"',this.readyState)},c.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},c.prototype.onHeartbeat=function(b){clearTimeout(this.pingTimeoutTimer);var a=this;a.pingTimeoutTimer=setTimeout(function(){"closed"!=a.readyState&&a.onClose("ping timeout")},b||a.pingInterval+a.pingTimeout)},c.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){d("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},c.prototype.ping=function(){this.sendPacket("ping")},c.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)this.callbackBuffer[a]&&this.callbackBuffer[a]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},c.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(d("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},c.prototype.write=c.prototype.send=function(a,b){return this.sendPacket("message",a,b),this},c.prototype.sendPacket=function(b,c,d){var a={type:b,data:c};this.emit("packetCreate",a),this.writeBuffer.push(a),this.callbackBuffer.push(d),this.flush()},c.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.onClose("forced close"),d("socket closing - telling transport to close"),this.transport.close()),this},c.prototype.onError=function(a){d("socket error %j",a),c.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},c.prototype.onClose=function(b,c){if("opening"==this.readyState||"open"==this.readyState){d('socket close with reason: "%s"',b);var a=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){a.writeBuffer=[],a.callbackBuffer=[],a.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",b,c)}},c.prototype.filterUpgrades=function(b){for(var c=[],a=0,d=b.length;d>a;a++)~j(this.transports,b[a])&&c.push(b[a]);return c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":53,"./transports":54,"component-emitter":48,debug:49,"engine.io-parser":61,indexof:75,parsejson:70,parseqs:71,parseuri:77}],53:[function(b,c){function a(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket}var d=b("engine.io-parser"),e=b("component-emitter");c.exports=a,e(a.prototype),a.timestamps=0,a.prototype.onError=function(b,c){var a=new Error(b);return a.type="TransportError",a.description=c,this.emit("error",a),this},a.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},a.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},a.prototype.send=function(a){if("open"!=this.readyState)throw new Error("Transport not open");this.write(a)},a.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},a.prototype.onData=function(a){try{var c=d.decodePacket(a,this.socket.binaryType);this.onPacket(c)}catch(b){b.data=a,this.onError("parser decode error",b)}},a.prototype.onPacket=function(a){this.emit("packet",a)},a.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":48,"engine.io-parser":61}],54:[function(a,c,b){(function(c){function d(a){var d,h=!1;if(c.location){var i="https:"==location.protocol,b=location.port;b||(b=i?443:80),h=a.hostname!=location.hostname||b!=a.port}return a.xdomain=h,d=new e(a),"open"in d&&!a.forceJSONP?new f(a):new g(a)}var e=a("xmlhttprequest"),f=a("./polling-xhr"),g=a("./polling-jsonp"),h=a("./websocket");b.polling=d,b.websocket=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":55,"./polling-xhr":56,"./websocket":58,xmlhttprequest:59}],55:[function(a,b){(function(c){function g(){}function d(b){f.call(this,b),this.query=this.query||{},e||(c.___eio||(c.___eio=[]),e=c.___eio),this.index=e.length;var a=this;e.push(function(b){a.onData(b)}),this.query.j=this.index,c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){a.script&&(a.script.onerror=g)})}var f=a("./polling"),h=a("component-inherit");b.exports=d;var e,i=/\n/g,j=/\\n/g;h(d,f),d.prototype.supportsBinary=!1,d.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null),f.prototype.doClose.call(this)},d.prototype.doPoll=function(){var c=this,a=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),a.async=!0,a.src=this.uri(),a.onerror=function(a){c.onError("jsonp poll error",a)};var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b),this.script=a;var d="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);d&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},d.prototype.doWrite=function(d,h){function f(){g(),h()}function g(){if(a.iframe)try{a.form.removeChild(a.iframe)}catch(b){a.onError("jsonp polling iframe removal error",b)}try{var d='<iframe src="javascript:0" name="'+a.iframeId+'">';c=document.createElement(d)}catch(b){c=document.createElement("iframe"),c.name=a.iframeId,c.src="javascript:0"}c.id=a.iframeId,a.form.appendChild(c),a.iframe=c}var a=this;if(!this.form){var c,b=document.createElement("form"),e=document.createElement("textarea"),k=this.iframeId="eio_iframe_"+this.index;b.className="socketio",b.style.position="absolute",b.style.top="-1000px",b.style.left="-1000px",b.target=k,b.method="POST",b.setAttribute("accept-charset","utf-8"),e.name="d",b.appendChild(e),document.body.appendChild(b),this.form=b,this.area=e}this.form.action=this.uri(),g(),d=d.replace(j,"\\\n"),this.area.value=d.replace(i,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==a.iframe.readyState&&f()}:this.iframe.onload=f}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":57,"component-inherit":60}],56:[function(a,b){(function(d){function i(){}function e(a){if(h.call(this,a),d.location){var c="https:"==location.protocol,b=location.port;b||(b=c?443:80),this.xd=a.hostname!=d.location.hostname||b!=a.port}}function c(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.async=!1!==a.async,this.data=void 0!=a.data?a.data:null,this.agent=a.agent,this.create(a.isBinary,a.supportsBinary)}function g(){for(var a in c.requests)c.requests.hasOwnProperty(a)&&c.requests[a].abort()}var j=a("xmlhttprequest"),h=a("./polling"),k=a("component-emitter"),l=a("component-inherit"),f=a("debug")("engine.io-client:polling-xhr");b.exports=e,b.exports.Request=c,l(e,h),e.prototype.supportsBinary=!0,e.prototype.request=function(a){return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,new c(a)},e.prototype.doWrite=function(a,c){var d="string"!=typeof a&&void 0!==a,b=this.request({method:"POST",data:a,isBinary:d}),e=this;b.on("success",c),b.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=b},e.prototype.doPoll=function(){f("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},k(c.prototype),c.prototype.create=function(g,e){var a=this.xhr=new j({agent:this.agent,xdomain:this.xd}),b=this;try{if(f("xhr open %s: %s",this.method,this.uri),a.open(this.method,this.uri,this.async),e&&(a.responseType="arraybuffer"),"POST"==this.method)try{g?a.setRequestHeader("Content-type","application/octet-stream"):a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(h){}"withCredentials"in a&&(a.withCredentials=!0),a.onreadystatechange=function(){var c;try{if(4!=a.readyState)return;if(200==a.status||1223==a.status){var d=a.getResponseHeader("Content-Type");c="application/octet-stream"===d?a.response:e?"ok":a.responseText}else setTimeout(function(){b.onError(a.status)},0)}catch(f){b.onError(f)}null!=c&&b.onData(c)},f("xhr data %s",this.data),a.send(this.data)}catch(h){return void setTimeout(function(){b.onError(h)},0)}d.document&&(this.index=c.requestsCount++,c.requests[this.index]=this)},c.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},c.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},c.prototype.onError=function(a){this.emit("error",a),this.cleanup()},c.prototype.cleanup=function(){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.xhr.onreadystatechange=i;try{this.xhr.abort()}catch(a){}d.document&&delete c.requests[this.index],this.xhr=null}},c.prototype.abort=function(){this.cleanup()},d.document&&(c.requestsCount=0,c.requests={},d.attachEvent?d.attachEvent("onunload",g):d.addEventListener&&d.addEventListener("beforeunload",g))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":57,"component-emitter":48,"component-inherit":60,debug:49,xmlhttprequest:59}],57:[function(c,f){function b(a){var b=a&&a.forceBase64;(!i||b)&&(this.supportsBinary=!1),d.call(this,a)}var d=c("../transport"),g=c("parseqs"),e=c("engine.io-parser"),h=c("component-inherit"),a=c("debug")("engine.io-client:polling");f.exports=b;var i=function(){var a=c("xmlhttprequest"),b=new a({agent:this.agent,xdomain:!1});return null!=b.responseType}();h(b,d),b.prototype.name="polling",b.prototype.doOpen=function(){this.poll()},b.prototype.pause=function(d){function c(){a("paused"),e.readyState="paused",d()}var e=this;if(this.readyState="pausing",this.polling||!this.writable){var b=0;this.polling&&(a("we are currently polling - waiting to pause"),b++,this.once("pollComplete",function(){a("pre-pause polling complete"),--b||c()})),this.writable||(a("we are currently writing - waiting to pause"),b++,this.once("drain",function(){a("pre-pause writing complete"),--b||c()}))}else c()},b.prototype.poll=function(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},b.prototype.onData=function(c){var b=this;a("polling got data %s",c);var d=function(a){return"opening"==b.readyState&&b.onOpen(),"close"==a.type?(b.onClose(),!1):void b.onPacket(a)};e.decodePayload(c,this.socket.binaryType,d),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))},b.prototype.doClose=function(){function b(){a("writing close packet"),c.write([{type:"close"}])}var c=this;"open"==this.readyState?(a("transport open - closing"),b()):(a("transport not open - deferring close"),this.once("open",b))},b.prototype.write=function(b){var a=this;this.writable=!1;var c=function(){a.writable=!0,a.emit("drain")},a=this;e.encodePayload(b,this.supportsBinary,function(b){a.doWrite(b,c)})},b.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";return!1!==this.timestampRequests&&(a[this.timestampParam]=+new Date+"-"+d.timestamps++),this.supportsBinary||a.sid||(a.b64=1),a=g.encode(a),this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a}},{"../transport":53,"component-inherit":60,debug:49,"engine.io-parser":61,parseqs:71,xmlhttprequest:59}],58:[function(b,e){function a(a){var b=a&&a.forceBase64;b&&(this.supportsBinary=!1),c.call(this,a)}var c=b("../transport"),f=b("engine.io-parser"),g=b("parseqs"),h=b("component-inherit"),i=b("debug")("engine.io-client:websocket"),d=b("ws");e.exports=a,h(a,c),a.prototype.name="websocket",a.prototype.supportsBinary=!0,a.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b=void 0,c={agent:this.agent};this.ws=new d(a,b,c),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},a.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(a.prototype.onData=function(a){var b=this;setTimeout(function(){c.prototype.onData.call(b,a)},0)}),a.prototype.write=function(c){function d(){a.writable=!0,a.emit("drain")}var a=this;this.writable=!1;for(var b=0,e=c.length;e>b;b++)f.encodePacket(c[b],this.supportsBinary,function(b){try{a.ws.send(b)}catch(c){i("websocket closed before onclose event")}});setTimeout(d,0)},a.prototype.onClose=function(){c.prototype.onClose.call(this)},a.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},a.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";return this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=+new Date),this.supportsBinary||(a.b64=1),a=g.encode(a),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a},a.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===a.prototype.name)}},{"../transport":53,"component-inherit":60,debug:49,"engine.io-parser":61,parseqs:71,ws:72}],59:[function(a,b){var c=a("has-cors");b.exports=function(b){var a=b.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!a||c))return new XMLHttpRequest}catch(d){}if(!a)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(d){}}},{"has-cors":68}],60:[function(b,a){a.exports=function(a,c){var b=function(){};b.prototype=c.prototype,a.prototype=new b,a.prototype.constructor=a}},{}],61:[function(b,c,a){(function(f){function m(c,i,e){if(!i)return a.encodeBase64Packet(c,e);var f=c.data,h=new Uint8Array(f),d=new Uint8Array(1+f.byteLength);d[0]=g[c.type];for(var b=0;b<h.length;b++)d[b+1]=h[b];return e(d.buffer)}function p(b,d,e){if(!d)return a.encodeBase64Packet(b,e);var c=new FileReader;return c.onload=function(){b.data=c.result,a.encodePacket(b,d,e)},c.readAsArrayBuffer(b.data)}function o(b,e,d){if(!e)return a.encodeBase64Packet(b,d);if(k)return p(b,e,d);var f=new Uint8Array(1);f[0]=g[b.type];var h=new c([f.buffer,b.data]);return d(h)}function i(a,d,e){for(var c=new Array(a.length),f=n(a.length,e),g=function(a,b,e){d(b,function(b,d){c[a]=d,e(b,c)})},b=0;b<a.length;b++)g(b,a[b],f)}var l=b("./keys"),h=b("arraybuffer.slice"),q=b("base64-arraybuffer"),n=b("after"),j=b("utf8"),k=navigator.userAgent.match(/Android/i);a.protocol=2;var g=a.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},e=l(g),d={type:"error",data:"parser error"},c=b("blob");a.encodePacket=function(a,b,d){"function"==typeof b&&(d=b,b=!1);var e=void 0===a.data?void 0:a.data.buffer||a.data;if(f.ArrayBuffer&&e instanceof ArrayBuffer)return m(a,b,d);if(c&&e instanceof f.Blob)return o(a,b,d);var h=g[a.type];return void 0!==a.data&&(h+=j.encode(String(a.data))),d(""+h)},a.encodeBase64Packet=function(b,j){var e="b"+a.packets[b.type];if(c&&b.data instanceof c){var g=new FileReader;return g.onload=function(){var a=g.result.split(",")[1];j(e+a)},g.readAsDataURL(b.data)}var h;try{h=String.fromCharCode.apply(null,new Uint8Array(b.data))}catch(l){for(var i=new Uint8Array(b.data),k=new Array(i.length),d=0;d<i.length;d++)k[d]=i[d];h=String.fromCharCode.apply(null,k)}return e+=f.btoa(h),j(e)},a.decodePacket=function(b,i){if("string"==typeof b||void 0===b){if("b"==b.charAt(0))return a.decodeBase64Packet(b.substr(1),i);b=j.decode(b);var f=b.charAt(0);return Number(f)==f&&e[f]?b.length>1?{type:e[f],data:b.substring(1)}:{type:e[f]}:d}var k=new Uint8Array(b),f=k[0],g=h(b,1);return c&&"blob"===i&&(g=new c([g])),{type:e[f],data:g}},a.decodeBase64Packet=function(a,g){var d=e[a.charAt(0)];if(!f.ArrayBuffer)return{type:d,data:{base64:!0,data:a.substr(1)}};var b=q.decode(a.substr(1));return"blob"===g&&c&&(b=new c([b])),{type:d,data:b}},a.encodePayload=function(e,b,d){function f(a){return a.length+":"+a}function g(c,d){a.encodePacket(c,b,function(a){d(null,f(a))})}return"function"==typeof b&&(d=b,b=null),b?c&&!k?a.encodePayloadAsBlob(e,d):a.encodePayloadAsArrayBuffer(e,d):e.length?void i(e,g,function(b,a){return d(a.join(""))}):d("0:")},a.decodePayload=function(e,g,b){if("string"!=typeof e)return a.decodePayloadAsBinary(e,g,b);"function"==typeof g&&(b=g,g=null);var i;if(""==e)return b(d,0,1);for(var j,h,c="",f=0,k=e.length;k>f;f++){var l=e.charAt(f);if(":"!=l)c+=l;else{if(""==c||c!=(j=Number(c)))return b(d,0,1);if(h=e.substr(f+1,j),c!=h.length)return b(d,0,1);if(h.length){if(i=a.decodePacket(h,g),d.type==i.type&&d.data==i.data)return b(d,0,1);var m=b(i,f+j,k);if(!1===m)return}f+=j,c=""}}return""!=c?b(d,0,1):void 0},a.encodePayloadAsArrayBuffer=function(b,c){function d(b,c){a.encodePacket(b,!0,function(a){return c(null,a)})}return b.length?void i(b,d,function(f,d){var e=d.reduce(function(c,a){var b;return b="string"==typeof a?a.length:a.byteLength,c+b.toString().length+b+2},0),a=new Uint8Array(e),b=0;return d.forEach(function(d){var g="string"==typeof d,f=d;if(g){for(var e=new Uint8Array(d.length),c=0;c<d.length;c++)e[c]=d.charCodeAt(c);f=e.buffer}a[b++]=g?0:1;for(var h=f.byteLength.toString(),c=0;c<h.length;c++)a[b++]=parseInt(h[c]);a[b++]=255;for(var e=new Uint8Array(f),c=0;c<e.length;c++)a[b++]=e[c]}),c(a.buffer)}):c(new ArrayBuffer(0))},a.encodePayloadAsBlob=function(b,d){function e(b,d){a.encodePacket(b,!0,function(a){var f=new Uint8Array(1);if(f[0]=1,"string"==typeof a){for(var h=new Uint8Array(a.length),b=0;b<a.length;b++)h[b]=a.charCodeAt(b);

a=h.buffer,f[0]=0}for(var i=a instanceof ArrayBuffer?a.byteLength:a.size,e=i.toString(),g=new Uint8Array(e.length+1),b=0;b<e.length;b++)g[b]=parseInt(e[b]);if(g[e.length]=255,c){var j=new c([f.buffer,g.buffer,a]);d(null,j)}})}i(b,e,function(b,a){return d(new c(a))})},a.decodePayloadAsBinary=function(m,f,j){"function"==typeof f&&(j=f,f=null);for(var b=m,g=[];b.byteLength>0;){for(var i=new Uint8Array(b),l=0===i[0],c="",d=1;255!=i[d];d++)c+=i[d];b=h(b,2+c.length),c=parseInt(c);var e=h(b,0,c);if(l)try{e=String.fromCharCode.apply(null,new Uint8Array(e))}catch(o){var k=new Uint8Array(e);e="";for(var d=0;d<k.length;d++)e+=String.fromCharCode(k[d])}g.push(e),b=h(b,c)}var n=g.length;g.forEach(function(b,c){j(a.decodePacket(b,f),c,n)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":62,after:63,"arraybuffer.slice":64,"base64-arraybuffer":65,blob:66,utf8:67}],62:[function(b,a){a.exports=Object.keys||function(a){var b=[],d=Object.prototype.hasOwnProperty;for(var c in a)d.call(a,c)&&b.push(c);return b}},{}],63:[function(d,a){function b(e,b,d){function a(c,e){if(a.count<=0)throw new Error("after called too many times");--a.count,c?(f=!0,b(c),b=d):0!==a.count||f||b(null,e)}var f=!1;return d=d||c,a.count=e,0===e?b():a}function c(){}a.exports=b},{}],64:[function(b,a){a.exports=function(d,b,a){var c=d.byteLength;if(b=b||0,a=a||c,d.slice)return d.slice(b,a);if(0>b&&(b+=c),0>a&&(a+=c),a>c&&(a=c),b>=c||b>=a||0===c)return new ArrayBuffer(0);for(var h=new Uint8Array(d),f=new Uint8Array(a-b),e=b,g=0;a>e;e++,g++)f[g]=h[e];return f.buffer}},{}],65:[function(b,c,a){!function(b){"use strict";a.encode=function(f){var c,d=new Uint8Array(f),e=d.length,a="";for(c=0;e>c;c+=3)a+=b[d[c]>>2],a+=b[(3&d[c])<<4|d[c+1]>>4],a+=b[(15&d[c+1])<<2|d[c+2]>>6],a+=b[63&d[c+2]];return e%3===2?a=a.substring(0,a.length-1)+"=":e%3===1&&(a=a.substring(0,a.length-2)+"=="),a},a.decode=function(a){var c,i,e,f,k,h=.75*a.length,l=a.length,d=0;"="===a[a.length-1]&&(h--,"="===a[a.length-2]&&h--);var j=new ArrayBuffer(h),g=new Uint8Array(j);for(c=0;l>c;c+=4)i=b.indexOf(a[c]),e=b.indexOf(a[c+1]),f=b.indexOf(a[c+2]),k=b.indexOf(a[c+3]),g[d++]=i<<2|e>>4,g[d++]=(15&e)<<4|f>>2,g[d++]=(3&f)<<6|63&k;return j}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],66:[function(b,a){(function(b){function d(e,a){a=a||{};for(var b=new c,d=0;d<e.length;d++)b.append(e[d]);return a.type?b.getBlob(a.type):b.getBlob()}var c=b.BlobBuilder||b.WebKitBlobBuilder||b.MSBlobBuilder||b.MozBlobBuilder,e=function(){try{var a=new Blob(["hi"]);return 2==a.size}catch(b){return!1}}(),f=c&&c.prototype.append&&c.prototype.getBlob;a.exports=function(){return e?b.Blob:f?d:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],67:[function(c,a,b){(function(c){!function(o){function n(d){for(var a,e,c=[],b=0,f=d.length;f>b;)a=d.charCodeAt(b++),a>=55296&&56319>=a&&f>b?(e=d.charCodeAt(b++),56320==(64512&e)?c.push(((1023&a)<<10)+(1023&e)+65536):(c.push(a),b--)):c.push(a);return c}function u(c){for(var a,f=c.length,e=-1,b="";++e<f;)a=c[e],a>65535&&(a-=65536,b+=d(a>>>10&1023|55296),a=56320|1023&a),b+=d(a);return b}function m(a,b){return d(a>>b&63|128)}function t(a){if(0==(4294967168&a))return d(a);var b="";return 0==(4294965248&a)?b=d(a>>6&31|192):0==(4294901760&a)?(b=d(a>>12&15|224),b+=m(a,6)):0==(4292870144&a)&&(b=d(a>>18&7|240),b+=m(a,12),b+=m(a,6)),b+=d(63&a|128)}function s(e){for(var a,b=n(e),f=b.length,c=-1,d="";++c<f;)a=b[c],d+=t(a);return d}function g(){if(e>=i)throw Error("Invalid byte index");var a=255&j[e];if(e++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function r(){var b,c,d,f,a;if(e>i)throw Error("Invalid byte index");if(e==i)return!1;if(b=255&j[e],e++,0==(128&b))return b;if(192==(224&b)){var c=g();if(a=(31&b)<<6|c,a>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&b)){if(c=g(),d=g(),a=(15&b)<<12|c<<6|d,a>=2048)return a;throw Error("Invalid continuation byte")}if(240==(248&b)&&(c=g(),d=g(),f=g(),a=(15&b)<<18|c<<12|d<<6|f,a>=65536&&1114111>=a))return a;throw Error("Invalid UTF-8 detected")}function q(c){j=n(c),i=j.length,e=0;for(var a,b=[];(a=r())!==!1;)b.push(a);return u(b)}var k="object"==typeof b&&b,p="object"==typeof a&&a&&a.exports==k&&a,h="object"==typeof c&&c;(h.global===h||h.window===h)&&(o=h);var j,i,e,d=String.fromCharCode,f={version:"2.0.0",encode:s,decode:q};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return f});else if(k&&!k.nodeType)if(p)p.exports=f;else{var v={},w=v.hasOwnProperty;for(var l in f)w.call(f,l)&&(k[l]=f[l])}else o.utf8=f}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],68:[function(c,a){var b=c("global");try{a.exports="XMLHttpRequest"in b&&"withCredentials"in new b.XMLHttpRequest}catch(d){a.exports=!1}},{global:69}],69:[function(b,a){a.exports=function(){return this}()},{}],70:[function(b,a){(function(b){var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,g=/^\s+/,h=/\s+$/;a.exports=function(a){return"string"==typeof a&&a?(a=a.replace(g,"").replace(h,""),b.JSON&&JSON.parse?JSON.parse(a):c.test(a.replace(d,"@").replace(e,"]").replace(f,""))?new Function("return "+a)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],71:[function(b,c,a){a.encode=function(b){var a="";for(var c in b)b.hasOwnProperty(c)&&(a.length&&(a+="&"),a+=encodeURIComponent(c)+"="+encodeURIComponent(b[c]));return a},a.decode=function(e){for(var b={},c=e.split("&"),a=0,f=c.length;f>a;a++){var d=c[a].split("=");b[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return b}},{}],72:[function(e,d){function b(b,c){var d;return d=c?new a(b,c):new a(b)}var c=function(){return this}(),a=c.WebSocket||c.MozWebSocket;d.exports=a?b:null,a&&(b.prototype=a.prototype)},{}],73:[function(a,b){(function(c,d){function e(b){function a(b){if(!b)return!1;if(c.Buffer&&d.isBuffer(b)||c.ArrayBuffer&&b instanceof ArrayBuffer||c.Blob&&b instanceof Blob||c.File&&b instanceof File)return!0;if(f(b)){for(var e=0;e<b.length;e++)if(a(b[e]))return!0}else if(b&&"object"==typeof b){b.toJSON&&(b=b.toJSON());for(var g in b)if(a(b[g]))return!0}return!1}return a(b)}var f=a("isarray");b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{buffer:13,isarray:74}],74:[function(b,c,a){arguments[4][19][0].apply(a,arguments)},{dup:19}],75:[function(c,a){var b=[].indexOf;a.exports=function(c,d){if(b)return c.indexOf(d);for(var a=0;a<c.length;++a)if(c[a]===d)return a;return-1}},{}],76:[function(c,d,a){var b=Object.prototype.hasOwnProperty;a.keys=Object.keys||function(a){var c=[];for(var d in a)b.call(a,d)&&c.push(d);return c},a.values=function(a){var c=[];for(var d in a)b.call(a,d)&&c.push(a[d]);return c},a.merge=function(d,a){for(var c in a)b.call(a,c)&&(d[c]=a[c]);return d},a.length=function(b){return a.keys(b).length},a.isEmpty=function(b){return 0==a.length(b)}},{}],77:[function(d,a){var b=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];a.exports=function(e){for(var f=b.exec(e||""),d={},a=14;a--;)d[c[a]]=f[a]||"";return d}},{}],78:[function(b,c,a){(function(c,e){function f(a){return c.Buffer&&e.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer}var d=b("isarray");a.deconstructPacket=function(g){function b(f){if(!f)return f;if(c.Buffer&&e.isBuffer(f)||c.ArrayBuffer&&f instanceof ArrayBuffer){var j={_placeholder:!0,num:a.length};return a.push(f),j}if(d(f)){for(var g=new Array(f.length),h=0;h<f.length;h++)g[h]=b(f[h]);return g}if("object"==typeof f&&!(f instanceof Date)){var g={};for(var i in f)g[i]=b(f[i]);return g}return f}var a=[],h=g.data,f=g;return f.data=b(h),f.attachments=a.length,{packet:f,buffers:a}},a.reconstructPacket=function(a,c){function b(a){if(a&&a._placeholder){var g=c[a.num];return g}if(d(a)){for(var e=0;e<a.length;e++)a[e]=b(a[e]);return a}if(a&&"object"==typeof a){for(var f in a)a[f]=b(a[f]);return a}return a}return a.data=b(a.data),a.attachments=void 0,a},a.removeBlobs=function(h,g){function b(h,m,j){if(!h)return h;if(c.Blob&&h instanceof Blob||c.File&&h instanceof File){e++;var k=new FileReader;k.onload=function(){j?j[m]=this.result:a=this.result,--e||g(a)},k.readAsArrayBuffer(h)}if(d(h))for(var i=0;i<h.length;i++)b(h[i],i,h);else if(h&&"object"==typeof h&&!f(h))for(var l in h)b(h[l],l,h)}var e=0,a=h;b(a),e||g(a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},b("buffer").Buffer)},{buffer:13,isarray:81}],79:[function(b,c,a){(function(h,l){function i(){}function j(b){var c="",d=!1;return c+=b.type,(a.BINARY_EVENT==b.type||a.BINARY_ACK==b.type)&&(c+=b.attachments,c+="-"),b.nsp&&"/"!=b.nsp&&(d=!0,c+=b.nsp),null!=b.id&&(d&&(c+=",",d=!1),c+=b.id),null!=b.data&&(d&&(c+=","),c+=g.stringify(b.data)),e("encoded %j as %s",b,c),c}function m(a,b){function c(e){var a=d.deconstructPacket(e),f=j(a.packet),c=a.buffers;c.unshift(f),b(c)}d.removeBlobs(a,c)}function c(){this.reconstructor=null}function o(d){var b={},c=0;if(b.type=Number(d.charAt(0)),null==a.types[b.type])return k();if(a.BINARY_EVENT==b.type||a.BINARY_ACK==b.type){for(b.attachments="";"-"!=d.charAt(++c);)b.attachments+=d.charAt(c);b.attachments=Number(b.attachments)}if("/"==d.charAt(c+1))for(b.nsp="";++c;){var f=d.charAt(c);if(","==f)break;if(b.nsp+=f,c+1==d.length)break}else b.nsp="/";var h=d.charAt(c+1);if(""!=h&&Number(h)==h){for(b.id="";++c;){var f=d.charAt(c);if(null==f||Number(f)!=f){--c;break}if(b.id+=d.charAt(c),c+1==d.length)break}b.id=Number(b.id)}if(d.charAt(++c))try{b.data=g.parse(d.substr(c))}catch(i){return k()}return e("decoded %s as %j",d,b),b}function f(a){this.reconPack=a,this.buffers=[]}function k(){return{type:a.ERROR,data:"parser error"}}var e=b("debug")("socket.io-parser"),g=b("json3"),n=(b("isarray"),b("emitter")),d=b("./binary");a.protocol=3,a.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],a.CONNECT=0,a.DISCONNECT=1,a.EVENT=2,a.ACK=3,a.ERROR=4,a.BINARY_EVENT=5,a.BINARY_ACK=6,a.Encoder=i,i.prototype.encode=function(b,c){if(e("encoding packet %j",b),a.BINARY_EVENT==b.type||a.BINARY_ACK==b.type)m(b,c);else{var d=j(b);c([d])}},a.Decoder=c,n(c.prototype),c.prototype.add=function(c){var b;if("string"==typeof c)b=o(c),a.BINARY_EVENT==b.type||a.BINARY_ACK==b.type?(this.reconstructor=new f(b),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!(h.Buffer&&l.isBuffer(c)||h.ArrayBuffer&&c instanceof ArrayBuffer||c.base64))throw new Error("Unknown type: "+c);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");b=this.reconstructor.takeBinaryData(c),b&&(this.reconstructor=null,this.emit("decoded",b))}},c.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){var b=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},b("buffer").Buffer)},{"./binary":78,buffer:13,debug:49,emitter:80,isarray:81,json3:82}],80:[function(b,c){function a(a){return a?d(a):void 0}function d(b){for(var c in a.prototype)b[c]=a.prototype[c];return b}var e=b("indexof");c.exports=a,a.prototype.on=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},a.prototype.once=function(b,c){function a(){d.off(b,a),c.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c._off=a,this.on(b,a),this},a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=function(b,c){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var a=this._callbacks[b];if(!a)return this;if(1==arguments.length)return delete this._callbacks[b],this;var d=e(a,c._off||c);return~d&&a.splice(d,1),this},a.prototype.emit=function(c){this._callbacks=this._callbacks||{};var d=[].slice.call(arguments,1),a=this._callbacks[c];if(a){a=a.slice(0);for(var b=0,e=a.length;e>b;++b)a[b].apply(this,d)}return this},a.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},a.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{indexof:75}],81:[function(b,c,a){arguments[4][19][0].apply(a,arguments)},{dup:19}],82:[function(b,c,a){!function(C){function k(e){if(k[e]!==g)return k[e];var j;if("bug-string-char-index"==e)j="a"!="a"[0];else if("json"==e)j=k("json-stringify")&&k("json-parse");else{var b,m='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var a=h.stringify,l="function"==typeof a&&f;if(l){(b=function(){return 1}).toJSON=b;try{l="0"===a(0)&&"0"===a(new Number)&&'""'==a(new String)&&a(d)===g&&a(g)===g&&a()===g&&"1"===a(b)&&"[1]"==a([b])&&"[null]"==a([g])&&"null"==a(null)&&"[null,null,null]"==a([g,d,null])&&a({a:[b,!0,!1,null,"\x00\b\n\f\r	"]})==m&&"1"===a(null,b)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new Date(-1))}catch(n){l=!1}}j=l}if("json-parse"==e){var i=h.parse;if("function"==typeof i)try{if(0===i("0")&&!i(!1)){b=i(m);var c=5==b.a.length&&1===b.a[0];if(c){try{c=!i('"	"')}catch(n){}if(c)try{c=1!==i("01")}catch(n){}if(c)try{c=1!==i("1.")}catch(n){}}}}catch(n){c=!1}j=c}}return k[e]=!!j}var e,m,g,d={}.toString,A="function"==typeof define&&define.amd,s="object"==typeof JSON&&JSON,h="object"==typeof a&&a&&!a.nodeType&&a;h&&s?(h.stringify=s.stringify,h.parse=s.parse):h=C.JSON=s||{};var f=new Date(-0xc782b5b800cec);try{f=-109252==f.getUTCFullYear()&&0===f.getUTCMonth()&&1===f.getUTCDate()&&10==f.getUTCHours()&&37==f.getUTCMinutes()&&6==f.getUTCSeconds()&&708==f.getUTCMilliseconds()}catch(M){}if(!k("json")){var p="[object Function]",D="[object Date]",t="[object Number]",q="[object String]",r="[object Array]",E="[object Boolean]",n=k("bug-string-char-index");if(!f)var j=Math.floor,L=[0,31,59,90,120,151,181,212,243,273,304,334],o=function(b,a){return L[a]+365*(b-1970)+j((b-1969+(a=+(a>1)))/4)-j((b-1901+a)/100)+j((b-1601+a)/400)};(e={}.hasOwnProperty)||(e=function(c){var b,a={};return(a.__proto__=null,a.__proto__={toString:1},a).toString!=d?e=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=a.constructor,e=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),a=null,e.call(this,c)});var F={"boolean":1,number:1,string:1,undefined:1},I=function(a,b){var c=typeof a[b];return"object"==c?!!a[b]:!F[c]};if(m=function(g,h){var b,a,f,c=0;(b=function(){this.valueOf=0}).prototype.valueOf=0,a=new b;for(f in a)e.call(a,f)&&c++;return b=a=null,c?m=2==c?function(b,f){var a,c={},g=d.call(b)==p;for(a in b)g&&"prototype"==a||e.call(c,a)||!(c[a]=1)||!e.call(b,a)||f(a)}:function(b,c){var a,f,g=d.call(b)==p;for(a in b)g&&"prototype"==a||!e.call(b,a)||(f="constructor"===a)||c(a);(f||e.call(b,a="constructor"))&&c(a)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(b,f){var c,g,h=d.call(b)==p,i=!h&&"function"!=typeof b.constructor&&I(b,"hasOwnProperty")?b.hasOwnProperty:e;for(c in b)h&&"prototype"==c||!i.call(b,c)||f(c);for(g=a.length;c=a[--g];i.call(b,c)&&f(c));}),m(g,h)},!k("json-stringify")){var J={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},K="000000",i=function(a,b){return(K+(b||0)).slice(-a)},B="\\u00",x=function(b){var e,c='"',a=0,f=b.length,g=f>10&&n;for(g&&(e=b.split(""));f>a;a++){var d=b.charCodeAt(a);switch(d){case 8:case 9:case 10:case 12:case 13:case 34:case 92:c+=J[d];break;default:if(32>d){c+=B+i(2,d.toString(16));break}c+=g?e[a]:n?b.charAt(a):b[a]}}return c+'"'},w=function(F,K,v,H,l,k,n){var a,c,b,p,h,s,z,A,B,C,f,G,y,u,J,I;try{a=K[F]}catch(L){}if("object"==typeof a&&a)if(c=d.call(a),c!=D||e.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=t&&c!=q&&c!=r||e.call(a,"toJSON"))&&(a=a.toJSON(F));else if(a>-1/0&&1/0>a){if(o){for(h=j(a/864e5),b=j(h/365.2425)+1970-1;o(b+1,0)<=h;b++);for(p=j((h-o(b,0))/30.42);o(b,p+1)<=h;p++);h=1+h-o(b,p),s=(a%864e5+864e5)%864e5,z=j(s/36e5)%24,A=j(s/6e4)%60,B=j(s/1e3)%60,C=s%1e3}else b=a.getUTCFullYear(),p=a.getUTCMonth(),h=a.getUTCDate(),z=a.getUTCHours(),A=a.getUTCMinutes(),B=a.getUTCSeconds(),C=a.getUTCMilliseconds();a=(0>=b||b>=1e4?(0>b?"-":"+")+i(6,0>b?-b:b):i(4,b))+"-"+i(2,p+1)+"-"+i(2,h)+"T"+i(2,z)+":"+i(2,A)+":"+i(2,B)+"."+i(3,C)+"Z"}else a=null;if(v&&(a=v.call(K,F,a)),null===a)return"null";if(c=d.call(a),c==E)return""+a;if(c==t)return a>-1/0&&1/0>a?""+a:"null";if(c==q)return x(""+a);if("object"==typeof a){for(u=n.length;u--;)if(n[u]===a)throw TypeError();if(n.push(a),f=[],J=k,k+=l,c==r){for(y=0,u=a.length;u>y;y++)G=w(y,a,v,H,l,k,n),f.push(G===g?"null":G);I=f.length?l?"[\n"+k+f.join(",\n"+k)+"\n"+J+"]":"["+f.join(",")+"]":"[]"}else m(H||a,function(b){var c=w(b,a,v,H,l,k,n);c!==g&&f.push(x(b)+":"+(l?" ":"")+c)}),I=f.length?l?"{\n"+k+f.join(",\n"+k)+"\n"+J+"}":"{"+f.join(",")+"}":"{}";return n.pop(),I}};h.stringify=function(j,b,a){var f,h,g,c;if("function"==typeof b||"object"==typeof b&&b)if((c=d.call(b))==p)h=b;else if(c==r){g={};for(var e,i=0,k=b.length;k>i;e=b[i++],c=d.call(e),(c==q||c==t)&&(g[e]=1));}if(a)if((c=d.call(a))==t){if((a-=a%1)>0)for(f="",a>10&&(a=10);f.length<a;f+=" ");}else c==q&&(f=a.length<=10?a:a.slice(0,10));return w("",(e={},e[""]=j,e),h,g,f,"",[])}}if(!k("json-parse")){var b,u,G=String.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},c=function(){throw b=u=null,SyntaxError()},l=function(){for(var f,g,e,i,a,d=u,h=d.length;h>b;)switch(a=d.charCodeAt(b)){case 9:case 10:case 13:case 32:b++;break;case 123:case 125:case 91:case 93:case 58:case 44:return f=n?d.charAt(b):d[b],b++,f;case 34:for(f="@",b++;h>b;)if(a=d.charCodeAt(b),32>a)c();else if(92==a)switch(a=d.charCodeAt(++b)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:f+=H[a],b++;break;case 117:for(g=++b,e=b+4;e>b;b++)a=d.charCodeAt(b),a>=48&&57>=a||a>=97&&102>=a||a>=65&&70>=a||c();f+=G("0x"+d.slice(g,b));break;default:c()}else{if(34==a)break;for(a=d.charCodeAt(b),g=b;a>=32&&92!=a&&34!=a;)a=d.charCodeAt(++b);f+=d.slice(g,b)}if(34==d.charCodeAt(b))return b++,f;c();default:if(g=b,45==a&&(i=!0,a=d.charCodeAt(++b)),a>=48&&57>=a){for(48==a&&(a=d.charCodeAt(b+1),a>=48&&57>=a)&&c(),i=!1;h>b&&(a=d.charCodeAt(b),a>=48&&57>=a);b++);if(46==d.charCodeAt(b)){for(e=++b;h>e&&(a=d.charCodeAt(e),a>=48&&57>=a);e++);e==b&&c(),b=e}if(a=d.charCodeAt(b),101==a||69==a){for(a=d.charCodeAt(++b),(43==a||45==a)&&b++,e=b;h>e&&(a=d.charCodeAt(e),a>=48&&57>=a);e++);e==b&&c(),b=e}return+d.slice(g,b)}if(i&&c(),"true"==d.slice(b,b+4))return b+=4,!0;if("false"==d.slice(b,b+5))return b+=5,!1;if("null"==d.slice(b,b+4))return b+=4,null;c()}return"$"},v=function(a){var b,d;if("$"==a&&c(),"string"==typeof a){if("@"==(n?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=l(),"]"!=a;d||(d=!0))d&&(","==a?(a=l(),"]"==a&&c()):c()),","==a&&c(),b.push(v(a));return b}if("{"==a){for(b={};a=l(),"}"!=a;d||(d=!0))d&&(","==a?(a=l(),"}"==a&&c()):c()),(","==a||"string"!=typeof a||"@"!=(n?a.charAt(0):a[0])||":"!=l())&&c(),b[a.slice(1)]=v(l());return b}c()}return a},y=function(a,b,d){var c=z(a,b,d);c===g?delete a[b]:a[b]=c},z=function(e,f,b){var c,a=e[f];if("object"==typeof a&&a)if(d.call(a)==r)for(c=a.length;c--;)y(a,c,b);else m(a,function(c){y(a,c,b)});return b.call(e,f,a)};h.parse=function(g,a){var e,f;return b=0,u=""+g,e=v(l()),"$"!=l()&&c(),b=u=null,a&&d.call(a)==p?z((f={},f[""]=e,f),"",a):e}}}A&&define(function(){return h})}(this)},{}],83:[function(c,a){function b(c,a){var d=[];a=a||0;for(var b=a||0;b<c.length;b++)d[b-a]=c[b];return d}a.exports=b},{}],84:[function(a,b){b.exports=a("./lib")},{"./lib":86}],85:[function(a,b){(function(f){function c(a,b){if(!(this instanceof c))return new c(a,b);d.call(this,b),this.blob=a,this.slice=a.slice||a.webkitSlice||a.mozSlice,this.start=0;var f=this.fileReader=new FileReader;f.onload=e(this,"_onload"),f.onerror=e(this,"_onerror")}var g=a("util"),d=a("stream").Readable,e=a("component-bind");b.exports=c,g.inherits(c,d),c.prototype._read=function(b){var c=this.start,d=this.start=this.start+b,a=this.slice.call(this.blob,c,d);a.size?this.fileReader.readAsArrayBuffer(a):this.push(null)},c.prototype._onload=function(a){var b=new f(new Uint8Array(a.target.result));this.push(b)},c.prototype._onerror=function(a){var b=a.target.error;this.emit("error",b)}}).call(this,a("buffer").Buffer)},{buffer:13,"component-bind":90,stream:32,util:35}],86:[function(b,d,a){function e(d,b){return b=b||{},null==b.forceBase64&&(b.forceBase64=a.forceBase64),d._streamSocket||(d._streamSocket=new c(d,b)),d._streamSocket}var c=b("./socket"),f=b("./iostream"),g=b("./blob-read-stream");a=d.exports=e,a.Socket=c,a.forceBase64=!1,a.createStream=function(a){return new f(a)},a.createBlobReadStream=function(a,b){return new g(a,b)}},{"./blob-read-stream":85,"./iostream":87,"./socket":88}],87:[function(c,d){function a(b){return this instanceof a?(a.super_.call(this,b),this.id=null,this.socket=null,this.pushBuffer=[],this.writeBuffer=[],this._readable=!1,this._writable=!1,this.destroyed=!1,this.allowHalfOpen=b&&b.allowHalfOpen||!1,this.on("finish",this._onfinish),this.on("end",this._onend),void this.on("error",this._onerror)):new a(b)}var e=c("util"),f=c("stream").Duplex,g=c("component-bind"),b=c("debug")("socket.io-stream:iostream");d.exports=a,e.inherits(a,f),a.prototype.destroy=function(){return b("destroy"),this.destroyed?void b("already destroyed"):(this.readable=this.writable=!1,this.socket&&(b("clean up"),this.socket.cleanup(this.id),this.socket=null),void(this.destroyed=!0))},a.prototype._read=function(b){var a;if(!this.destroyed)if(this.pushBuffer.length)for(;(a=this.pushBuffer.shift())&&a(););else this._readable=!0,this.socket._read(this.id,b)},a.prototype._onread=function(){var a=this.writeBuffer.shift();return a?a():void(this._writable=!0)},a.prototype._write=function(c,d,e){function b(){a.destroyed||(a._writable=!1,a.socket._write(a.id,c,d,e))}var a=this;this._writable?b():this.writeBuffer.push(b)},a.prototype._onwrite=function(c,d,e){function a(){b._readable=!1;var a=b.push(c||"",d);return e(),a}var b=this;this._readable?a():this.pushBuffer.push(a)},a.prototype._end=function(){this.pushBuffer.length?this.pushBuffer.push(g(this,"_done")):this._done()},a.prototype._done=function(){return this._readable=!1,this.push(null)},a.prototype._onfinish=function(){return b("_onfinish"),this.socket&&this.socket._end(this.id),this.writable=!1,this._writableState.ended=!0,!this.readable||this._readableState.ended?(b("_onfinish: ended, destroy %s",this._readableState),this.destroy()):(b("_onfinish: not ended"),void(this.allowHalfOpen||(this.push(null),this.readable&&!this._readableState.endEmitted&&this.read(0))))},a.prototype._onend=function(){return b("_onend"),this.readable=!1,this._readableState.ended=!0,!this.writable||this._writableState.finished?(b("_onend: %s",this._writableState),this.destroy()):(b("_onend: not finished"),void(this.allowHalfOpen||this.end()))},a.prototype._onerror=function(a){!a.remote&&this.socket&&this.socket._error(this.id,a),this.destroy()}},{"component-bind":90,debug:91,stream:32,util:35}],88:[function(b,c,a){(function(i,j){function d(b,f){if(!(this instanceof d))return new d(b,f);g.call(this),f=f||{},this.sio=b,this.forceBase64=!!f.forceBase64,this.streams={};var c=a.event;b.on(c,e(this,h)),b.on(c+"-read",e(this,"_onread")),b.on(c+"-write",e(this,"_onwrite")),b.on(c+"-end",e(this,"_onend")),b.on(c+"-error",e(this,"_onerror")),b.on("error",e(this,h,"error")),b.on("disconnect",e(this,"_ondisconnect"))}var n=b("util"),g=b("events").EventEmitter,m=b("./iostream"),o=b("./uuid"),e=b("component-bind"),f=b("debug")("socket.io-stream:socket"),h=g.prototype.emit,k=g.prototype.on,l=Array.prototype.slice;a=c.exports=d,a.event="$stream",a.events=["error","newListener","removeListener"],n.inherits(d,g),d.prototype.$emit=h,d.prototype.emit=function(b){return~a.events.indexOf(b)?h.apply(this,arguments):(this._stream.apply(this,arguments),this)},d.prototype.on=function(c,b,d){return~a.events.indexOf(c)?k.apply(this,arguments):("function"==typeof b&&(d=b,b=null),this._onstream(c,b,d),this)},d.prototype._stream=function(e){f("sending new streams");var b=l.call(arguments,1),c=[],d=this.sio;b=b.map(function(a,d){if(!(a instanceof m))return a;if(a.socket||a.destroyed)throw new Error("stream has already been sent.");c.push(d);var b=o();return this.streams[b]=a,a.id=b,a.socket=this,b},this),d.emit.apply(d,[a.event,e,c].concat(b))},d.prototype._read=function(b,c){this.sio.emit(a.event+"-read",b,c)},d.prototype._write=function(d,b,c,e){this.forceBase64?(c="base64",b=b.toString(c)):j.isBuffer(b)&&!i.Buffer&&(b=b.toArrayBuffer()),this.sio.emit(a.event+"-write",d,b,c,e)},d.prototype._end=function(b){this.sio.emit(a.event+"-end",b)},d.prototype._error=function(c,b){this.sio.emit(a.event+"-error",c,b.message||b)},d.prototype._onstream=function(c,d,a){function b(c){f("new streams");var b=l.call(arguments,1);b=b.map(function(a,e){if(!~c.indexOf(e))return a;if(this.streams[a])return void this._error(a,"id already exists");var b=this.streams[a]=new m(d);return b.id=a,b.socket=this,b},this),a.apply(this,b)}if("function"!=typeof a)throw TypeError("listener must be a function");b.listener=a,k.call(this,c,b)},d.prototype._onread=function(a,c){f('read: "%s"',a);var b=this.streams[a];b?b._onread(c):this._error(a,"invalid stream id")},d.prototype._onwrite=function(b,a,d,e){f('write: "%s"',b);var c=this.streams[b];return c?(i.ArrayBuffer&&a instanceof ArrayBuffer&&(a=new j(new Uint8Array(a))),void c._onwrite(a,d,e)):void this._error(b,"invalid stream id")},d.prototype._onend=function(a){f('end: "%s"',a);var b=this.streams[a];return b?void b._end():void this._error(a,"invalid stream id")},d.prototype._onerror=function(a,b){f('error: "%s", "%s"',a,b);var c=this.streams[a];if(!c)return void f('invalid stream id: "%s"',a);var d=new Error(b);d.remote=!0,c.emit("error",d)},d.prototype._ondisconnect=function(){var a;for(var b in this.streams)a=this.streams[b],a.destroy(),a.emit("close"),a.emit("error",new Error("Connection aborted"))},d.prototype.cleanup=function(a){delete this.streams[a]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},b("buffer").Buffer)},{"./iostream":87,"./uuid":89,buffer:13,"component-bind":90,debug:91,events:17,util:35}],89:[function(c,b){function a(b){return b?(b^16*Math.random()>>b/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,a)}b.exports=a},{}],90:[function(b,c,a){arguments[4][47][0].apply(a,arguments)},{dup:47}],91:[function(d,e,a){function f(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function g(){var b=arguments,c=this.useColors;if(b[0]=(c?"%c":"")+this.namespace+(c?" %c":" ")+b[0]+(c?"%c ":" ")+"+"+a.humanize(this.diff),!c)return b;var d="color: "+this.color;b=[b[0],d,"color: inherit"].concat(Array.prototype.slice.call(b,1));var e=0,f=0;return b[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),b.splice(f,0,d),b}function h(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(a){try{null==a?b.removeItem("debug"):b.debug=a}catch(c){}}function c(){var a;try{a=b.debug}catch(c){}return a}function j(){try{return window.localStorage}catch(a){}}a=e.exports=d("./debug"),a.log=h,a.formatArgs=g,a.save=i,a.load=c,a.useColors=f;var b;b="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:j(),a.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],a.formatters.j=function(a){return JSON.stringify(a)},a.enable(c())},{"./debug":92}],92:[function(j,f,a){function d(){return a.colors[k++%a.colors.length]}function e(e){function f(){}function c(){var f=c,g=+new Date,i=g-(b||g);f.diff=i,f.prev=b,f.curr=g,b=g,null==f.useColors&&(f.useColors=a.useColors()),null==f.color&&f.useColors&&(f.color=d());var e=Array.prototype.slice.call(arguments);e[0]=a.coerce(e[0]),"string"!=typeof e[0]&&(e=["%o"].concat(e));var h=0;e[0]=e[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var c=a.formatters[d];if("function"==typeof c){var g=e[h];b=c.call(f,g),e.splice(h,1),h--}return b}),"function"==typeof a.formatArgs&&(e=a.formatArgs.apply(f,e));var j=c.log||a.log||void 0;j.apply(f,e)}f.enabled=!1,c.enabled=!0;var g=a.enabled(e)?c:f;return g.namespace=e,g}function c(b){a.save(b);for(var d=(b||"").split(/[\s,]+/),e=d.length,c=0;e>c;c++)d[c]&&(b=d[c].replace(/\*/g,".*?"),"-"===b[0]?a.skips.push(new RegExp("^"+b.substr(1)+"$")):a.names.push(new RegExp("^"+b+"$")))}function g(){a.enable("")}function h(d){var b,c;for(b=0,c=a.skips.length;c>b;b++)if(a.skips[b].test(d))return!1;for(b=0,c=a.names.length;c>b;b++)if(a.names[b].test(d))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}a=f.exports=e,a.coerce=i,a.disable=g,a.enable=c,a.enabled=h,a.humanize=j("ms"),a.names=[],a.skips=[],a.formatters={};var b,k=0},{ms:93}],93:[function(k,f){function h(h){var f=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(h);if(f){var e=parseFloat(f[1]),i=(f[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return e*g;case"days":case"day":case"d":return e*d;case"hours":case"hour":case"hrs":case"hr":case"h":return e*c;case"minutes":case"minute":case"mins":case"min":case"m":return e*b;case"seconds":case"second":case"secs":case"sec":case"s":return e*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return e}}}function i(e){return e>=d?Math.round(e/d)+"d":e>=c?Math.round(e/c)+"h":e>=b?Math.round(e/b)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function j(f){return e(f,d,"day")||e(f,c,"hour")||e(f,b,"minute")||e(f,a,"second")||f+" ms"}function e(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var a=1e3,b=60*a,c=60*b,d=24*c,g=365.25*d;f.exports=function(a,b){return b=b||{},"string"==typeof a?h(a):b["long"]?j(a):i(a)}},{}],94:[function(c,a,b){!function(d,c){"undefined"!=typeof b&&"undefined"!=typeof a?a.exports=c():"function"==typeof define&&"object"==typeof define.amd?define(c):this[d]=c()}("validator",function(a){"use strict";function b(a,c){a=a||{};for(var b in c)"undefined"==typeof a[b]&&(a[b]=c[b]);return a}function q(b){var d="(\\"+b.symbol.replace(/\./g,"\\.")+")"+(b.require_symbol?"":"?"),c="-?",e="[1-9]\\d*",f="[1-9]\\d{0,2}(\\"+b.thousands_separator+"\\d{3})*",g=["0",e,f],h="("+g.join("|")+")?",i="(\\"+b.decimal_separator+"\\d{2})?",a=h+i;return b.allow_negatives&&!b.parens_for_negatives&&(b.negative_sign_after_digits?a+=c:b.negative_sign_before_digits&&(a=c+a)),b.allow_negative_sign_placeholder?a="( (?!\\-))?"+a:b.allow_space_after_symbol?a=" ?"+a:b.allow_space_after_digits&&(a+="( (?!$))?"),
b.symbol_after_digits?a+=d:a=d+a,b.allow_negatives&&(b.parens_for_negatives?a="(\\("+a+"\\)|"+a+")":b.negative_sign_before_digits||b.negative_sign_after_digits||(a=c+a)),new RegExp("^(?!-? )(?=.*\\d)"+a+"$")}a={version:"3.34.0"};var c=/((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))/,y=/([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~\.]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~\.]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\s)*/,B=new RegExp("^"+c.source+"$","i"),g=new RegExp("^"+y.source+"<"+c.source+">$","i"),h=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,i=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/,j=/^(?:[0-9]{9}X|[0-9]{10})$/,k=/^(?:[0-9]{13})$/,l=/^(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)$/,m=/^[0-9A-F]{1,4}$/i,n={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},o=/^[a-zA-Z]+$/,p=/^[a-zA-Z0-9]+$/,G=/^[-+]?[0-9]+$/,r=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,s=/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,t=/^[0-9a-fA-F]+$/,u=/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,v=/^[\x00-\x7F]+$/,w=/[^\x00-\x7F]/,d=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,e=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,z=/[\uD800-\uDBFF][\uDC00-\uDFFF]/,A=/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=|[A-Za-z0-9+\/]{4})$/,f={"zh-CN":/^(\+?0?86\-?)?1[345789]\d{9}$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-HK":/^(\+?852\-?)?[569]\d{3}\-?\d{4}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"pt-PT":/^(\+351)?9[1236]\d{7}$/,"el-GR":/^(\+30)?((2\d{9})|(69\d{8}))$/};a.extend=function(b,c){a[b]=function(){var b=Array.prototype.slice.call(arguments);return b[0]=a.toString(b[0]),c.apply(a,b)}},a.init=function(){for(var b in a)"function"==typeof a[b]&&"toString"!==b&&"toDate"!==b&&"extend"!==b&&"init"!==b&&a.extend(b,a[b])},a.toString=function(a){return"object"==typeof a&&null!==a&&a.toString?a=a.toString():null===a||"undefined"==typeof a||isNaN(a)&&!a.length?a="":"string"!=typeof a&&(a+=""),a},a.toDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)?a:(a=Date.parse(a),isNaN(a)?null:new Date(a))},a.toFloat=function(a){return parseFloat(a)},a.toInt=function(a,b){return parseInt(a,b||10)},a.toBoolean=function(a,b){return b?"1"===a||"true"===a:"0"!==a&&"false"!==a&&""!==a},a.equals=function(b,c){return b===a.toString(c)},a.contains=function(b,c){return b.indexOf(a.toString(c))>=0},a.matches=function(b,a,c){return"[object RegExp]"!==Object.prototype.toString.call(a)&&(a=new RegExp(a,c)),a.test(b)};var C={allow_display_name:!1};a.isEmail=function(c,a){return a=b(a,C),B.test(c)||a.allow_display_name===!0&&g.test(c)};var D={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1};a.isURL=function(d,e){if(!d||d.length>=2083)return!1;if(0===d.indexOf("mailto:"))return!1;e=b(e,D);var n,j,p,f,g,o,h,k,l,m,i,c;if(c=d.split("://"),c.length>1){if(n=c.shift(),-1===e.protocols.indexOf(n))return!1}else{if(e.require_protocol)return!1;e.allow_protocol_relative_urls&&"//"===d.substr(0,2)&&(c[0]=d.substr(2))}if(d=c.join("://"),c=d.split("#"),d=c.shift(),i=c.join("#"),i&&/\s/.test(i))return!1;if(c=d.split("?"),d=c.shift(),m=c.join("?"),m&&/\s/.test(m))return!1;if(c=d.split("/"),d=c.shift(),l=c.join("/"),l&&/\s/.test(l))return!1;if(c=d.split("@"),c.length>1&&(f=c.shift(),f.indexOf(":")>=0)){if(f=f.split(":"),j=f.shift(),!/^\S+$/.test(j))return!1;if(p=f.join(":"),!/^\S*$/.test(j))return!1}return o=c.join("@"),c=o.split(":"),g=c.shift(),c.length&&(k=c.join(":"),h=parseInt(k,10),!/^[0-9]+$/.test(k)||0>=h||h>65535)?!1:a.isIP(g)||a.isFQDN(g,e)||"localhost"===g?e.host_whitelist&&-1===e.host_whitelist.indexOf(g)?!1:e.host_blacklist&&-1!==e.host_blacklist.indexOf(g)?!1:!0:!1},a.isIP=function(c,e){if(e=a.toString(e),!e)return a.isIP(c,4)||a.isIP(c,6);if("4"===e){if(!l.test(c))return!1;var g=c.split(".").sort(function(a,b){return a-b});return g[3]<=255}if("6"===e){var b=c.split(":"),f=!1;if(b.length>8)return!1;if("::"===c)return!0;"::"===c.substr(0,2)?(b.shift(),b.shift(),f=!0):"::"===c.substr(c.length-2)&&(b.pop(),b.pop(),f=!0);for(var d=0;d<b.length;++d)if(""===b[d]&&d>0&&d<b.length-1){if(f)return!1;f=!0}else if(!m.test(b[d]))return!1;return f?b.length>=1:8===b.length}return!1};var E={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};a.isFQDN=function(c,d){d=b(d,E),d.allow_trailing_dot&&"."===c[c.length-1]&&(c=c.substring(0,c.length-1));var e=c.split(".");if(d.require_tld){var g=e.pop();if(!e.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(g))return!1}for(var a,f=0;f<e.length;f++){if(a=e[f],d.allow_underscores){if(a.indexOf("__")>=0)return!1;a=a.replace(/_/g,"")}if(!/^[a-z\u00a1-\uffff0-9-]+$/i.test(a))return!1;if("-"===a[0]||"-"===a[a.length-1]||a.indexOf("---")>=0)return!1}return!0},a.isAlpha=function(a){return o.test(a)},a.isAlphanumeric=function(a){return p.test(a)},a.isNumeric=function(a){return G.test(a)},a.isHexadecimal=function(a){return t.test(a)},a.isHexColor=function(a){return u.test(a)},a.isLowercase=function(a){return a===a.toLowerCase()},a.isUppercase=function(a){return a===a.toUpperCase()},a.isInt=function(a){return r.test(a)},a.isFloat=function(a){return""!==a&&s.test(a)},a.isDivisibleBy=function(b,c){return a.toFloat(b)%a.toInt(c)===0},a.isNull=function(a){return 0===a.length},a.isLength=function(a,d,b){var e=a.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],c=a.length-e.length;return c>=d&&("undefined"==typeof b||b>=c)},a.isByteLength=function(a,c,b){return a.length>=c&&("undefined"==typeof b||a.length<=b)},a.isUUID=function(c,a){var b=n[a?a:"all"];return b&&b.test(c)},a.isDate=function(a){return!isNaN(Date.parse(a))},a.isAfter=function(d,e){var b=a.toDate(e||new Date),c=a.toDate(d);return!!(c&&b&&c>b)},a.isBefore=function(d,e){var b=a.toDate(e||new Date),c=a.toDate(d);return c&&b&&b>c},a.isIn=function(c,b){var d;if("[object Array]"===Object.prototype.toString.call(b)){var e=[];for(d in b)e[d]=a.toString(b[d]);return e.indexOf(c)>=0}return"object"==typeof b?b.hasOwnProperty(c):b&&"function"==typeof b.indexOf?b.indexOf(c)>=0:!1},a.isCreditCard=function(g){var b=g.replace(/[^0-9]+/g,"");if(!h.test(b))return!1;for(var f,a,d,e=0,c=b.length-1;c>=0;c--)f=b.substring(c,c+1),a=parseInt(f,10),d?(a*=2,e+=a>=10?a%10+1:a):e+=a,d=!d;return!!(e%10===0?b:!1)},a.isISIN=function(b){if(!i.test(b))return!1;for(var f,a,g=b.replace(/[A-Z]/g,function(a){return parseInt(a,36)}),d=0,e=!0,c=g.length-2;c>=0;c--)f=g.substring(c,c+1),a=parseInt(f,10),e?(a*=2,d+=a>=10?a+1:a):d+=a,e=!e;return parseInt(b.substr(b.length-1),10)===(1e4-d)%10},a.isISBN=function(f,d){if(d=a.toString(d),!d)return a.isISBN(f,10)||a.isISBN(f,13);var b,c=f.replace(/[\s-]+/g,""),e=0;if("10"===d){if(!j.test(c))return!1;for(b=0;9>b;b++)e+=(b+1)*c.charAt(b);if(e+="X"===c.charAt(9)?100:10*c.charAt(9),e%11===0)return!!c}else if("13"===d){if(!k.test(c))return!1;var g=[1,3];for(b=0;12>b;b++)e+=g[b%2]*c.charAt(b);if(c.charAt(12)-(10-e%10)%10===0)return!!c}return!1},a.isMobilePhone=function(b,a){return a in f?f[a].test(b):!1};var F={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_space_after_digits:!1};a.isCurrency=function(c,a){return a=b(a,F),q(a).test(c)},a.isJSON=function(a){try{JSON.parse(a)}catch(b){return!1}return!0},a.isMultibyte=function(a){return w.test(a)},a.isAscii=function(a){return v.test(a)},a.isFullWidth=function(a){return d.test(a)},a.isHalfWidth=function(a){return e.test(a)},a.isVariableWidth=function(a){return d.test(a)&&e.test(a)},a.isSurrogatePair=function(a){return z.test(a)},a.isBase64=function(a){return A.test(a)},a.isMongoId=function(b){return a.isHexadecimal(b)&&24===b.length},a.ltrim=function(b,a){var c=a?new RegExp("^["+a+"]+","g"):/^\s+/g;return b.replace(c,"")},a.rtrim=function(b,a){var c=a?new RegExp("["+a+"]+$","g"):/\s+$/g;return b.replace(c,"")},a.trim=function(b,a){var c=a?new RegExp("^["+a+"]+|["+a+"]+$","g"):/^\s+|\s+$/g;return b.replace(c,"")},a.escape=function(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\`/g,"&#96;")},a.stripLow=function(b,c){var d=c?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return a.blacklist(b,d)},a.whitelist=function(a,b){return a.replace(new RegExp("[^"+b+"]+","g"),"")},a.blacklist=function(a,b){return a.replace(new RegExp("["+b+"]+","g"),"")};var x={lowercase:!0};return a.normalizeEmail=function(e,d){if(d=b(d,x),!a.isEmail(e))return!1;var c=e.split("@",2);if(c[1]=c[1].toLowerCase(),"gmail.com"===c[1]||"googlemail.com"===c[1]){if(c[0]=c[0].toLowerCase().replace(/\./g,""),"+"===c[0][0])return!1;c[0]=c[0].split("+")[0],c[1]="gmail.com"}else d.lowercase&&(c[0]=c[0].toLowerCase());return c.join("@")},a.init(),a})},{}],95:[function(b,a){a.exports={name:"hyperyun-hyperstore-client",version:"1.3.55",description:"",main:"main.js",scripts:{test:'echo "Error: no test specified" && exit 1'},dependencies:{lodash:"*",validator:"*",MD5:"*","murmurhash-js":"*","hyperyun-mongomatcher":"*",JSON2:"~0.1.0","socket.io-stream":"*","socket.io-client":"1.0.6"},devDependencies:{grunt:"*","grunt-browserify":"*","grunt-contrib-uglify":"*"},keywords:["hyperyun","hyperstore","waya","framework","real","time","api"],author:"Hyperyun",license:"MIT"}},{}],96:[function(c,d){var a=c("lodash"),b=function(){};b.prototype.encodePermission=function(b,c){var e=this;if(c=c?c:[],a.isString(b))return this.isValid(b)?b:void 0;if(a.isNumber(b))return b;var d=(b.owner,b["public"],b.group,[b.owner,b.group,b["public"]]);if(d=a.map(d,function(b){return a.isArray(b)||a.isString(b)||void 0==b?(void 0==b&&(b=c),e.convertToPermissionSegment(b)):void 0}),0==a.size(a.compact(d)))return void 0;var f=a.reduce(d,function(a,b){return a<<4|b});return f},b.prototype.isValid=function(){return!0},b.prototype.revokePermission=function(a,b){return"owner"==b?119&a:"group"==b?3855&a:"public"==b?a>>4<<4:0},b.prototype.fromString=function(b){var c=parseInt(b[0]),d=parseInt(b[1]),e=parseInt(b[2]);return a.contains([0,1,2,3,4,5,6,7],c)&&a.contains([0,1,2,3,4,5,6,7],d)&&a.contains([0,1,2,3,4,5,6,7],e)?c<<8|d<<4|e<<0:void 0},b.prototype.decodePermissionToString=function(a){if(void 0==a)return void 0;var b=(1792&a)>>8,c=(112&a)>>4,d=(7&a)>>0;return""+b+c+d},b.prototype.decodePermissionToObject=function(a){function b(a){return{read:(4&a)>0,write:(2&a)>0,execute:(1&a)>0}}var c={owner:b(a>>8&7),group:b(a>>4&7),"public":b(a>>0&7)};return c},b.prototype.decompose=function(a){return[a>>8&7,a>>4&7,a>>0&7]},b.prototype.convertToPermissionSegment=function(b){if(a.isArray(b)){var c=a.intersection(b,["read","find","r"]).length>0,d=a.intersection(b,["write","update","insert","edit","w"]).length>0,e=a.intersection(b,["execute","run","e"]).length>0,f=!1,g=(f?8:0)|(c?4:0)|(d?2:0)|(e?1:0);return g}},b.prototype.test=function(){{var a=this,h=a.encodePermission({owner:[],group:[],"public":[]}),c=a.encodePermission({owner:["r","w","e"],group:[],"public":[]}),d=a.encodePermission({group:["r","w","e"],member:[],"public":[]}),e=a.encodePermission({"public":["r","w","e"],group:[],member:[]}),f=a.encodePermission({owner:["r"],group:["r"],"public":["r"]}),g=a.encodePermission({owner:["r","w","e"],group:["r","w"],"public":["r"]}),n=a.encodePermission({}),i=a.encodePermission({owner:["r","w","e"]}),j=a.encodePermission({group:["r","w","e"]}),k=a.encodePermission({"public":["r","w","e"]}),l=a.encodePermission({owner:["r","w","e"],"public":["r","w","e"]}),m=a.encodePermission({group:["r","w","e"],owner:["r","w","e"]}),b=a.encodePermission({group:["r","w","e"],"public":["r","w","e"]});a.decodePermissionToString(h),a.decodePermissionToString(c),a.decodePermissionToString(d),a.decodePermissionToString(e),a.decodePermissionToString(f),a.decodePermissionToString(g),a.decodePermissionToString(n),a.decodePermissionToString(i),a.decodePermissionToString(j),a.decodePermissionToString(k),a.decodePermissionToString(l),a.decodePermissionToString(m),a.decodePermissionToString(b),a.decodePermissionToObject(h),a.decodePermissionToObject(c),a.decodePermissionToObject(d),a.decodePermissionToObject(e),a.decodePermissionToObject(f),a.decodePermissionToObject(g),a.decodePermissionToObject(n),a.decodePermissionToObject(i),a.decodePermissionToObject(j),a.decodePermissionToObject(k),a.decodePermissionToObject(l),a.decodePermissionToObject(m),a.decodePermissionToObject(b)}},d.exports=b},{lodash:37}]},{},[8]);